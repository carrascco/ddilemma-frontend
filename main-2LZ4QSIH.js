var Kv=Object.defineProperty,NA=Object.defineProperties;var PA=Object.getOwnPropertyDescriptors;var qa=Object.getOwnPropertySymbols;var Qv=Object.prototype.hasOwnProperty,Yv=Object.prototype.propertyIsEnumerable;var Wv=(t,e,n)=>e in t?Kv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e)=>{for(var n in e||={})Qv.call(e,n)&&Wv(t,n,e[n]);if(qa)for(var n of qa(e))Yv.call(e,n)&&Wv(t,n,e[n]);return t},fe=(t,e)=>NA(t,PA(e));var Jv=(t,e)=>{var n={};for(var r in t)Qv.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&qa)for(var r of qa(t))e.indexOf(r)<0&&Yv.call(t,r)&&(n[r]=t[r]);return n};var OA=(t,e)=>{for(var n in e)Kv(t,n,{get:e[n],enumerable:!0})};var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Zv=null;var Bd=1,Xv=Symbol("SIGNAL");function te(t){let e=Zv;return Zv=t,e}var e_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kA(t){if(!(qd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bd)){if(!t.producerMustRecompute(t)&&!$d(t)){t.dirty=!1,t.lastCleanEpoch=Bd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Bd}}function t_(t){return t&&(t.nextProducerIndex=0),te(t)}function n_(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(qd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Hd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function $d(t){za(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(kA(n),r!==n.version))return!0}return!1}function r_(t){if(za(t),qd(t))for(let e=0;e<t.producerNode.length;e++)Hd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Hd(t,e){if(FA(t),za(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Hd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];za(i),i.producerIndexOfThis[r]=e}}function qd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function za(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function FA(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function LA(){throw new Error}var VA=LA;function i_(t){VA=t}function L(t){return typeof t=="function"}function yi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ga=yi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function vr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var De=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(L(r))try{r()}catch(s){e=s instanceof Ga?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{s_(s)}catch(o){e=e??[],o instanceof Ga?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ga(e)}}add(e){var n;if(e&&e!==this)if(this.closed)s_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&vr(n,e)}remove(e){let{_finalizers:n}=this;n&&vr(n,e),e instanceof t&&e._removeParent(this)}};De.EMPTY=(()=>{let t=new De;return t.closed=!0,t})();var zd=De.EMPTY;function Wa(t){return t instanceof De||t&&"closed"in t&&L(t.remove)&&L(t.add)&&L(t.unsubscribe)}function s_(t){L(t)?t():t.unsubscribe()}var kt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vi={setTimeout(t,e,...n){let{delegate:r}=vi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=vi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ka(t){vi.setTimeout(()=>{let{onUnhandledError:e}=kt;if(e)e(t);else throw t})}function $s(){}var o_=Gd("C",void 0,void 0);function a_(t){return Gd("E",void 0,t)}function c_(t){return Gd("N",t,void 0)}function Gd(t,e,n){return{kind:t,value:e,error:n}}var _r=null;function _i(t){if(kt.useDeprecatedSynchronousErrorHandling){let e=!_r;if(e&&(_r={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=_r;if(_r=null,n)throw r}}else t()}function u_(t){kt.useDeprecatedSynchronousErrorHandling&&_r&&(_r.errorThrown=!0,_r.error=t)}var wr=class extends De{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wa(e)&&e.add(this)):this.destination=BA}static create(e,n,r){return new wi(e,n,r)}next(e){this.isStopped?Kd(c_(e),this):this._next(e)}error(e){this.isStopped?Kd(a_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kd(o_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},UA=Function.prototype.bind;function Wd(t,e){return UA.call(t,e)}var Qd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Qa(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Qa(r)}else Qa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Qa(n)}}},wi=class extends wr{constructor(e,n,r){super();let i;if(L(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&kt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wd(e.next,s),error:e.error&&Wd(e.error,s),complete:e.complete&&Wd(e.complete,s)}):i=e}this.destination=new Qd(i)}};function Qa(t){kt.useDeprecatedSynchronousErrorHandling?u_(t):Ka(t)}function jA(t){throw t}function Kd(t,e){let{onStoppedNotification:n}=kt;n&&vi.setTimeout(()=>n(t,e))}var BA={closed:!0,next:$s,error:jA,complete:$s};var Ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ft(t){return t}function Ya(...t){return Yd(t)}function Yd(t){return t.length===0?ft:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var K=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=HA(n)?n:new wi(n,r,i);return _i(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=l_(r),new r((i,s)=>{let o=new wi({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ii](){return this}pipe(...n){return Yd(n)(this)}toPromise(n){return n=l_(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function l_(t){var e;return(e=t??kt.Promise)!==null&&e!==void 0?e:Promise}function $A(t){return t&&L(t.next)&&L(t.error)&&L(t.complete)}function HA(t){return t&&t instanceof wr||$A(t)&&Wa(t)}function Jd(t){return L(t?.lift)}function J(t){return e=>{if(Jd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(t,e,n,r,i){return new Zd(t,e,n,r,i)}var Zd=class extends wr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ei(){return J((t,e)=>{let n=null;t._refCount++;let r=Z(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Di=class extends K{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Jd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new De;let n=this.getSubject();e.add(this.source.subscribe(Z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=De.EMPTY)}return e}refCount(){return Ei()(this)}};var d_=yi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class t extends K{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ja(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new d_}next(n){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_i(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?zd:(this.currentObservers=null,s.push(n),new De(()=>{this.currentObservers=null,vr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new K;return n.source=this,n}}return t.create=(e,n)=>new Ja(e,n),t})(),Ja=class extends st{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zd}};var ke=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Xd={now(){return(Xd.delegate||Date).now()},delegate:void 0};var Za=class extends De{constructor(e,n){super()}schedule(e,n=0){return this}};var Hs={setInterval(t,e,...n){let{delegate:r}=Hs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Hs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ci=class extends Za{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Hs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Hs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ti=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ti.now=Xd.now;var bi=class extends Ti{constructor(e,n=Ti.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var eh=new bi(Ci);var Xa=class extends Ci{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ec=class extends bi{};var th=new ec(Xa);var pt=new K(t=>t.complete());function h_(t){return t&&L(t.schedule)}function f_(t){return t[t.length-1]}function p_(t){return L(f_(t))?t.pop():void 0}function qn(t){return h_(f_(t))?t.pop():void 0}function nh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function m_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function g_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ir(t){return this instanceof Ir?(this.v=t,this):new Ir(t)}function y_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,_){s.push([h,f,g,_])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof Ir?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof g_=="function"?g_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var tc=t=>t&&typeof t.length=="number"&&typeof t!="function";function nc(t){return L(t?.then)}function rc(t){return L(t[Ii])}function ic(t){return Symbol.asyncIterator&&L(t?.[Symbol.asyncIterator])}function sc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oc=qA();function ac(t){return L(t?.[oc])}function cc(t){return y_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ir(n.read());if(i)return yield Ir(void 0);yield yield Ir(r)}}finally{n.releaseLock()}})}function uc(t){return L(t?.getReader)}function xe(t){if(t instanceof K)return t;if(t!=null){if(rc(t))return zA(t);if(tc(t))return GA(t);if(nc(t))return WA(t);if(ic(t))return __(t);if(ac(t))return KA(t);if(uc(t))return QA(t)}throw sc(t)}function zA(t){return new K(e=>{let n=t[Ii]();if(L(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GA(t){return new K(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function WA(t){return new K(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ka)})}function KA(t){return new K(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function __(t){return new K(e=>{YA(t,e).catch(n=>e.error(n))})}function QA(t){return __(cc(t))}function YA(t,e){var n,r,i,s;return m_(this,void 0,void 0,function*(){try{for(n=v_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ot(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function zn(t,e=0){return J((n,r)=>{n.subscribe(Z(r,i=>ot(r,t,()=>r.next(i),e),()=>ot(r,t,()=>r.complete(),e),i=>ot(r,t,()=>r.error(i),e)))})}function Gn(t,e=0){return J((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function w_(t,e){return xe(t).pipe(Gn(e),zn(e))}function I_(t,e){return xe(t).pipe(Gn(e),zn(e))}function E_(t,e){return new K(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function D_(t,e){return new K(n=>{let r;return ot(n,e,()=>{r=t[oc](),ot(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}function lc(t,e){if(!t)throw new Error("Iterable cannot be null");return new K(n=>{ot(n,e,()=>{let r=t[Symbol.asyncIterator]();ot(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function C_(t,e){return lc(cc(t),e)}function T_(t,e){if(t!=null){if(rc(t))return w_(t,e);if(tc(t))return E_(t,e);if(nc(t))return I_(t,e);if(ic(t))return lc(t,e);if(ac(t))return D_(t,e);if(uc(t))return C_(t,e)}throw sc(t)}function de(t,e){return e?T_(t,e):xe(t)}function N(...t){let e=qn(t);return de(t,e)}function Ai(t,e){let n=L(t)?t:()=>t,r=i=>i.error(n());return new K(e?i=>e.schedule(r,0,i):r)}function rh(t){return!!t&&(t instanceof K||L(t.lift)&&L(t.subscribe))}var Tn=yi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function P(t,e){return J((n,r)=>{let i=0;n.subscribe(Z(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:JA}=Array;function ZA(t,e){return JA(e)?t(...e):t(e)}function b_(t){return P(e=>ZA(t,e))}var{isArray:XA}=Array,{getPrototypeOf:eS,prototype:tS,keys:nS}=Object;function A_(t){if(t.length===1){let e=t[0];if(XA(e))return{args:e,keys:null};if(rS(e)){let n=nS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function rS(t){return t&&typeof t=="object"&&eS(t)===tS}function S_(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function dc(...t){let e=qn(t),n=p_(t),{args:r,keys:i}=A_(t);if(r.length===0)return de([],e);let s=new K(iS(r,e,i?o=>S_(i,o):ft));return n?s.pipe(b_(n)):s}function iS(t,e,n=ft){return r=>{R_(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)R_(e,()=>{let u=de(t[c],e),l=!1;u.subscribe(Z(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function R_(t,e,n){t?ot(n,t,e):e()}function M_(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?g(_):c.push(_),g=_=>{s&&e.next(_),u++;let m=!1;xe(n(_,l++)).subscribe(Z(e,w=>{i?.(w),s?f(w):e.next(w)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){let w=c.shift();o?ot(e,o,()=>g(w)):g(w)}h()}catch(w){e.error(w)}}))};return t.subscribe(Z(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Se(t,e,n=1/0){return L(e)?Se((r,i)=>P((s,o)=>e(r,s,i,o))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),J((r,i)=>M_(r,i,t,n)))}function ih(t=1/0){return Se(ft,t)}function x_(){return ih(1)}function Si(...t){return x_()(de(t,qn(t)))}function hc(t){return new K(e=>{xe(t()).subscribe(e)})}function at(t,e){return J((n,r)=>{let i=0;n.subscribe(Z(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Wn(t){return J((e,n)=>{let r=null,i=!1,s;r=e.subscribe(Z(n,void 0,void 0,o=>{s=xe(t(o,Wn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function N_(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(Z(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Kn(t,e){return L(e)?Se(t,e,1):Se(t,1)}function Qn(t){return J((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function bn(t){return t<=0?()=>pt:J((e,n)=>{let r=0;e.subscribe(Z(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function sh(t){return P(()=>t)}function fc(t=sS){return J((e,n)=>{let r=!1;e.subscribe(Z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sS(){return new Tn}function Yn(t){return J((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ft(t,e){let n=arguments.length>=2;return r=>r.pipe(t?at((i,s)=>t(i,s,r)):ft,bn(1),n?Qn(e):fc(()=>new Tn))}function Ri(t){return t<=0?()=>pt:J((e,n)=>{let r=[];e.subscribe(Z(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function oh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?at((i,s)=>t(i,s,r)):ft,Ri(1),n?Qn(e):fc(()=>new Tn))}function pc(t,e){return J(N_(t,e,arguments.length>=2,!0))}function gc(...t){let e=qn(t);return J((n,r)=>{(e?Si(t,n,e):Si(t,n)).subscribe(r)})}function gt(t,e){return J((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(Z(r,c=>{i?.unsubscribe();let u=0,l=s++;xe(t(c,l)).subscribe(i=Z(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ah(t){return J((e,n)=>{xe(t).subscribe(Z(n,()=>n.complete(),$s)),!n.closed&&e.subscribe(n)})}function Ce(t,e,n){let r=L(t)||e||n?{next:t,error:e,complete:n}:t;return r?J((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Z(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ft}var yw="https://g.co/ng/security#xss",R=class extends Error{constructor(e,n){super(Kc(e,n)),this.code=e}};function Kc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function oo(t){return{toString:t}.toString()}var mc="__parameters__";function oS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function vw(t,e,n){return oo(()=>{let r=oS(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(mc)?c[mc]:Object.defineProperty(c,mc,{value:[]})[mc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var qs=globalThis;function ce(t){for(let e in t)if(t[e]===ce)return e;throw Error("Could not find renamed property on target object.")}function Xe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Xe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function P_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var aS=ce({__forward_ref__:ce});function pf(t){return t.__forward_ref__=pf,t.toString=function(){return Xe(this())},t}function Ze(t){return _w(t)?t():t}function _w(t){return typeof t=="function"&&t.hasOwnProperty(aS)&&t.__forward_ref__===pf}function b(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function et(t){return{providers:t.providers||[],imports:t.imports||[]}}function Qc(t){return O_(t,Iw)||O_(t,Ew)}function ww(t){return Qc(t)!==null}function O_(t,e){return t.hasOwnProperty(e)?t[e]:null}function cS(t){let e=t&&(t[Iw]||t[Ew]);return e||null}function k_(t){return t&&(t.hasOwnProperty(F_)||t.hasOwnProperty(uS))?t[F_]:null}var Iw=ce({\u0275prov:ce}),F_=ce({\u0275inj:ce}),Ew=ce({ngInjectableDef:ce}),uS=ce({ngInjectorDef:ce}),S=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=b({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Dw(t){return t&&!!t.\u0275providers}var lS=ce({\u0275cmp:ce}),dS=ce({\u0275dir:ce}),hS=ce({\u0275pipe:ce}),fS=ce({\u0275mod:ce}),bc=ce({\u0275fac:ce}),zs=ce({__NG_ELEMENT_ID__:ce}),L_=ce({__NG_ENV_ID__:ce});function Gs(t){return typeof t=="string"?t:t==null?"":String(t)}function pS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Gs(t)}function gS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,t)}function gf(t,e){throw new R(-201,!1)}var Q=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Q||{}),Th;function Cw(){return Th}function bt(t){let e=Th;return Th=t,e}function Tw(t,e,n){let r=Qc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Q.Optional)return null;if(e!==void 0)return e;gf(t,"Injector")}var mS={},Ws=mS,bh="__NG_DI_FLAG__",Ac="ngTempTokenPath",yS="ngTokenPath",vS=/\n/gm,_S="\u0275",V_="__source",Pi;function wS(){return Pi}function Jn(t){let e=Pi;return Pi=t,e}function IS(t,e=Q.Default){if(Pi===void 0)throw new R(-203,!1);return Pi===null?Tw(t,void 0,e):Pi.get(t,e&Q.Optional?null:void 0,e)}function A(t,e=Q.Default){return(Cw()||IS)(Ze(t),e)}function I(t,e=Q.Default){return A(t,Yc(e))}function Yc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ah(t){let e=[];for(let n=0;n<t.length;n++){let r=Ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new R(900,!1);let i,s=Q.Default;for(let o=0;o<r.length;o++){let a=r[o],c=ES(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(A(i,s))}else e.push(A(r))}return e}function bw(t,e){return t[bh]=e,t.prototype[bh]=e,t}function ES(t){return t[bh]}function DS(t,e,n,r){let i=t[Ac];throw e[V_]&&i.unshift(e[V_]),t.message=CS(`
`+t.message,i,n,r),t[yS]=i,t[Ac]=null,t}function CS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==_S?t.slice(2):t;let i=Xe(e);if(Array.isArray(e))i=e.map(Xe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Xe(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vS,`
  `)}`}var _t=bw(vw("Optional"),8);var Aw=bw(vw("SkipSelf"),4);function ki(t,e){let n=t.hasOwnProperty(bc);return n?t[bc]:null}function mf(t,e){t.forEach(n=>Array.isArray(n)?mf(n,e):e(n))}function Sw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Sc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function TS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function bS(t,e,n){let r=ao(t,e);return r>=0?t[r|1]=n:(r=~r,TS(t,r,e,n)),r}function ch(t,e){let n=ao(t,e);if(n>=0)return t[n|1]}function ao(t,e){return AS(t,e,1)}function AS(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ks={},At=[],Dr=new S(""),Rw=new S("",-1),Mw=new S(""),Rc=class{get(e,n=Ws){if(n===Ws){let r=new Error(`NullInjectorError: No provider for ${Xe(e)}!`);throw r.name="NullInjectorError",r}return n}},xw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(xw||{}),tn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(tn||{}),An=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(An||{});function SS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Sh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];MS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function RS(t){return t===3||t===4||t===6}function MS(t){return t.charCodeAt(0)===64}function yf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?U_(t,n,i,null,e[++r]):U_(t,n,i,null,null))}}return t}function U_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Nw="ng-template";function xS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(vf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function vf(t){return t.type===4&&t.value!==Nw}function NS(t,e,n){let r=t.type===4&&!n?Nw:t.value;return e===r}function PS(t,e,n){let r=4,i=t.attrs,s=i!==null?FS(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Lt(r)&&!Lt(c))return!1;if(o&&Lt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!NS(t,c,n)||c===""&&e.length===1){if(Lt(r))return!1;o=!0}}else if(r&8){if(i===null||!xS(t,i,c,n)){if(Lt(r))return!1;o=!0}}else{let u=e[++a],l=OS(c,i,vf(t),n);if(l===-1){if(Lt(r))return!1;o=!0;continue}if(u!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(Lt(r))return!1;o=!0}}}}return Lt(r)||o}function Lt(t){return(t&1)===0}function OS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return LS(e,t)}function kS(t,e,n=!1){for(let r=0;r<e.length;r++)if(PS(t,e[r],n))return!0;return!1}function FS(t){for(let e=0;e<t.length;e++){let n=t[e];if(RS(n))return e}return t.length}function LS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function j_(t,e){return t?":not("+e.trim()+")":e}function VS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Lt(o)&&(e+=j_(s,i),i=""),r=o,s=s||!Lt(r);n++}return i!==""&&(e+=j_(s,i)),e}function US(t){return t.map(VS).join(",")}function jS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Lt(i))break;i=s}r++}return{attrs:e,classes:n}}function ut(t){return oo(()=>{let e=Lw(t),n=fe(C({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===xw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||tn.Emulated,styles:t.styles||At,_:null,schemas:t.schemas||null,tView:null,id:""});Vw(n);let r=t.dependencies;return n.directiveDefs=$_(r,!1),n.pipeDefs=$_(r,!0),n.id=HS(n),n})}function BS(t){return Cr(t)||Pw(t)}function $S(t){return t!==null}function tt(t){return oo(()=>({type:t.type,bootstrap:t.bootstrap||At,declarations:t.declarations||At,imports:t.imports||At,exports:t.exports||At,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function B_(t,e){if(t==null)return Ks;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=An.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==An.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Bi(t){return oo(()=>{let e=Lw(t);return Vw(e),e})}function Cr(t){return t[lS]||null}function Pw(t){return t[dS]||null}function Ow(t){return t[hS]||null}function kw(t){let e=Cr(t)||Pw(t)||Ow(t);return e!==null?e.standalone:!1}function Fw(t,e){let n=t[fS]||null;if(!n&&e===!0)throw new Error(`Type ${Xe(t)} does not have '\u0275mod' property.`);return n}function Lw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ks,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||At,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:B_(t.inputs,e),outputs:B_(t.outputs),debugInfo:null}}function Vw(t){t.features?.forEach(e=>e(t))}function $_(t,e){if(!t)return null;let n=e?Ow:BS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter($S)}function HS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function xr(t){return{\u0275providers:t}}function _f(...t){return{\u0275providers:Uw(!0,t),\u0275fromNgModule:!0}}function Uw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return mf(e,o=>{let a=o;Rh(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jw(i,s),n}function jw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];wf(i,s=>{e(s,r)})}}function Rh(t,e,n,r){if(t=Ze(t),!t)return!1;let i=null,s=k_(t),o=!s&&Cr(t);if(!s&&!o){let c=t.ngModule;if(s=k_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Rh(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{mf(s.imports,l=>{Rh(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&jw(u,e)}if(!a){let u=ki(i)||(()=>new i);e({provide:i,useFactory:u,deps:At},i),e({provide:Mw,useValue:i,multi:!0},i),e({provide:Dr,useValue:()=>A(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;wf(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function wf(t,e){for(let n of t)Dw(n)&&(n=n.\u0275providers),Array.isArray(n)?wf(n,e):e(n)}var qS=ce({provide:String,useValue:ce});function Bw(t){return t!==null&&typeof t=="object"&&qS in t}function zS(t){return!!(t&&t.useExisting)}function GS(t){return!!(t&&t.useFactory)}function Fi(t){return typeof t=="function"}function WS(t){return!!t.useClass}var Jc=new S(""),Ic={},KS={},uh;function If(){return uh===void 0&&(uh=new Rc),uh}var ct=class{},Qs=class extends ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xh(e,o=>this.processProvider(o)),this.records.set(Rw,Mi(void 0,this)),i.has("environment")&&this.records.set(ct,Mi(void 0,this));let s=this.records.get(Jc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Mw,At,Q.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Jn(this),r=bt(void 0),i;try{return e()}finally{Jn(n),bt(r)}}get(e,n=Ws,r=Q.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(L_))return e[L_](this);r=Yc(r);let i,s=Jn(this),o=bt(void 0);try{if(!(r&Q.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=XS(e)&&Qc(e);u&&this.injectableDefInScope(u)?c=Mi(Mh(e),Ic):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Q.Self?If():this.parent;return n=r&Q.Optional&&n===Ws?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ac]=a[Ac]||[]).unshift(Xe(e)),s)throw a;return DS(a,e,"R3InjectorError",this.source)}else throw a}finally{bt(o),Jn(s)}}resolveInjectorInitializers(){let e=te(null),n=Jn(this),r=bt(void 0),i;try{let s=this.get(Dr,At,Q.Self);for(let o of s)o()}finally{Jn(n),bt(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Xe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){e=Ze(e);let n=Fi(e)?e:Ze(e&&e.provide),r=YS(e);if(!Fi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Mi(void 0,Ic,!0),i.factory=()=>Ah(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=te(null);try{return n.value===Ic&&(n.value=KS,n.value=n.factory()),typeof n.value=="object"&&n.value&&ZS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Mh(t){let e=Qc(t),n=e!==null?e.factory:ki(t);if(n!==null)return n;if(t instanceof S)throw new R(204,!1);if(t instanceof Function)return QS(t);throw new R(204,!1)}function QS(t){if(t.length>0)throw new R(204,!1);let n=cS(t);return n!==null?()=>n.factory(t):()=>new t}function YS(t){if(Bw(t))return Mi(void 0,t.useValue);{let e=$w(t);return Mi(e,Ic)}}function $w(t,e,n){let r;if(Fi(t)){let i=Ze(t);return ki(i)||Mh(i)}else if(Bw(t))r=()=>Ze(t.useValue);else if(GS(t))r=()=>t.useFactory(...Ah(t.deps||[]));else if(zS(t))r=()=>A(Ze(t.useExisting));else{let i=Ze(t&&(t.useClass||t.provide));if(JS(t))r=()=>new i(...Ah(t.deps));else return ki(i)||Mh(i)}return r}function Mi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function JS(t){return!!t.deps}function ZS(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function XS(t){return typeof t=="function"||typeof t=="object"&&t instanceof S}function xh(t,e){for(let n of t)Array.isArray(n)?xh(n,e):n&&Dw(n)?xh(n.\u0275providers,e):e(n)}function Nn(t,e){t instanceof Qs&&t.assertNotDestroyed();let n,r=Jn(t),i=bt(void 0);try{return e()}finally{Jn(r),bt(i)}}function eR(){return Cw()!==void 0||wS()!=null}function tR(t){return typeof t=="function"}var yt=0,G=1,O=2,Fe=3,Vt=4,Ht=5,Ut=6,Ys=7,jt=8,Li=9,Bt=10,ye=11,Js=12,H_=13,$i=14,Rt=15,Zc=16,xi=17,Vi=18,Xc=19,Hw=20,Zn=21,lh=22,Tr=23,vt=25,qw=1,Zs=6,Sn=7,Mc=8,xc=9,mt=10,Ef=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ef||{});function Xn(t){return Array.isArray(t)&&typeof t[qw]=="object"}function nn(t){return Array.isArray(t)&&t[qw]===!0}function zw(t){return(t.flags&4)!==0}function co(t){return t.componentOffset>-1}function Df(t){return(t.flags&1)===1}function Hi(t){return!!t.template}function Gw(t){return(t[O]&512)!==0}var Nh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Ww(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function qt(){return Kw}function Kw(t){return t.type.prototype.ngOnChanges&&(t.setInput=rR),nR}qt.ngInherit=!0;function nR(){let t=Yw(this),e=t?.current;if(e){let n=t.previous;if(n===Ks)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function rR(t,e,n,r,i){let s=this.declaredInputs[r],o=Yw(t)||iR(t,{previous:Ks,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Nh(u&&u.currentValue,n,c===Ks),Ww(t,e,i,n)}var Qw="__ngSimpleChanges__";function Yw(t){return t[Qw]||null}function iR(t,e){return t[Qw]=e}var q_=null;var Xt=function(t,e,n){q_?.(t,e,n)},sR="svg",oR="math",aR=!1;function cR(){return aR}function $t(t){for(;Array.isArray(t);)t=t[yt];return t}function Jw(t,e){return $t(e[t])}function Mt(t,e){return $t(e[t.index])}function Zw(t,e){return t.data[e]}function Nr(t,e){let n=e[t];return Xn(n)?n:n[yt]}function Cf(t){return(t[O]&128)===128}function uR(t){return nn(t[Fe])}function Nc(t,e){return e==null?null:t[e]}function Xw(t){t[xi]=0}function lR(t){t[O]&1024||(t[O]|=1024,Cf(t)&&Xs(t))}function dR(t,e){for(;t>0;)e=e[$i],t--;return e}function Tf(t){return!!(t[O]&9216||t[Tr]?.dirty)}function Ph(t){t[Bt].changeDetectionScheduler?.notify(1),Tf(t)?Xs(t):t[O]&64&&(cR()?(t[O]|=1024,Xs(t)):t[Bt].changeDetectionScheduler?.notify())}function Xs(t){t[Bt].changeDetectionScheduler?.notify();let e=eo(t);for(;e!==null&&!(e[O]&8192||(e[O]|=8192,!Cf(e)));)e=eo(e)}function eI(t,e){if((t[O]&256)===256)throw new R(911,!1);t[Zn]===null&&(t[Zn]=[]),t[Zn].push(e)}function hR(t,e){if(t[Zn]===null)return;let n=t[Zn].indexOf(e);n!==-1&&t[Zn].splice(n,1)}function eo(t){let e=t[Fe];return nn(e)?e[Fe]:e}var q={lFrame:uI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function fR(){return q.lFrame.elementDepthCount}function pR(){q.lFrame.elementDepthCount++}function gR(){q.lFrame.elementDepthCount--}function tI(){return q.bindingsEnabled}function uo(){return q.skipHydrationRootTNode!==null}function mR(t){return q.skipHydrationRootTNode===t}function yR(t){q.skipHydrationRootTNode=t}function vR(){q.skipHydrationRootTNode=null}function ge(){return q.lFrame.lView}function zt(){return q.lFrame.tView}function Pr(t){return q.lFrame.contextLView=t,t[jt]}function Or(t){return q.lFrame.contextLView=null,t}function Gt(){let t=nI();for(;t!==null&&t.type===64;)t=t.parent;return t}function nI(){return q.lFrame.currentTNode}function _R(){let t=q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function lo(t,e){let n=q.lFrame;n.currentTNode=t,n.isParent=e}function rI(){return q.lFrame.isParent}function wR(){q.lFrame.isParent=!1}function IR(){return q.lFrame.bindingIndex}function ER(t){return q.lFrame.bindingIndex=t}function iI(){return q.lFrame.bindingIndex++}function sI(t){let e=q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function DR(){return q.lFrame.inI18n}function CR(t,e){let n=q.lFrame;n.bindingIndex=n.bindingRootIndex=t,Oh(e)}function TR(){return q.lFrame.currentDirectiveIndex}function Oh(t){q.lFrame.currentDirectiveIndex=t}function bR(t){let e=q.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function oI(t){q.lFrame.currentQueryIndex=t}function AR(t){let e=t[G];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function aI(t,e,n){if(n&Q.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&Q.Host);)if(i=AR(s),i===null||(s=s[$i],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=q.lFrame=cI();return r.currentTNode=e,r.lView=t,!0}function bf(t){let e=cI(),n=t[G];q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function cI(){let t=q.lFrame,e=t===null?null:t.child;return e===null?uI(t):e}function uI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function lI(){let t=q.lFrame;return q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var dI=lI;function Af(){let t=lI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function SR(t){return(q.lFrame.contextLView=dR(t,q.lFrame.contextLView))[jt]}function kr(){return q.lFrame.selectedIndex}function br(t){q.lFrame.selectedIndex=t}function hI(){let t=q.lFrame;return Zw(t.tView,t.selectedIndex)}function fI(){return q.lFrame.currentNamespace}var pI=!0;function Sf(){return pI}function rn(t){pI=t}function RR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Kw(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Rf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Ec(t,e,n){gI(t,e,3,n)}function Dc(t,e,n,r){(t[O]&3)===n&&gI(t,e,n,r)}function dh(t,e){let n=t[O];(n&3)===e&&(n&=16383,n+=1,t[O]=n)}function gI(t,e,n,r){let i=r!==void 0?t[xi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[xi]+=65536),(a<s||s==-1)&&(MR(t,n,e,c),t[xi]=(t[xi]&4294901760)+c+2),c++}function z_(t,e){Xt(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),Xt(5,t,e)}}function MR(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[O]>>14<t[xi]>>16&&(t[O]&3)===e&&(t[O]+=16384,z_(a,s)):z_(a,s)}var Oi=-1,Ar=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function xR(t){return t instanceof Ar}function NR(t){return(t.flags&8)!==0}function PR(t){return(t.flags&16)!==0}function mI(t){return t!==Oi}function Pc(t){return t&32767}function OR(t){return t>>16}function Oc(t,e){let n=OR(t),r=e;for(;n>0;)r=r[$i],n--;return r}var kh=!0;function G_(t){let e=kh;return kh=t,e}var kR=256,yI=kR-1,vI=5,FR=0,en={};function LR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zs)&&(r=n[zs]),r==null&&(r=n[zs]=FR++);let i=r&yI,s=1<<i;e.data[t+(i>>vI)]|=s}function kc(t,e){let n=_I(t,e);if(n!==-1)return n;let r=e[G];r.firstCreatePass&&(t.injectorIndex=e.length,hh(r.data,t),hh(e,null),hh(r.blueprint,null));let i=Mf(t,e),s=t.injectorIndex;if(mI(i)){let o=Pc(i),a=Oc(i,e),c=a[G].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function hh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _I(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Mf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=CI(i),r===null)return Oi;if(n++,i=i[$i],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Oi}function Fh(t,e,n){LR(t,e,n)}function wI(t,e,n){if(n&Q.Optional||t!==void 0)return t;gf(e,"NodeInjector")}function II(t,e,n,r){if(n&Q.Optional&&r===void 0&&(r=null),!(n&(Q.Self|Q.Host))){let i=t[Li],s=bt(void 0);try{return i?i.get(e,r,n&Q.Optional):Tw(e,r,n&Q.Optional)}finally{bt(s)}}return wI(r,e,n)}function EI(t,e,n,r=Q.Default,i){if(t!==null){if(e[O]&2048&&!(r&Q.Self)){let o=$R(t,e,n,r,en);if(o!==en)return o}let s=DI(t,e,n,r,en);if(s!==en)return s}return II(e,n,r,i)}function DI(t,e,n,r,i){let s=jR(n);if(typeof s=="function"){if(!aI(e,t,r))return r&Q.Host?wI(i,n,r):II(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&Q.Optional))gf(n);else return o}finally{dI()}}else if(typeof s=="number"){let o=null,a=_I(t,e),c=Oi,u=r&Q.Host?e[Rt][Ht]:null;for((a===-1||r&Q.SkipSelf)&&(c=a===-1?Mf(t,e):e[a+8],c===Oi||!K_(r,!1)?a=-1:(o=e[G],a=Pc(c),e=Oc(c,e)));a!==-1;){let l=e[G];if(W_(s,a,l.data)){let d=VR(a,e,n,o,r,u);if(d!==en)return d}c=e[a+8],c!==Oi&&K_(r,e[G].data[a+8]===u)&&W_(s,a,e)?(o=l,a=Pc(c),e=Oc(c,e)):a=-1}}return i}function VR(t,e,n,r,i,s){let o=e[G],a=o.data[t+8],c=r==null?co(a)&&kh:r!=o&&(a.type&3)!==0,u=i&Q.Host&&s===a,l=UR(a,o,n,c,u);return l!==null?Ui(e,o,l,a):en}function UR(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let g=o[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=o[c];if(f&&Hi(f)&&f.type===n)return c}return null}function Ui(t,e,n,r){let i=t[n],s=e.data;if(xR(i)){let o=i;o.resolving&&gS(pS(s[n]));let a=G_(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?bt(o.injectImpl):null,l=aI(t,r,Q.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&RR(n,s[n],e)}finally{u!==null&&bt(u),G_(a),o.resolving=!1,dI()}}return i}function jR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(zs)?t[zs]:void 0;return typeof e=="number"?e>=0?e&yI:BR:e}function W_(t,e,n){let r=1<<t;return!!(n[e+(t>>vI)]&r)}function K_(t,e){return!(t&Q.Self)&&!(t&Q.Host&&e)}var Er=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return EI(this._tNode,this._lView,e,Yc(r),n)}};function BR(){return new Er(Gt(),ge())}function eu(t){return oo(()=>{let e=t.prototype.constructor,n=e[bc]||Lh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[bc]||Lh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Lh(t){return _w(t)?()=>{let e=Lh(Ze(t));return e&&e()}:ki(t)}function $R(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[O]&2048&&!(o[O]&512);){let a=DI(s,o,n,r|Q.Self,en);if(a!==en)return a;let c=s.parent;if(!c){let u=o[Hw];if(u){let l=u.get(n,en,r);if(l!==en)return l}c=CI(o),o=o[$i]}s=c}return i}function CI(t){let e=t[G],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function Q_(t,e=null,n=null,r){let i=TI(t,e,n,r);return i.resolveInjectorInitializers(),i}function TI(t,e=null,n=null,r,i=new Set){let s=[n||At,_f(t)];return r=r||(typeof t=="object"?void 0:Xe(t)),new Qs(s,e||If(),r||null,i)}var Wt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Q_({name:""},i,r,"");{let s=r.name??"";return Q_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Ws,e.NULL=new Rc,e.\u0275prov=b({token:e,providedIn:"any",factory:()=>A(Rw)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var HR="ngOriginalError";function fh(t){return t[HR]}var Rn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&fh(e);for(;n&&fh(n);)n=fh(n);return n||null}},bI=new S("",{providedIn:"root",factory:()=>I(Rn).handleError.bind(void 0)}),AI=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Vh=class extends AI{constructor(e){super(),this._lView=e}onDestroy(e){return eI(this._lView,e),()=>hR(this._lView,e)}};function qR(){return new Vh(ge())}function zR(){return tu(Gt(),ge())}function tu(t,e){return new ho(Mt(t,e))}var ho=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=zR;let t=e;return t})();var Uh=class extends st{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,eR()&&(this.destroyRef=I(AI,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=ph(s),i&&(i=ph(i)),o&&(o=ph(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof De&&e.add(a),a}};function ph(t){return e=>{setTimeout(t,void 0,e)}}var St=Uh;var GR="ngSkipHydration",WR="ngskiphydration";function SI(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===WR)return!0}return!1}function RI(t){return t.hasAttribute(GR)}function Fc(t){return(t.flags&128)===128}function KR(t){if(Fc(t))return!0;let e=t.parent;for(;e;){if(Fc(t)||SI(e))return!0;e=e.parent}return!1}var MI=new Map,QR=0;function YR(){return QR++}function JR(t){MI.set(t[Xc],t)}function ZR(t){MI.delete(t[Xc])}var Y_="__ngContext__";function Sr(t,e){Xn(e)?(t[Y_]=e[Xc],JR(e)):t[Y_]=e}function xI(t){return PI(t[Js])}function NI(t){return PI(t[Vt])}function PI(t){for(;t!==null&&!nn(t);)t=t[Vt];return t}var jh;function OI(t){jh=t}function nu(){if(jh!==void 0)return jh;if(typeof document<"u")return document;throw new R(210,!1)}var ru=new S("",{providedIn:"root",factory:()=>XR}),XR="ng",xf=new S(""),$e=new S("",{providedIn:"platform",factory:()=>"unknown"});var Nf=new S("",{providedIn:"root",factory:()=>nu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function eM(){let t=new Fr;return I($e)==="browser"&&(t.store=tM(nu(),I(ru))),t}var Fr=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=b({token:e,providedIn:"root",factory:eM});let t=e;return t})();function tM(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var kI="h",FI="b",Bh=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Bh||{}),nM="e",rM="t",Pf="c",LI="x",Lc="r",iM="i",sM="n",oM="d",aM="__nghData__",VI=aM,gh="ngh",cM="nghm",UI=()=>null;function uM(t,e,n=!1){let r=t.getAttribute(gh);if(r==null)return null;let[i,s]=r.split("|");if(r=n?s:i,!r)return null;let o=s?`|${s}`:"",a=n?i:o,c={};if(r!==""){let l=e.get(Fr,null,{optional:!0});l!==null&&(c=l.get(VI,[])[Number(r)])}let u={data:c,firstChild:t.firstChild??null};return n&&(u.firstChild=t,iu(u,0,t.nextSibling)),a?t.setAttribute(gh,a):t.removeAttribute(gh),u}function lM(){UI=uM}function Of(t,e,n=!1){return UI(t,e,n)}function dM(t){let e=t._lView;return e[G].type===2?null:(Gw(e)&&(e=e[vt]),e)}function hM(t){return t.textContent?.replace(/\s/gm,"")}function fM(t){let e=nu(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=hM(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function iu(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function $h(t,e){return t.segmentHeads?.[e]??null}function pM(t,e){let n=t.data,r=n[nM]?.[e]??null;return r===null&&n[Pf]?.[e]&&(r=kf(t,e)),r}function jI(t,e){return t.data[Pf]?.[e]??null}function kf(t,e){let n=jI(t,e)??[],r=0;for(let i of n)r+=i[Lc]*(i[LI]??1);return r}function su(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[oM];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var yc=new S(""),BI=!1,$I=new S("",{providedIn:"root",factory:()=>BI}),gM=new S("");var Vc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yw})`}};function ou(t){return t instanceof Vc?t.changingThisBreaksApplicationSecurity:t}function HI(t,e){let n=mM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${yw})`)}return n===e}function mM(t){return t instanceof Vc&&t.getTypeName()||null}var yM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qI(t){return t=String(t),t.match(yM)?t:"unsafe:"+t}var Ff=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ff||{});function Lf(t){let e=vM();return e?e.sanitize(Ff.URL,t)||"":HI(t,"URL")?ou(t):qI(Gs(t))}function vM(){let t=ge();return t&&t[Bt].sanitizer}var _M=/^>|^->|<!--|-->|--!>|<!-$/g,wM=/(<|>)/g,IM="\u200B$1\u200B";function EM(t){return t.replace(_M,e=>e.replace(wM,IM))}function DM(t){return t.ownerDocument.body}function zI(t){return t instanceof Function?t():t}function vc(t){return(t??I(Wt)).get($e)==="browser"}var Mn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mn||{}),CM;function Vf(t,e){return CM(t,e)}function Ni(t,e,n,r,i){if(r!=null){let s,o=!1;nn(r)?s=r:Xn(r)&&(o=!0,r=r[yt]);let a=$t(r);t===0&&n!==null?i==null?QI(e,n,a):Uc(e,n,a,i||null,!0):t===1&&n!==null?Uc(e,n,a,i||null,!0):t===2?Hf(e,a,o):t===3&&e.destroyNode(a),s!=null&&BM(e,t,s,n,i)}}function Uf(t,e){return t.createText(e)}function TM(t,e,n){t.setValue(e,n)}function jf(t,e){return t.createComment(EM(e))}function au(t,e,n){return t.createElement(e,n)}function bM(t,e){GI(t,e),e[yt]=null,e[Ht]=null}function AM(t,e,n,r,i,s){r[yt]=i,r[Ht]=e,cu(t,r,n,1,i,s)}function GI(t,e){e[Bt].changeDetectionScheduler?.notify(1),cu(t,e,e[ye],2,null,null)}function SM(t){let e=t[Js];if(!e)return mh(t[G],t);for(;e;){let n=null;if(Xn(e))n=e[Js];else{let r=e[mt];r&&(n=r)}if(!n){for(;e&&!e[Vt]&&e!==t;)Xn(e)&&mh(e[G],e),e=e[Fe];e===null&&(e=t),Xn(e)&&mh(e[G],e),n=e&&e[Vt]}e=n}}function RM(t,e,n,r){let i=mt+r,s=n.length;r>0&&(n[i-1][Vt]=e),r<s-mt?(e[Vt]=n[i],Sw(n,mt+r,e)):(n.push(e),e[Vt]=null),e[Fe]=n;let o=e[Zc];o!==null&&n!==o&&MM(o,e);let a=e[Vi];a!==null&&a.insertView(t),Ph(e),e[O]|=128}function MM(t,e){let n=t[xc],i=e[Fe][Fe][Rt];e[Rt]!==i&&(t[O]|=Ef.HasTransplantedViews),n===null?t[xc]=[e]:n.push(e)}function WI(t,e){let n=t[xc],r=n.indexOf(e);n.splice(r,1)}function Hh(t,e){if(t.length<=mt)return;let n=mt+e,r=t[n];if(r){let i=r[Zc];i!==null&&i!==t&&WI(i,r),e>0&&(t[n-1][Vt]=r[Vt]);let s=Sc(t,mt+e);bM(r[G],r);let o=s[Vi];o!==null&&o.detachView(s[G]),r[Fe]=null,r[Vt]=null,r[O]&=-129}return r}function KI(t,e){if(!(e[O]&256)){let n=e[ye];n.destroyNode&&cu(t,e,n,3,null,null),SM(e)}}function mh(t,e){if(e[O]&256)return;let n=te(null);try{e[O]&=-129,e[O]|=256,e[Tr]&&r_(e[Tr]),NM(t,e),xM(t,e),e[G].type===1&&e[ye].destroy();let r=e[Zc];if(r!==null&&nn(e[Fe])){r!==e[Fe]&&WI(r,e);let i=e[Vi];i!==null&&i.detachView(t)}ZR(e)}finally{te(n)}}function xM(t,e){let n=t.cleanup,r=e[Ys];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ys]=null);let i=e[Zn];if(i!==null){e[Zn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function NM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ar)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Xt(4,a,c);try{c.call(a)}finally{Xt(5,a,c)}}else{Xt(4,i,s);try{s.call(i)}finally{Xt(5,i,s)}}}}}function PM(t,e,n){return OM(t,e.parent,n)}function OM(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[yt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===tn.None||s===tn.Emulated)return null}return Mt(r,n)}}function Uc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function QI(t,e,n){t.appendChild(e,n)}function J_(t,e,n,r,i){r!==null?Uc(t,e,n,r,i):QI(t,e,n)}function kM(t,e,n,r){t.removeChild(e,n,r)}function Bf(t,e){return t.parentNode(e)}function FM(t,e){return t.nextSibling(e)}function LM(t,e,n){return UM(t,e,n)}function VM(t,e,n){return t.type&40?Mt(t,n):null}var UM=VM,Z_;function $f(t,e,n,r){let i=PM(t,r,e),s=e[ye],o=r.parent||e[Ht],a=LM(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)J_(s,i,n[c],a,!1);else J_(s,i,n,a,!1);Z_!==void 0&&Z_(s,r,e,n,i)}function Cc(t,e){if(e!==null){let n=e.type;if(n&3)return Mt(e,t);if(n&4)return qh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Cc(t,r);{let i=t[e.index];return nn(i)?qh(-1,i):$t(i)}}else{if(n&32)return Vf(e,t)()||$t(t[e.index]);{let r=YI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=eo(t[Rt]);return Cc(i,r)}else return Cc(t,e.next)}}}return null}function YI(t,e){if(e!==null){let r=t[Rt][Ht],i=e.projection;return r.projection[i]}return null}function qh(t,e){let n=mt+t+1;if(n<e.length){let r=e[n],i=r[G].firstChild;if(i!==null)return Cc(r,i)}return e[Sn]}function Hf(t,e,n){let r=Bf(t,e);r&&kM(t,r,e,n)}function JI(t){t.textContent=""}function qf(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Sr($t(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)qf(t,e,n.child,r,i,s,!1),Ni(e,t,i,a,s);else if(c&32){let u=Vf(n,r),l;for(;l=u();)Ni(e,t,i,l,s);Ni(e,t,i,a,s)}else c&16?jM(t,e,r,n,i,s):Ni(e,t,i,a,s);n=o?n.projectionNext:n.next}}function cu(t,e,n,r,i,s){qf(n,r,t.firstChild,e,i,s,!1)}function jM(t,e,n,r,i,s){let o=n[Rt],c=o[Ht].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Ni(e,t,i,l,s)}else{let u=c,l=o[Fe];Fc(r)&&(u.flags|=128),qf(t,e,u,l,i,s,!0)}}function BM(t,e,n,r,i){let s=n[Sn],o=$t(n);s!==o&&Ni(e,t,r,s,i);for(let a=mt;a<n.length;a++){let c=n[a];cu(c[G],c,t,e,r,s)}}function $M(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Mn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Mn.Important),t.setStyle(n,r,i,s))}}function HM(t,e,n){t.setAttribute(e,"style",n)}function ZI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function XI(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Sh(t,e,r),i!==null&&ZI(t,e,i),s!==null&&HM(t,e,s)}var Pn={};function ue(t=1){eE(zt(),ge(),kr()+t,!1)}function eE(t,e,n,r){if(!r)if((e[O]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ec(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Dc(e,s,0,n)}br(n)}function Te(t,e=Q.Default){let n=ge();if(n===null)return A(t,e);let r=Gt();return EI(r,n,Ze(t),e)}function tE(t,e,n,r,i,s){let o=te(null);try{let a=null;i&An.SignalBased&&(a=e[r][Xv]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&An.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Ww(e,a,r,s)}finally{te(o)}}function qM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)br(~i);else{let s=i,o=n[++r],a=n[++r];CR(o,s);let c=e[s];a(2,c)}}}finally{br(-1)}}function uu(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[yt]=i,d[O]=r|4|128|8|64,(u!==null||t&&t[O]&2048)&&(d[O]|=2048),Xw(d),d[Fe]=d[$i]=t,d[jt]=n,d[Bt]=o||t&&t[Bt],d[ye]=a||t&&t[ye],d[Li]=c||t&&t[Li]||null,d[Ht]=s,d[Xc]=YR(),d[Ut]=l,d[Hw]=u,d[Rt]=e.type==2?t[Rt]:d,d}function lu(t,e,n,r,i){let s=t.data[e];if(s===null)s=zM(t,e,n,r,i),DR()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=_R();s.injectorIndex=o===null?-1:o.injectorIndex}return lo(s,!0),s}function zM(t,e,n,r,i){let s=nI(),o=rI(),a=o?s:s&&s.parent,c=t.data[e]=JM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function nE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function rE(t,e,n,r,i){let s=kr(),o=r&2;try{br(-1),o&&e.length>vt&&eE(t,e,vt,!1),Xt(o?2:0,i),n(r,i)}finally{br(s),Xt(o?3:1,i)}}function iE(t,e,n){if(zw(e)){let r=te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{te(r)}}}function sE(t,e,n){tI()&&(rx(t,e,n,Mt(n,e)),(n.flags&64)===64&&hE(t,e,n))}function oE(t,e,n=Mt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function aE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=zf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function zf(t,e,n,r,i,s,o,a,c,u,l){let d=vt+r,h=d+i,f=GM(d,h),g=typeof u=="function"?u():u;return f[G]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function GM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Pn);return n}function WM(t,e,n,r){let s=r.get($I,BI)||n===tn.ShadowDom,o=t.selectRootElement(e,s);return KM(o),o}function KM(t){cE(t)}var cE=()=>null;function QM(t){RI(t)?JI(t):fM(t)}function YM(){cE=QM}function JM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return uo()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function X_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=An.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?ew(r,n,u,a,c):ew(r,n,u,a)}return r}function ew(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function ZM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=X_(0,d.inputs,l,c,f),u=X_(1,d.outputs,l,u,g);let _=c!==null&&o!==null&&!vf(e)?hx(c,l,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function XM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function uE(t,e,n,r,i,s,o,a){let c=Mt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Gf(t,n,l,r,i),co(e)&&ex(n,e.index)):e.type&3?(r=XM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function ex(t,e){let n=Nr(e,t);n[O]&16||(n[O]|=64)}function lE(t,e,n,r){if(tI()){let i=r===null?null:{"":-1},s=sx(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&dE(t,e,n,o,i,a),i&&ox(n,r,i)}n.mergedAttrs=yf(n.mergedAttrs,n.attrs)}function dE(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Fh(kc(n,e),t,r[u].type);cx(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=nE(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=yf(n.mergedAttrs,l.hostAttrs),ux(t,n,e,c,l),ax(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}ZM(t,n,s)}function tx(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;nx(o)!=a&&o.push(a),o.push(n,r,s)}}function nx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function rx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;co(n)&&lx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||kc(n,e),Sr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=Ui(e,t,a,n);if(Sr(u,e),o!==null&&dx(e,a-i,u,c,n,o),Hi(c)){let l=Nr(n.index,e);l[jt]=Ui(e,t,a,n)}}}function hE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=TR();try{br(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Oh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ix(c,u)}}finally{br(-1),Oh(o)}}function ix(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function sx(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(kS(e,o.selectors,!1))if(r||(r=[]),Hi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;zh(t,e,c)}else r.unshift(o),zh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function zh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ox(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new R(-301,!1);r.push(e[i],s)}}}function ax(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Hi(e)&&(n[""]=t)}}function cx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ux(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ki(i.type,!0)),o=new Ar(s,Hi(i),Te);t.blueprint[r]=o,n[r]=o,tx(t,e,r,nE(t,n,i.hostVars,Pn),i)}function lx(t,e,n){let r=Mt(e,t),i=aE(n),s=t[Bt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=du(t,uu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function dx(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];tE(r,n,c,u,l,d)}}function hx(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function fE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function pE(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];oI(s),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function du(t,e){return t[Js]?t[H_][Vt]=e:t[Js]=e,t[H_]=e,e}function Gh(t,e,n){oI(0);let r=te(null);try{e(t,n)}finally{te(r)}}function fx(t){return t[Ys]||(t[Ys]=[])}function px(t){return t.cleanup||(t.cleanup=[])}function gE(t,e){let n=t[Li],r=n?n.get(Rn,null):null;r&&r.handleError(e)}function Gf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];tE(l,u,r,a,c,i)}}function mE(t,e,n){let r=Jw(e,t);TM(t[ye],r,n)}function gx(t,e){let n=Nr(e,t),r=n[G];mx(r,n);let i=n[yt];i!==null&&n[Ut]===null&&(n[Ut]=Of(i,n[Li])),Wf(r,n,n[jt])}function mx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Wf(t,e,n){bf(e);try{let r=t.viewQuery;r!==null&&Gh(1,r,n);let i=t.template;i!==null&&rE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Vi]?.finishViewCreation(t),t.staticContentQueries&&pE(t,e),t.staticViewQueries&&Gh(2,t.viewQuery,n);let s=t.components;s!==null&&yx(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[O]&=-5,Af()}}function yx(t,e){for(let n=0;n<e.length;n++)gx(t,e[n])}function vx(t,e,n,r){let i=te(null);try{let s=e.tView,a=t[O]&4096?4096:16,c=uu(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[Zc]=u;let l=t[Vi];return l!==null&&(c[Vi]=l.createEmbeddedView(s)),Wf(s,c,n),c}finally{te(i)}}function tw(t,e){return!e||e.firstChild===null||Fc(t)}function _x(t,e,n,r=!0){let i=e[G];if(RM(i,e,t,n),r){let o=qh(n,t),a=e[ye],c=Bf(a,t[Sn]);c!==null&&AM(i,t[Ht],a,e,c,o)}let s=e[Ut];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function jc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push($t(s)),nn(s)&&wx(s,r);let o=n.type;if(o&8)jc(t,e,n.child,r);else if(o&32){let a=Vf(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=YI(e,n);if(Array.isArray(a))r.push(...a);else{let c=eo(e[Rt]);jc(c[G],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function wx(t,e){for(let n=mt;n<t.length;n++){let r=t[n],i=r[G].firstChild;i!==null&&jc(r[G],r,i,e)}t[Sn]!==t[yt]&&e.push(t[Sn])}var yE=[];function Ix(t){return t[Tr]??Ex(t)}function Ex(t){let e=yE.pop()??Object.create(Cx);return e.lView=t,e}function Dx(t){t.lView[Tr]!==t&&(t.lView=null,yE.push(t))}var Cx=fe(C({},e_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Xs(t.lView)},consumerOnSignalRead(){this.lView[Tr]=this}}),vE=100;function _E(t,e=!0,n=0){let r=t[Bt],i=r.rendererFactory,s=!1;s||i.begin?.();try{Tx(t,n)}catch(o){throw e&&gE(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Tx(t,e){Wh(t,e);let n=0;for(;Tf(t);){if(n===vE)throw new R(103,!1);n++,Wh(t,1)}}function bx(t,e,n,r){let i=e[O];if((i&256)===256)return;let s=!1;!s&&e[Bt].inlineEffectRunner?.flush(),bf(e);let o=null,a=null;!s&&Ax(t)&&(a=Ix(e),o=t_(a));try{Xw(e),ER(t.bindingStartIndex),n!==null&&rE(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Ec(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Dc(e,d,0,null),dh(e,0)}if(Sx(e),wE(e,0),t.contentQueries!==null&&pE(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Ec(e,d)}else{let d=t.contentHooks;d!==null&&Dc(e,d,1),dh(e,1)}qM(t,e);let u=t.components;u!==null&&EE(e,u,0);let l=t.viewQuery;if(l!==null&&Gh(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Ec(e,d)}else{let d=t.viewHooks;d!==null&&Dc(e,d,2),dh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[lh]){for(let d of e[lh])d();e[lh]=null}s||(e[O]&=-73)}catch(c){throw Xs(e),c}finally{a!==null&&(n_(a,o),Dx(a)),Af()}}function Ax(t){return t.type!==2}function wE(t,e){for(let n=xI(t);n!==null;n=NI(n))for(let r=mt;r<n.length;r++){let i=n[r];IE(i,e)}}function Sx(t){for(let e=xI(t);e!==null;e=NI(e)){if(!(e[O]&Ef.HasTransplantedViews))continue;let n=e[xc];for(let r=0;r<n.length;r++){let i=n[r],s=i[Fe];lR(i)}}}function Rx(t,e,n){let r=Nr(e,t);IE(r,n)}function IE(t,e){Cf(t)&&Wh(t,e)}function Wh(t,e){let r=t[G],i=t[O],s=t[Tr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&$d(s)),s&&(s.dirty=!1),t[O]&=-9217,o)bx(r,t,r.template,t[jt]);else if(i&8192){wE(t,1);let a=r.components;a!==null&&EE(t,a,1)}}function EE(t,e,n){for(let r=0;r<e.length;r++)Rx(t,e[r],n)}function Kf(t){for(t[Bt].changeDetectionScheduler?.notify();t;){t[O]|=64;let e=eo(t);if(Gw(t)&&!e)return t;t=e}return null}var Rr=class{get rootNodes(){let e=this._lView,n=e[G];return jc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return(this._lView[O]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if(nn(e)){let n=e[Mc],r=n?n.indexOf(this):-1;r>-1&&(Hh(e,r),Sc(n,r))}this._attachedToViewContainer=!1}KI(this._lView[G],this._lView)}onDestroy(e){eI(this._lView,e)}markForCheck(){Kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[O]&=-129}reattach(){Ph(this._lView),this._lView[O]|=128}detectChanges(){this._lView[O]|=1024,_E(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,GI(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e,Ph(this._lView)}},hu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Nx;let t=e;return t})(),Mx=hu,xx=class extends Mx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=vx(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Rr(i)}};function Nx(){return Px(Gt(),ge())}function Px(t,e){return t.type&4?new xx(e,t,tu(t,e)):null}function DE(t){let e=t[Zs]??[],r=t[Fe][ye];for(let i of e)Ox(i,r);t[Zs]=At}function Ox(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Lc];for(;n<i;){let s=r.nextSibling;Hf(e,r,!1),r=s,n++}}}function CE(t){DE(t);for(let e=mt;e<t.length;e++)Bc(t[e])}function kx(t){let e=t[Ut]?.i18nNodes;if(e){let n=t[ye];for(let r of e.values())Hf(n,r,!1);t[Ut].i18nNodes=void 0}}function Bc(t){kx(t);let e=t[G];for(let n=vt;n<e.bindingStartIndex;n++)if(nn(t[n])){let r=t[n];CE(r)}else Xn(t[n])&&Bc(t[n])}function Fx(t){let e=t._views;for(let n of e){let r=dM(n);if(r!==null&&r[yt]!==null)if(Xn(r))Bc(r);else{let i=r[yt];Bc(i),CE(r)}}}var Lx=new RegExp(`^(\\d+)*(${FI}|${kI})*(.*)`);function Vx(t){let e=t.match(Lx),[n,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,u,l]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(l,10)||1;a.push(u,d)}return[o,...a]}function Ux(t){return!t.prev&&t.parent?.type===8}function yh(t){return t.index-vt}function jx(t,e){let n=t.i18nNodes;if(n){let r=n.get(e);return r&&n.delete(e),r}return null}function fu(t,e,n,r){let i=yh(r),s=jx(t,i);if(!s){let o=t.data[sM];if(o?.[i])s=$x(o[i],n);else if(e.firstChild===r)s=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(Ux(r)){let u=yh(r.parent);s=$h(t,u)}else{let u=Mt(c,n);if(a)s=u.firstChild;else{let l=yh(c),d=$h(t,l);if(c.type===2&&d){let f=kf(t,l)+1;s=pu(f,d)}else s=u.nextSibling}}}}return s}function pu(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function Bx(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case Bh.FirstChild:n=n.firstChild;break;case Bh.NextSibling:n=n.nextSibling;break}}return n}function $x(t,e){let[n,...r]=Vx(t),i;if(n===kI)i=e[Rt][yt];else if(n===FI)i=DM(e[Rt][yt]);else{let s=Number(n);i=$t(e[s+vt])}return Bx(i,r)}function Hx(t,e){let n=[];for(let r of e)for(let i=0;i<(r[LI]??1);i++){let s={data:r,firstChild:null};r[Lc]>0&&(s.firstChild=t,t=pu(r[Lc],t)),n.push(s)}return[t,n]}var TE=()=>null;function qx(t,e){let n=t[Zs];return!e||n===null||n.length===0?null:n[0].data[iM]===e?n.shift():(DE(t),null)}function zx(){TE=qx}function nw(t,e){return TE(t,e)}var Kh=class{},Qh=class{},$c=class{};function Gx(t){let e=Error(`No component factory found for ${Xe(t)}.`);return e[Wx]=t,e}var Wx="ngComponent";var Yh=class{resolveComponentFactory(e){throw Gx(e)}},gu=(()=>{let e=class e{};e.NULL=new Yh;let t=e;return t})(),to=class{};var Kx=(()=>{let e=class e{};e.\u0275prov=b({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),vh={};var rw=new Set;function fo(t){rw.has(t)||(rw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function iw(...t){}function Qx(){let t=typeof qs.requestAnimationFrame=="function",e=qs[t?"requestAnimationFrame":"setTimeout"],n=qs[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ie=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Qx().nativeRequestAnimationFrame,Zx(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Yx,iw,iw);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Yx={};function Qf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Jx(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(qs,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Jh(t),t.isCheckStableRunning=!0,Qf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Jh(t))}function Zx(t){let e=()=>{Jx(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(Xx(a))return n.invokeTask(i,s,o,a);try{return sw(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ow(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return sw(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),ow(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Jh(t),Qf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Jh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ow(t){t._nesting--,Qf(t)}function Xx(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var bE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=b({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Zh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=P_(i,a);else if(s==2){let c=a,u=e[++o];r=P_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Hc=class extends gu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Cr(e);return new no(n,this.ngModule)}};function aw(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function eN(t){let e=t.toLowerCase();return e==="svg"?sR:e==="math"?oR:null}var Xh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Yc(r);let i=this.injector.get(e,vh,r);return i!==vh||n===vh?i:this.parentInjector.get(e,n,r)}},no=class extends $c{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=aw(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return aw(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=US(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=te(null);try{i=i||this.ngModule;let o=i instanceof ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Xh(e,o):e,c=a.get(to,null);if(c===null)throw new R(407,!1);let u=a.get(Kx,null),l=a.get(bE,null),d=a.get(Kh,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=r?WM(f,r,this.componentDef.encapsulation,a):au(f,g,eN(g)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let w=null;_!==null&&(w=Of(_,a,!0));let F=zf(0,null,null,1,0,null,null,null,null,null,null),H=uu(null,F,null,m,null,null,h,f,a,null,w);bf(H);let j,Ee;try{let ee=this.componentDef,Me,Zt=null;ee.findHostDirectiveDefs?(Me=[],Zt=new Map,ee.findHostDirectiveDefs(ee,Me,Zt),Me.push(ee)):Me=[ee];let yr=tN(H,_),mi=nN(yr,_,ee,Me,H,h,f);Ee=Zw(F,vt),_&&sN(f,ee,_,r),n!==void 0&&oN(Ee,this.ngContentSelectors,n),j=iN(mi,ee,Me,Zt,H,[aN]),Wf(F,H,null)}finally{Af()}return new ef(this.componentType,j,tu(Ee,H),H,Ee)}finally{te(s)}}},ef=class extends Qh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Rr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Gf(s[G],s,i,e,n),this.previousInputValues.set(e,n);let o=Nr(this._tNode.index,s);Kf(o)}}get injector(){return new Er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tN(t,e){let n=t[G],r=vt;return t[r]=e,lu(n,r,2,"#host",null)}function nN(t,e,n,r,i,s,o){let a=i[G];rN(r,t,e,o);let c=null;e!==null&&(c=Of(e,i[Li]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=uu(i,aE(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&zh(a,t,r.length-1),du(i,d),i[t.index]=d}function rN(t,e,n,r){for(let i of t)e.mergedAttrs=yf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Zh(e,e.mergedAttrs,!0),n!==null&&XI(r,n,e))}function iN(t,e,n,r,i,s){let o=Gt(),a=i[G],c=Mt(o,i);dE(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=Ui(i,a,d,o);Sr(h,i)}hE(a,i,o),c&&Sr(c,i);let u=Ui(i,a,o.directiveStart+o.componentOffset,o);if(t[jt]=i[jt]=u,s!==null)for(let l of s)l(u,e);return iE(a,o,i),u}function sN(t,e,n,r){if(r)Sh(t,n,["ng-version","17.3.1"]);else{let{attrs:i,classes:s}=jS(e.selectors[0]);i&&Sh(t,n,i),s&&s.length>0&&ZI(t,n,s.join(" "))}}function oN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function aN(){let t=Gt();Rf(ge()[G],t)}var qi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cN;let t=e;return t})();function cN(){let t=Gt();return lN(t,ge())}var uN=qi,AE=class extends uN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return tu(this._hostTNode,this._hostLView)}get injector(){return new Er(this._hostTNode,this._hostLView)}get parentInjector(){let e=Mf(this._hostTNode,this._hostLView);if(mI(e)){let n=Oc(e,this._hostLView),r=Pc(e),i=n[G].data[r+8];return new Er(i,n)}else return new Er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=cw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-mt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=nw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,tw(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!tR(e),a;if(o)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new no(Cr(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?u:this.parentInjector).get(ct,null);_&&(s=_)}let l=Cr(c.componentType??{}),d=nw(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,tw(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(uR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Fe],u=new AE(c,c[Ht],c[Fe]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return _x(o,i,s,r),e.attachToViewContainerRef(),Sw(_h(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=cw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Hh(this._lContainer,n);r&&(Sc(_h(this._lContainer),n),KI(r[G],r))}detach(e){let n=this._adjustIndex(e,-1),r=Hh(this._lContainer,n);return r&&Sc(_h(this._lContainer),n)!=null?new Rr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function cw(t){return t[Mc]}function _h(t){return t[Mc]||(t[Mc]=[])}function lN(t,e){let n,r=e[t.index];return nn(r)?n=r:(n=fE(r,e,null,t),e[t.index]=n,du(e,n)),SE(n,e,t,r),new AE(n,t,e)}function dN(t,e){let n=t[ye],r=n.createComment(""),i=Mt(e,t),s=Bf(n,i);return Uc(n,s,r,FM(n,i),!1),r}var SE=RE,Yf=()=>!1;function hN(t,e,n){return Yf(t,e,n)}function RE(t,e,n,r){if(t[Sn])return;let i;n.type&8?i=$t(r):i=dN(e,n),t[Sn]=i}function fN(t,e,n){if(t[Sn]&&t[Zs])return!0;let r=n[Ut],i=e.index-vt;if(!r||KR(e)||su(r,i))return!1;let o=$h(r,i),a=r.data[Pf]?.[i],[c,u]=Hx(o,a);return t[Sn]=c,t[Zs]=u,!0}function pN(t,e,n,r){Yf(t,n,e)||RE(t,e,n,r)}function gN(){SE=pN,Yf=fN}var er=class{},ro=class{};var tf=class extends er{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hc(this);let i=Fw(e);this._bootstrapComponents=zI(i.bootstrap),this._r3Injector=TI(e,n,[{provide:er,useValue:this},{provide:gu,useValue:this.componentFactoryResolver},...r],Xe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},nf=class extends ro{constructor(e){super(),this.moduleType=e}create(e){return new tf(this.moduleType,e,[])}};var qc=class extends er{constructor(e){super(),this.componentFactoryResolver=new Hc(this),this.instance=null;let n=new Qs([...e.providers,{provide:er,useValue:this},{provide:gu,useValue:this.componentFactoryResolver}],e.parent||If(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Jf(t,e,n=null){return new qc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Lr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ME(t){return yN(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function mN(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function yN(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function io(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function vN(t,e,n,r){let i=io(t,e,n);return io(t,e+1,r)||i}function po(t){return(t.flags&32)===32}function _N(t,e,n,r,i,s,o,a,c){let u=e.consts,l=lu(e,t,4,o||null,Nc(u,a));lE(e,n,l,Nc(u,c)),Rf(e,l);let d=l.tView=zf(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function sn(t,e,n,r,i,s,o,a){let c=ge(),u=zt(),l=t+vt,d=u.firstCreatePass?_N(l,u,c,e,n,r,i,s,o):u.data[l];lo(d,!1);let h=xE(u,c,d,t);Sf()&&$f(u,c,h,d),Sr(h,c);let f=fE(h,c,h,d);return c[l]=f,du(c,f),hN(f,d,c),Df(d)&&sE(u,c,d),o!=null&&oE(c,d,a),sn}var xE=NE;function NE(t,e,n,r){return rn(!0),e[ye].createComment("")}function wN(t,e,n,r){let i=e[Ut],s=!i||uo()||po(n)||su(i,r);if(rn(s),s)return NE(t,e,n,r);let o=i.data[rM]?.[r]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=fu(i,t,e,n);iu(i,r,a);let c=kf(i,r);return pu(c,a)}function IN(){xE=wN}function PE(t,e,n,r){return io(t,iI(),n)?e+Gs(n)+r:Pn}function EN(t,e,n,r,i,s){let o=IR(),a=vN(t,o,n,i);return sI(2),a?e+Gs(n)+r+Gs(i)+s:Pn}function _c(t,e){return t<<17|e<<2}function Mr(t){return t>>17&32767}function DN(t){return(t&2)==2}function CN(t,e){return t&131071|e<<17}function rf(t){return t|2}function ji(t){return(t&131068)>>2}function wh(t,e){return t&-131069|e<<2}function TN(t){return(t&1)===1}function sf(t){return t|1}function bN(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Mr(o),c=ji(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||ao(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=Mr(t[a+1]);t[r+1]=_c(h,a),h!==0&&(t[h+1]=wh(t[h+1],r)),t[a+1]=CN(t[a+1],r)}else t[r+1]=_c(a,0),a!==0&&(t[a+1]=wh(t[a+1],r)),a=r;else t[r+1]=_c(c,0),a===0?a=r:t[c+1]=wh(t[c+1],r),c=r;u&&(t[r+1]=rf(t[r+1])),uw(t,l,r,!0),uw(t,l,r,!1),AN(e,l,t,r,s),o=_c(a,c),s?e.classBindings=o:e.styleBindings=o}function AN(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ao(s,e)>=0&&(n[r+1]=sf(n[r+1]))}function uw(t,e,n,r){let i=t[n+1],s=e===null,o=r?Mr(i):ji(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],u=t[o+1];SN(c,e)&&(a=!0,t[o+1]=r?sf(u):rf(u)),o=r?Mr(u):ji(u)}a&&(t[n+1]=r?rf(i):sf(i))}function SN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ao(t,e)>=0:!1}function He(t,e,n){let r=ge(),i=iI();if(io(r,i,e)){let s=zt(),o=hI();uE(s,o,r,t,e,r[ye],n,!1)}return He}function lw(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Gf(t,n,s[o],o,r)}function zi(t,e){return RN(t,e,null,!0),zi}function RN(t,e,n,r){let i=ge(),s=zt(),o=sI(2);if(s.firstUpdatePass&&xN(s,t,o,r),e!==Pn&&io(i,o,e)){let a=s.data[kr()];FN(s,a,i,i[ye],t,i[o+1]=LN(e,n),r,o)}}function MN(t,e){return e>=t.expandoStartIndex}function xN(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[kr()],o=MN(t,n);VN(s,r)&&e===null&&!o&&(e=!1),e=NN(i,s,e,r),bN(i,s,e,n,o,r)}}function NN(t,e,n,r){let i=bR(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Ih(null,t,e,n,r),n=so(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Ih(i,t,e,n,r),s===null){let c=PN(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Ih(null,t,e,c[1],r),c=so(c,e.attrs,r),ON(t,e,r,c))}else s=kN(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function PN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ji(r)!==0)return t[Mr(r)]}function ON(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Mr(i)]=r}function kN(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=so(r,o,n)}return so(r,e.attrs,n)}function Ih(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=so(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function so(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),bS(t,o,n?!0:e[++s]))}return t===void 0?null:t}function FN(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=TN(u)?dw(c,e,n,i,ji(u),o):void 0;if(!zc(l)){zc(s)||DN(u)&&(s=dw(c,null,n,i,a,o));let d=Jw(kr(),n);$M(r,o,d,i,s)}}function dw(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Pn&&(h=d?At:void 0);let f=d?ch(h,r):l===r?h:void 0;if(u&&!zc(f)&&(f=ch(c,r)),zc(f)&&(a=f,o))return a;let g=t[i+1];i=o?Mr(g):ji(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ch(c,r))}return a}function zc(t){return t!==void 0}function LN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Xe(ou(t)))),t}function VN(t,e){return(t.flags&(e?8:16))!==0}function UN(t,e,n,r,i,s){let o=e.consts,a=Nc(o,i),c=lu(e,t,2,r,a);return lE(e,n,c,Nc(o,s)),c.attrs!==null&&Zh(c,c.attrs,!1),c.mergedAttrs!==null&&Zh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function $(t,e,n,r){let i=ge(),s=zt(),o=vt+t,a=i[ye],c=s.firstCreatePass?UN(o,s,i,e,n,r):s.data[o],u=OE(s,i,c,a,e,t);i[o]=u;let l=Df(c);return lo(c,!0),XI(a,u,c),!po(c)&&Sf()&&$f(s,i,u,c),fR()===0&&Sr(u,i),pR(),l&&(sE(s,i,c),iE(s,c,i)),r!==null&&oE(i,c),$}function z(){let t=Gt();rI()?wR():(t=t.parent,lo(t,!1));let e=t;mR(e)&&vR(),gR();let n=zt();return n.firstCreatePass&&(Rf(n,t),zw(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&NR(e)&&lw(n,e,ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&PR(e)&&lw(n,e,ge(),e.stylesWithoutHost,!1),z}function ne(t,e,n,r){return $(t,e,n,r),z(),ne}var OE=(t,e,n,r,i,s)=>(rn(!0),au(r,i,fI()));function jN(t,e,n,r,i,s){let o=e[Ut],a=!o||uo()||po(n)||su(o,s);if(rn(a),a)return au(r,i,fI());let c=fu(o,t,e,n);return jI(o,s)&&iu(o,s,c.nextSibling),o&&(SI(n)||RI(c))&&co(n)&&(yR(n),JI(c)),c}function BN(){OE=jN}var $N=(t,e,n,r)=>(rn(!0),jf(e[ye],""));function HN(t,e,n,r){let i,s=e[Ut],o=!s||uo()||po(n);if(rn(o),o)return jf(e[ye],"");let a=fu(s,t,e,n),c=pM(s,r);return iu(s,r,a),i=pu(c,a),i}function qN(){$N=HN}function go(){return ge()}var Gc="en-US";var zN=Gc;function GN(t){typeof t=="string"&&(zN=t.toLowerCase().replace(/_/g,"-"))}function kE(t,e,n){let r=t[ye];switch(n){case Node.COMMENT_NODE:return jf(r,e);case Node.TEXT_NODE:return Uf(r,e);case Node.ELEMENT_NODE:return au(r,e,null)}}var WN=(t,e,n,r)=>(rn(!0),kE(t,n,r));function KN(t,e,n,r){return rn(!0),kE(t,n,r)}function QN(){WN=KN}function qe(t,e,n,r){let i=ge(),s=zt(),o=Gt();return JN(s,i,i[ye],o,t,e,r),qe}function YN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ys],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function JN(t,e,n,r,i,s,o){let a=Df(r),u=t.firstCreatePass&&px(t),l=e[jt],d=fx(e),h=!0;if(r.type&3||o){let _=Mt(r,e),m=o?o(_):_,w=d.length,F=o?j=>o($t(j[r.index])):r.index,H=null;if(!o&&a&&(H=YN(t,e,i,r.index)),H!==null){let j=H.__ngLastListenerFn__||H;j.__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,h=!1}else{s=fw(r,e,l,s,!1);let j=n.listen(m,i,s);d.push(s,j),u&&u.push(i,F,w,w+1)}}else s=fw(r,e,l,s,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let _=g.length;if(_)for(let m=0;m<_;m+=2){let w=g[m],F=g[m+1],Ee=e[w][F].subscribe(s),ee=d.length;d.push(s,Ee),u&&u.push(i,r.index,ee,-(ee+1))}}}function hw(t,e,n,r){let i=te(null);try{return Xt(6,e,n),n(r)!==!1}catch(s){return gE(t,s),!1}finally{Xt(7,e,n),te(i)}}function fw(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Nr(t.index,e):e;Kf(a);let c=hw(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=hw(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function lt(t=1){return SR(t)}function mu(t,e,n){return FE(t,"",e,"",n),mu}function FE(t,e,n,r,i){let s=ge(),o=PE(s,e,n,r);if(o!==Pn){let a=zt(),c=hI();uE(a,c,s,t,o,s[ye],i,!1)}return FE}function pe(t,e=""){let n=ge(),r=zt(),i=t+vt,s=r.firstCreatePass?lu(r,i,1,e,null):r.data[i],o=LE(r,n,s,e,t);n[i]=o,Sf()&&$f(r,n,o,s),lo(s,!1)}var LE=(t,e,n,r,i)=>(rn(!0),Uf(e[ye],r));function ZN(t,e,n,r,i){let s=e[Ut],o=!s||uo()||po(n)||su(s,i);return rn(o),o?Uf(e[ye],r):fu(s,t,e,n)}function XN(){LE=ZN}function tr(t){return on("",t,""),tr}function on(t,e,n){let r=ge(),i=PE(r,t,e,n);return i!==Pn&&mE(r,kr(),i),on}function Zf(t,e,n,r,i){let s=ge(),o=EN(s,t,e,n,r,i);return o!==Pn&&mE(s,kr(),o),Zf}function eP(t,e,n){let r=zt();if(r.firstCreatePass){let i=Hi(t);of(n,r.data,r.blueprint,i,!0),of(e,r.data,r.blueprint,i,!1)}}function of(t,e,n,r,i){if(t=Ze(t),Array.isArray(t))for(let s=0;s<t.length;s++)of(t[s],e,n,r,i);else{let s=zt(),o=ge(),a=Gt(),c=Fi(t)?t:Ze(t.provide),u=$w(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Fi(t)||!t.multi){let f=new Ar(u,i,Te),g=Dh(c,e,i?l:l+h,d);g===-1?(Fh(kc(a,o),s,c),Eh(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[g]=f,o[g]=f)}else{let f=Dh(c,e,l+h,d),g=Dh(c,e,l,l+h),_=f>=0&&n[f],m=g>=0&&n[g];if(i&&!m||!i&&!_){Fh(kc(a,o),s,c);let w=rP(i?nP:tP,n.length,i,r,u);!i&&m&&(n[g].providerFactory=w),Eh(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),o.push(w)}else{let w=VE(n[i?g:f],u,!i&&r);Eh(s,t,f>-1?f:g,w)}!i&&r&&m&&n[g].componentProviders++}}}function Eh(t,e,n,r){let i=Fi(e),s=WS(e);if(i||s){let c=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function VE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Dh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tP(t,e,n,r){return af(this.multi,[])}function nP(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ui(n,n[G],this.providerFactory.index,r);s=a.slice(0,o),af(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],af(i,s);return s}function af(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function rP(t,e,n,r,i){let s=new Ar(t,n,Te);return s.multi=[],s.index=e,s.componentProviders=0,VE(s,i,r&&!n),s}function On(t,e=[]){return n=>{n.providersResolver=(r,i)=>eP(r,i?i(t):t,e)}}var iP=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Uw(!1,r.type),s=i.length>0?Jf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=b({token:e,providedIn:"environment",factory:()=>new e(A(ct))});let t=e;return t})();function dt(t){fo("NgStandalone"),t.getStandaloneInjector=e=>e.get(iP).getOrCreateStandaloneInjector(t)}var xn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},yu=new xn("17.3.1"),vu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var UE=new S("");function Gi(t){return!!t&&typeof t.then=="function"}function jE(t){return!!t&&typeof t.subscribe=="function"}var BE=new S(""),$E=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=I(BE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Gi(o))r.push(o);else if(jE(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mo=new S("");function sP(){i_(()=>{throw new R(600,!1)})}function oP(t){return t.isBoundToModule}function aP(t,e,n){try{let r=n();return Gi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Vr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(bI),this.afterRenderEffectManager=I(bE),this.externalTestViews=new Set,this.beforeRender=new st,this.afterTick=new st,this.componentTypes=[],this.components=[],this.isStable=I(Lr).hasPendingTasks.pipe(P(r=>!r)),this._injector=I(ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof $c;if(!this._injector.get($E).done){let f=!s&&kw(r),g=!1;throw new R(405,g)}let a;s?a=r:a=this._injector.get(gu).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=oP(a)?void 0:this._injector.get(er),u=i||a.selector,l=a.create(Wt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(UE,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ch(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new R(101,!1);let i=te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,te(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===vE)throw new R(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)cP(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>cf(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>cf(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ch(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(mo,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ch(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new R(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ch(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var wc;function Xf(t){wc??=new WeakMap;let e=wc.get(t);if(e)return e;let n=t.isStable.pipe(Ft(r=>r)).toPromise().then(()=>{});return wc.set(t,n),t.onDestroy(()=>wc?.delete(t)),n}function cP(t,e,n){!e&&!cf(t)||uP(t,n,e)}function cf(t){return Tf(t)}function uP(t,e,n){let r;n?(r=0,t[O]|=1024):t[O]&64?r=0:r=1,_E(t,e,r)}var uf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ep=(()=>{let e=class e{compileModuleSync(r){return new nf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Fw(r),o=zI(s.declarations).reduce((a,c)=>{let u=Cr(c);return u&&a.push(new no(u)),a},[]);return new uf(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var lP=(()=>{let e=class e{constructor(){this.zone=I(ie),this.applicationRef=I(Vr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dP(t){return[{provide:ie,useFactory:t},{provide:Dr,multi:!0,useFactory:()=>{let e=I(lP,{optional:!0});return()=>e.initialize()}},{provide:Dr,multi:!0,useFactory:()=>{let e=I(gP);return()=>{e.initialize()}}},{provide:bI,useFactory:hP}]}function hP(){let t=I(ie),e=I(Rn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function fP(t){let e=dP(()=>new ie(pP(t)));return xr([[],e])}function pP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var gP=(()=>{let e=class e{constructor(){this.subscription=new De,this.initialized=!1,this.zone=I(ie),this.pendingTasks=I(Lr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mP(){return typeof $localize<"u"&&$localize.locale||Gc}var tp=new S("",{providedIn:"root",factory:()=>I(tp,Q.Optional|Q.SkipSelf)||mP()});var HE=new S("");var Tc=null;function yP(t=[],e){return Wt.create({name:e,providers:[{provide:Jc,useValue:"platform"},{provide:HE,useValue:new Set([()=>Tc=null])},...t]})}function vP(t=[]){if(Tc)return Tc;let e=yP(t);return Tc=e,sP(),_P(e),e}function _P(t){t.get(xf,null)?.forEach(n=>n())}function qE(){return!1}var Wi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wP;let t=e;return t})();function wP(t){return IP(Gt(),ge(),(t&16)===16)}function IP(t,e,n){if(co(t)&&!n){let r=Nr(t.index,e);return new Rr(r,r)}else if(t.type&47){let r=e[Rt];return new Rr(r,e)}return null}var lf=class{constructor(){}supports(e){return ME(e)}create(e){return new df(e)}},EP=(t,e)=>e,df=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||EP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<pw(r,i,s)?n:r,a=pw(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;l<=g&&g<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!ME(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,mN(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new hf(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},hf=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ff=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Wc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new ff,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pw(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function gw(){return new np([new lf])}var np=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||gw()),deps:[[e,new Aw,new _t]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new R(901,!1)}};e.\u0275prov=b({token:e,providedIn:"root",factory:gw});let t=e;return t})();function zE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=vP(r),s=[fP(),...n||[]],a=new qc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ie);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Rn,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(HE);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),aP(u,c,()=>{let f=a.get($E);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(tp,Gc);GN(g||Gc);let _=a.get(Vr);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}var mw=!1,DP=!1;function CP(){mw||(mw=!0,lM(),BN(),XN(),qN(),IN(),gN(),zx(),YM(),QN())}function TP(t,e){return Xf(t)}function GE(){return xr([{provide:yc,useFactory:()=>{let t=!0;return vc()&&(t=!!I(Fr,{optional:!0})?.get(VI,null)),t&&fo("NgHydration"),t}},{provide:Dr,useValue:()=>{DP=!!I(gM,{optional:!0}),vc()&&I(yc)&&(bP(),CP())},multi:!0},{provide:$I,useFactory:()=>vc()&&I(yc)},{provide:mo,useFactory:()=>{if(vc()&&I(yc)){let t=I(Vr),e=I(Wt);return()=>{TP(t,e).then(()=>{ie.assertInAngularZone(),Fx(t)})}}return()=>{}},multi:!0}])}function bP(){let t=nu(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===cM){e=n;break}if(!e)throw new R(-507,!1)}var ZE=null;function Ki(){return ZE}function XE(t){ZE??=t}var _u=class{};var ze=new S(""),eD=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>I(RP),providedIn:"platform"});let t=e;return t})();var RP=(()=>{let e=class e extends eD{constructor(){super(),this._doc=I(ze),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ki().getBaseHref(this._doc)}onPopState(r){let i=Ki().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ki().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function tD(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function WE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ur(t){return t&&t[0]!=="?"?"?"+t:t}var wu=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>I(nD),providedIn:"root"});let t=e;return t})(),MP=new S(""),nD=(()=>{let e=class e extends wu{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??I(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return tD(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ur(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ur(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(A(eD),A(MP,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var yo=(()=>{let e=class e{constructor(r){this._subject=new St,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=PP(WE(KE(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ur(i))}normalize(r){return e.stripTrailingSlash(NP(this._basePath,KE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ur(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ur(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Ur,e.joinWithSlash=tD,e.stripTrailingSlash=WE,e.\u0275fac=function(i){return new(i||e)(A(wu))},e.\u0275prov=b({token:e,factory:()=>xP(),providedIn:"root"});let t=e;return t})();function xP(){return new yo(A(wu))}function NP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function KE(t){return t.replace(/\/index.html$/,"")}function PP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Iu(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var rp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Eu=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new rp(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),QE(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);QE(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Te(qi),Te(hu),Te(np))},e.\u0275dir=Bi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function QE(t,e){t.context.$implicit=e.item}var Yi=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new ip,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){YE("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){YE("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Te(qi),Te(hu))},e.\u0275dir=Bi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),ip=class{constructor(){this.$implicit=null,this.ngIf=null}};function YE(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Xe(e)}'.`)}var kn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({});let t=e;return t})(),op="browser",OP="server";function rD(t){return t===op}function ap(t){return t===OP}var Qi=class{};var _o=class{},bu=class{},rr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var up=class{encodeKey(e){return iD(e)}encodeValue(e){return iD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function FP(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var LP=/%(\d[a-f0-9])/gi,VP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iD(t){return encodeURIComponent(t).replace(LP,(e,n)=>VP[n]??e)}function Cu(t){return`${t}`}var nr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new up,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=FP(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Cu):[Cu(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Cu(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Cu(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var lp=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function UP(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function sD(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function oD(t){return typeof Blob<"u"&&t instanceof Blob}function aD(t){return typeof FormData<"u"&&t instanceof FormData}function jP(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var vo=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(UP(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new rr,this.context??=new lp,!this.params)this.params=new nr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:sD(this.body)||oD(this.body)||aD(this.body)||jP(this.body)||typeof this.body=="string"?this.body:this.body instanceof nr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||aD(this.body)?null:oD(this.body)?this.body.type||null:sD(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof nr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),u)),new t(n,r,s,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:o})}},Ji=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ji||{}),wo=class{constructor(e,n=Su.Ok,r="OK"){this.headers=e.headers||new rr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},dp=class t extends wo{constructor(e={}){super(e),this.type=Ji.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zi=class t extends wo{constructor(e={}){super(e),this.type=Ji.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Au=class extends wo{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Su=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Su||{});function cp(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var hp=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof vo)o=r;else{let u;s.headers instanceof rr?u=s.headers:u=new rr(s.headers);let l;s.params&&(s.params instanceof nr?l=s.params:l=new nr({fromObject:s.params})),o=new vo(r,i,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=N(o).pipe(Kn(u=>this.handler.handle(u)));if(r instanceof vo||s.observe==="events")return a;let c=a.pipe(at(u=>u instanceof Zi));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(P(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(P(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(P(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(P(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new nr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,cp(s,i))}post(r,i,s={}){return this.request("POST",r,cp(s,i))}put(r,i,s={}){return this.request("PUT",r,cp(s,i))}};e.\u0275fac=function(i){return new(i||e)(A(_o))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})();function yD(t,e){return e(t)}function BP(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function $P(t,e,n){return(r,i)=>Nn(n,()=>e(r,s=>t(s,i)))}var HP=new S(""),fp=new S(""),vD=new S(""),qP=new S("");function zP(){let t=null;return(e,n)=>{t===null&&(t=(I(HP,{optional:!0})??[]).reduceRight(BP,yD));let r=I(Lr),i=r.add();return t(e,n).pipe(Yn(()=>r.remove(i)))}}var cD=(()=>{let e=class e extends _o{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=I(Lr);let s=I(qP,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(fp),...this.injector.get(vD,[])]));this.chain=s.reduceRight((o,a)=>$P(o,a,this.injector),yD)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Yn(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(A(bu),A(ct))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})();var GP=/^\)\]\}',?\n/;function WP(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var uD=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new R(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?de(i.\u0275loadImpl()):N(null)).pipe(gt(()=>new K(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,w)=>a.setRequestHeader(m,w.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let m=a.statusText||"OK",w=new rr(a.getAllResponseHeaders()),F=WP(a)||r.url;return u=new dp({headers:w,status:a.status,statusText:m,url:F}),u},d=()=>{let{headers:m,status:w,statusText:F,url:H}=l(),j=null;w!==Su.NoContent&&(j=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=j?Su.Ok:0);let Ee=w>=200&&w<300;if(r.responseType==="json"&&typeof j=="string"){let ee=j;j=j.replace(GP,"");try{j=j!==""?JSON.parse(j):null}catch(Me){j=ee,Ee&&(Ee=!1,j={error:Me,text:j})}}Ee?(o.next(new Zi({body:j,headers:m,status:w,statusText:F,url:H||void 0})),o.complete()):o.error(new Au({error:j,headers:m,status:w,statusText:F,url:H||void 0}))},h=m=>{let{url:w}=l(),F=new Au({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});o.error(F)},f=!1,g=m=>{f||(o.next(l()),f=!0);let w={type:Ji.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(w.total=m.total),r.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),o.next(w)},_=m=>{let w={type:Ji.UploadProgress,loaded:m.loaded};m.lengthComputable&&(w.total=m.total),o.next(w)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",g),c!==null&&a.upload&&a.upload.addEventListener("progress",_)),a.send(c),o.next({type:Ji.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",g),c!==null&&a.upload&&a.upload.removeEventListener("progress",_)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(A(Qi))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})(),_D=new S(""),KP="XSRF-TOKEN",QP=new S("",{providedIn:"root",factory:()=>KP}),YP="X-XSRF-TOKEN",JP=new S("",{providedIn:"root",factory:()=>YP}),Ru=class{},ZP=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Iu(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(A(ze),A($e),A(QP))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})();function XP(t,e){let n=t.url.toLowerCase();if(!I(_D)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=I(Ru).getToken(),i=I(JP);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var wD=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(wD||{});function eO(t,e){return{\u0275kind:t,\u0275providers:e}}function tO(...t){let e=[hp,uD,cD,{provide:_o,useExisting:cD},{provide:bu,useExisting:uD},{provide:fp,useValue:XP,multi:!0},{provide:_D,useValue:!0},{provide:Ru,useClass:ZP}];for(let n of t)e.push(...n.\u0275providers);return xr(e)}var lD=new S("");function nO(){return eO(wD.LegacyInterceptors,[{provide:lD,useFactory:zP},{provide:fp,useExisting:lD,multi:!0}])}var ID=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({providers:[tO(nO())]});let t=e;return t})();var dD="b",hD="h",fD="s",pD="st",gD="u",mD="rt",Tu=new S(""),rO=["GET","HEAD"];function iO(t,e){let l=I(Tu),{isCacheActive:n}=l,r=Jv(l,["isCacheActive"]),{transferCache:i,method:s}=t;if(!n||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!rO.includes(s)||t.headers.has("authorization")||t.headers.has("proxy-authorization")||i===!1||r.filter?.(t)===!1)return e(t);let o=I(Fr),a=oO(t),c=o.get(a,null),u=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(u=i.includeHeaders),c){let{[dD]:d,[mD]:h,[hD]:f,[fD]:g,[pD]:_,[gD]:m}=c,w=d;switch(h){case"arraybuffer":w=new TextEncoder().encode(d).buffer;break;case"blob":w=new Blob([d]);break}let F=new rr(f);return N(new Zi({body:w,headers:F,status:g,statusText:_,url:m}))}return e(t).pipe(Ce(d=>{d instanceof Zi&&o.set(a,{[dD]:d.body,[hD]:sO(d.headers,u),[fD]:d.status,[pD]:d.statusText,[gD]:d.url||"",[mD]:t.responseType})}))}function sO(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function oO(t){let{params:e,method:n,responseType:r,url:i,body:s}=t,o=e.keys().sort().map(l=>`${l}=${e.getAll(l)}`).join("&"),c=[n,r,i,typeof s=="string"?s:"",o].join("|"),u=aO(c);return u}function aO(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function ED(t){return[{provide:Tu,useFactory:()=>(fo("NgHttpTransferCache"),C({isCacheActive:!0},t))},{provide:vD,useValue:iO,multi:!0,deps:[Fr,Tu]},{provide:mo,multi:!0,useFactory:()=>{let e=I(Vr),n=I(Tu);return()=>{Xf(e).then(()=>{n.isCacheActive=!1})}}}]}var mp=class extends _u{constructor(){super(...arguments),this.supportsDOMEvents=!0}},yp=class t extends mp{static makeCurrent(){XE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=uO();return n==null?null:lO(n)}resetBaseElement(){Io=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Iu(document.cookie,e)}},Io=null;function uO(){return Io=Io||document.querySelector("base"),Io?Io.getAttribute("href"):null}function lO(t){return new URL(t,document.baseURI).pathname}var dO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})(),vp=new S(""),bD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new R(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(A(vp),A(ie))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})(),Mu=class{constructor(e){this._doc=e}},pp="ng-app-id",AD=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ap(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${pp}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(pp),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(pp,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(A(ze),A(ru),A(Nf,8),A($e))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})(),gp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ip=/%COMP%/g,SD="%COMP%",hO=`_nghost-${SD}`,fO=`_ngcontent-${SD}`,pO=!0,gO=new S("",{providedIn:"root",factory:()=>pO});function mO(t){return fO.replace(Ip,t)}function yO(t){return hO.replace(Ip,t)}function RD(t,e){return e.map(n=>n.replace(Ip,t))}var DD=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ap(c),this.defaultRenderer=new Eo(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===tn.ShadowDom&&(i=fe(C({},i),{encapsulation:tn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof xu?s.applyToHost(r):s instanceof Do&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case tn.Emulated:o=new xu(u,l,i,this.appId,d,a,c,h);break;case tn.ShadowDom:return new _p(u,l,r,i,a,c,this.nonce,h);default:o=new Do(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(A(bD),A(AD),A(ru),A(gO),A(ze),A($e),A(ie),A(Nf))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})(),Eo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(gp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(CD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(CD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=gp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=gp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Mn.DashCase|Mn.Important)?e.style.setProperty(n,r,i&Mn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Mn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ki().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function CD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var _p=class extends Eo{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=RD(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Do=class extends Eo{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?RD(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xu=class extends Do{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=mO(u),this.hostAttr=yO(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},vO=(()=>{let e=class e extends Mu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(A(ze))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})(),TD=["alt","control","meta","shift"],_O={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},IO=(()=>{let e=class e extends Mu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ki().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),TD.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=_O[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),TD.forEach(a=>{if(a!==s){let c=wO[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(A(ze))},e.\u0275prov=b({token:e,factory:e.\u0275fac});let t=e;return t})();function MD(t,e){return zE(C({rootComponent:t},EO(e)))}function EO(t){return{appProviders:[...AO,...t?.providers??[]],platformProviders:bO}}function DO(){yp.makeCurrent()}function CO(){return new Rn}function TO(){return OI(document),document}var bO=[{provide:$e,useValue:op},{provide:xf,useValue:DO,multi:!0},{provide:ze,useFactory:TO,deps:[]}];var AO=[{provide:Jc,useValue:"root"},{provide:Rn,useFactory:CO,deps:[]},{provide:vp,useClass:vO,multi:!0,deps:[ze,ie,$e]},{provide:vp,useClass:IO,multi:!0,deps:[ze]},DD,AD,bD,{provide:to,useExisting:DD},{provide:Qi,useClass:dO,deps:[]},[]];var xD=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(A(ze))},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wp=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(wp||{});function ND(...t){let e=[],n=new Set,r=n.has(wp.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of t)n.add(s),i.length&&e.push(i);return xr([[],GE(),n.has(wp.NoHttpTransferCache)||r?[]:ED({}),e])}var Hp={};OA(Hp,{FirebaseError:()=>wt,SDK_VERSION:()=>Ln,_DEFAULT_ENTRY_NAME:()=>un,_addComponent:()=>So,_addOrOverwriteComponent:()=>$p,_apps:()=>ir,_clearComponents:()=>Sk,_components:()=>bo,_getProvider:()=>Ro,_registerComponent:()=>Kt,_removeServiceInstance:()=>oC,deleteApp:()=>Vu,getApp:()=>es,getApps:()=>Mo,initializeApp:()=>Xi,onLog:()=>Uu,registerVersion:()=>me,setLogLevel:()=>ju});var OD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RO=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new Dp;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Dp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},MO=function(t){let e=OD(t);return kD.encodeByteArray(e,!0)},Co=function(t){return MO(t).replace(/\./g,"")},Tp=function(t){try{return kD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function To(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!xO(n)||(t[n]=To(t[n],e[n]));return t}function xO(t){return t!=="__proto__"}function NO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var PO=()=>NO().__FIREBASE_DEFAULTS__,OO=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Tp(t[1]);return e&&JSON.parse(e)},Pu=()=>{try{return PO()||OO()||kO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FD=t=>{var e,n;return(n=(e=Pu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LD=t=>{let e=FD(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bp=()=>{var t;return(t=Pu())===null||t===void 0?void 0:t.config},VD=t=>{var e;return(e=Pu())===null||e===void 0?void 0:e[`_${t}`]};var Nu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function UD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Co(JSON.stringify(n)),Co(JSON.stringify(o)),""].join(".")}function Ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function FO(){var t;let e=(t=Pu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BD(){return typeof self=="object"&&self.self===self}function $D(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qD(){return!FO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ou(){try{return typeof indexedDB=="object"}catch{return!1}}function zD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var LO="FirebaseError",wt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LO,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xt.prototype.create)}},xt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?VO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new wt(i,a,r)}};function VO(t,e){return t.replace(UO,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var UO=/\{\$([^}]+)}/g;function Ap(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function jr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(PD(s)&&PD(o)){if(!jr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function PD(t){return t!==null&&typeof t=="object"}function Sp(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ku(t,e){let n=new Cp(t,e);return n.subscribe.bind(n)}var Cp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ep),i.error===void 0&&(i.error=Ep),i.complete===void 0&&(i.complete=Ep);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jO(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ep(){}var s3=4*60*60*1e3;function nt(t){return t&&t._delegate?t._delegate:t}var ht=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Br="[DEFAULT]";var Rp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Nu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($O(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function BO(t){return t===Br?void 0:t}function $O(t){return t.instantiationMode==="EAGER"}var Fu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Rp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Mp=[],W=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(W||{}),GD={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},HO=W.INFO,qO={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},zO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=qO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},an=class{constructor(e){this.name=e,this._logLevel=HO,this._logHandler=zO,this._userLogHandler=null,Mp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}};function WD(t){Mp.forEach(e=>{e.setLogLevel(t)})}function KD(t,e){for(let n of Mp){let r=null;e&&e.level&&(r=GD[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{let a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:W[s].toLowerCase(),message:a,args:o,type:i.name})}}}var GO=(t,e)=>e.some(n=>t instanceof n),QD,YD;function WO(){return QD||(QD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KO(){return YD||(YD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var JD=new WeakMap,Np=new WeakMap,ZD=new WeakMap,xp=new WeakMap,Op=new WeakMap;function QO(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JD.set(n,t)}).catch(()=>{}),Op.set(e,t),e}function YO(t){if(Np.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Np.set(t,e)}var Pp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XD(t){Pp=t(Pp)}function JO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Lu(this),e,...n);return ZD.set(r,e.sort?e.sort():[e]),cn(r)}:KO().includes(t)?function(...e){return t.apply(Lu(this),e),cn(JD.get(this))}:function(...e){return cn(t.apply(Lu(this),e))}}function ZO(t){return typeof t=="function"?JO(t):(t instanceof IDBTransaction&&YO(t),GO(t,WO())?new Proxy(t,Pp):t)}function cn(t){if(t instanceof IDBRequest)return QO(t);if(xp.has(t))return xp.get(t);let e=ZO(t);return e!==t&&(xp.set(t,e),Op.set(e,t)),e}var Lu=t=>Op.get(t);function tC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=cn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(cn(o.result),c.oldVersion,c.newVersion,cn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var XO=["get","getKey","getAll","getAllKeys","count"],ek=["put","add","delete","clear"],kp=new Map;function eC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kp.get(e))return kp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=ek.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XO.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return kp.set(e,s),s}XD(t=>fe(C({},t),{get:(e,n,r)=>eC(e,n)||t.get(e,n,r),has:(e,n)=>!!eC(e,n)||t.has(e,n)}));var Lp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function tk(t){let e=t.getComponent();return e?.type==="VERSION"}var Vp="@firebase/app",nC="0.9.29";var $r=new an("@firebase/app"),nk="@firebase/app-compat",rk="@firebase/analytics-compat",ik="@firebase/analytics",sk="@firebase/app-check-compat",ok="@firebase/app-check",ak="@firebase/auth",ck="@firebase/auth-compat",uk="@firebase/database",lk="@firebase/database-compat",dk="@firebase/functions",hk="@firebase/functions-compat",fk="@firebase/installations",pk="@firebase/installations-compat",gk="@firebase/messaging",mk="@firebase/messaging-compat",yk="@firebase/performance",vk="@firebase/performance-compat",_k="@firebase/remote-config",wk="@firebase/remote-config-compat",Ik="@firebase/storage",Ek="@firebase/storage-compat",Dk="@firebase/firestore",Ck="@firebase/firestore-compat",Tk="firebase",bk="10.9.0";var un="[DEFAULT]",Ak={[Vp]:"fire-core",[nk]:"fire-core-compat",[ik]:"fire-analytics",[rk]:"fire-analytics-compat",[ok]:"fire-app-check",[sk]:"fire-app-check-compat",[ak]:"fire-auth",[ck]:"fire-auth-compat",[uk]:"fire-rtdb",[lk]:"fire-rtdb-compat",[dk]:"fire-fn",[hk]:"fire-fn-compat",[fk]:"fire-iid",[pk]:"fire-iid-compat",[gk]:"fire-fcm",[mk]:"fire-fcm-compat",[yk]:"fire-perf",[vk]:"fire-perf-compat",[_k]:"fire-rc",[wk]:"fire-rc-compat",[Ik]:"fire-gcs",[Ek]:"fire-gcs-compat",[Dk]:"fire-fst",[Ck]:"fire-fst-compat","fire-js":"fire-js",[Tk]:"fire-js-all"};var ir=new Map,bo=new Map;function So(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $p(t,e){t.container.addOrOverwriteComponent(e)}function Kt(t){let e=t.name;if(bo.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;bo.set(e,t);for(let n of ir.values())So(n,t);return!0}function Ro(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function oC(t,e,n=un){Ro(t,e).clearInstance(n)}function Sk(){bo.clear()}var Rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Fn=new xt("app","Firebase",Rk);var Up=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}};var Ln=bk;function Xi(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:un,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fn.create("bad-app-name",{appName:String(i)});if(n||(n=bp()),!n)throw Fn.create("no-options");let s=ir.get(i);if(s){if(jr(n,s.options)&&jr(r,s.config))return s;throw Fn.create("duplicate-app",{appName:i})}let o=new Fu(i);for(let c of bo.values())o.addComponent(c);let a=new Up(n,r,o);return ir.set(i,a),a}function es(t=un){let e=ir.get(t);if(!e&&t===un&&bp())return Xi();if(!e)throw Fn.create("no-app",{appName:t});return e}function Mo(){return Array.from(ir.values())}function Vu(t){return p(this,null,function*(){let e=t.name;ir.has(e)&&(ir.delete(e),yield Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)})}function me(t,e,n){var r;let i=(r=Ak[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(a.join(" "));return}Kt(new ht(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Uu(t,e){if(t!==null&&typeof t!="function")throw Fn.create("invalid-log-argument");KD(t,e)}function ju(t){WD(t)}var Mk="firebase-heartbeat-database",xk=1,Ao="firebase-heartbeat-store",Fp=null;function aC(){return Fp||(Fp=tC(Mk,xk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ao)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fn.create("idb-open",{originalErrorMessage:t.message})})),Fp}function Nk(t){return p(this,null,function*(){try{let n=(yield aC()).transaction(Ao),r=yield n.objectStore(Ao).get(cC(t));return yield n.done,r}catch(e){if(e instanceof wt)$r.warn(e.message);else{let n=Fn.create("idb-get",{originalErrorMessage:e?.message});$r.warn(n.message)}}})}function rC(t,e){return p(this,null,function*(){try{let r=(yield aC()).transaction(Ao,"readwrite");yield r.objectStore(Ao).put(e,cC(t)),yield r.done}catch(n){if(n instanceof wt)$r.warn(n.message);else{let r=Fn.create("idb-set",{originalErrorMessage:n?.message});$r.warn(r.message)}}})}function cC(t){return`${t.name}!${t.options.appId}`}var Pk=1024,Ok=30*24*60*60*1e3,jp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Bp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=iC();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Ok}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=iC(),{heartbeatsToSend:r,unsentEntries:i}=kk(this._heartbeatsCache.heartbeats),s=Co(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function iC(){return new Date().toISOString().substring(0,10)}function kk(t,e=Pk){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),sC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Bp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Ou()?zD().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Nk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return rC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function sC(t){return Co(JSON.stringify({version:2,heartbeats:t})).length}function Fk(t){Kt(new ht("platform-logger",e=>new Lp(e),"PRIVATE")),Kt(new ht("heartbeat",e=>new jp(e),"PRIVATE")),me(Vp,nC,t),me(Vp,nC,"esm2017"),me("fire-js","")}Fk("");var Lk="firebase",Vk="10.9.0";me(Lk,Vk,"app");var Vn=new xn("ANGULARFIRE2_VERSION");function zp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var No=(t,e)=>{let n=e?[e]:Mo(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},xo=class{constructor(){return No(Uk)}},Uk="app-check";function ts(){}var Bu=class{zone;delegate;constructor(e,n=th){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},qp=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts)),n.pipe(Ce({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Po=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Bu(Zone.current)),this.insideAngular=n.run(()=>new Bu(Zone.current,eh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(A(ie))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $u(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function jk(t){return $u().ngZone.runOutsideAngular(()=>t())}function Hr(t){return $u().ngZone.run(()=>t())}function Bk(t){return $k($u())(t)}function $k(t){return function(n){return n=n.lift(new qp(t.ngZone)),n.pipe(Gn(t.outsideAngular),zn(t.insideAngular))}}var Hk=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Hr(()=>t.apply(void 0,r))},ln=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Hr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ts,{},ts,ts))),r[s]=Hk(r[s],n));let i=jk(()=>t.apply(this,r));if(!e)if(i instanceof K){let s=$u();return i.pipe(Gn(s.outsideAngular),zn(s.insideAngular))}else return Hr(()=>i);return i instanceof K?i.pipe(Bk):i instanceof Promise?Hr(()=>new Promise((s,o)=>i.then(a=>Hr(()=>s(a)),a=>Hr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Hr(()=>i)};var qr=class{constructor(e){return e}},Oo=class{constructor(){return Mo()}};function qk(t){return t&&t.length===1?t[0]:new qr(es())}var Gp=new S("angularfire2._apps"),zk={provide:qr,useFactory:qk,deps:[[new _t,Gp]]},Gk={provide:Oo,deps:[[new _t,Gp]]};function Wk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qr(r)}}var Kk=(()=>{class t{constructor(n){me("angularfire",Vn.full,"core"),me("angularfire",Vn.full,"app"),me("angular",yu.full,n.toString())}static \u0275fac=function(r){return new(r||t)(A($e))};static \u0275mod=tt({type:t});static \u0275inj=et({providers:[zk,Gk]})}return t})();function uC(t,...e){return{ngModule:Kk,providers:[{provide:Gp,useFactory:Wk(t),multi:!0,deps:[ie,Wt,Po,...e]}]}}var lC=ln(Xi,!0);var zr={production:!1,firebaseApiUrl:"https://dailydilemma-61ac8-default-rtdb.europe-west1.firebasedatabase.app/votos.json",backendApiUrl:"https://stark-peak-62036-bec9579aee22.herokuapp.com/",firebase:{apiKey:"AIzaSyBrmzIfbTjqwIBAyarftOmxir09CVH5KdE",authDomain:"daily-dilemma-343a8.firebaseapp.com",projectId:"daily-dilemma-343a8",storageBucket:"daily-dilemma-343a8.appspot.com",messagingSenderId:"246902726517",appId:"1:246902726517:web:271446ebb27e1213097d3c",measurementId:"G-XHW1G3J9TS"}};function yC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vC=yC,_C=new xt("auth","Firebase",yC());var zu=new an("@firebase/auth");function Yk(t,...e){zu.logLevel<=W.WARN&&zu.warn(`Auth (${Ln}): ${t}`,...e)}function qu(t,...e){zu.logLevel<=W.ERROR&&zu.error(`Auth (${Ln}): ${t}`,...e)}function dC(t,...e){throw ig(t,...e)}function rg(t,...e){return ig(t,...e)}function Jk(t,e,n){let r=Object.assign(Object.assign({},vC()),{[e]:n});return new xt("auth","Firebase",r).create(e,{appName:t.name})}function ig(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _C.create(t,...e)}function oe(t,e,...n){if(!t)throw ig(e,...n)}function ko(t){let e="INTERNAL ASSERTION FAILED: "+t;throw qu(e),new Error(e)}function Gu(t,e){t||ko(e)}function Zk(){return hC()==="http:"||hC()==="https:"}function hC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Xk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zk()||$D()||"connection"in navigator)?navigator.onLine:!0}function e1(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Wr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gu(n>e,"Short delay should be less than long delay!"),this.isMobile=jD()||HD()}get(){return Xk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function t1(t,e){Gu(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Wu=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var n1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var r1=new Wr(3e4,6e4);function wC(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function el(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return IC(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Sp(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Wu.fetch()(EC(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function IC(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},n1),e);try{let i=new Qp(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Hu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Hu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Hu(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Jk(t,l,u);dC(t,l)}}catch(i){if(i instanceof wt)throw i;dC(t,"network-request-failed",{message:String(i)})}})}function EC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?t1(t.config,i):`${t.config.apiScheme}://${i}`}var Qp=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rg(this.auth,"network-request-failed")),r1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Hu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=rg(t,e,r);return i.customData._tokenResponse=n,i}function i1(t,e){return p(this,null,function*(){return el(t,"POST","/v1/accounts:delete",e)})}function s1(t,e){return p(this,null,function*(){return el(t,"POST","/v1/accounts:lookup",e)})}function Fo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sg(t,e=!1){return p(this,null,function*(){let n=nt(t),r=yield n.getIdToken(e),i=DC(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Fo(Wp(i.auth_time)),issuedAtTime:Fo(Wp(i.iat)),expirationTime:Fo(Wp(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Wp(t){return Number(t)*1e3}function DC(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return qu("JWT malformed, contained fewer than 3 sections"),null;try{let i=Tp(n);return i?JSON.parse(i):(qu("Failed to decode base64 JWT payload"),null)}catch(i){return qu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function o1(t){let e=DC(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Yp(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof wt&&a1(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function a1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Jp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ku=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fo(this.lastLoginAt),this.creationTime=Fo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Qu(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Yp(t,s1(n,{idToken:r}));oe(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?u1(s.providerUserInfo):[],a=c1(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ku(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function og(t){return p(this,null,function*(){let e=nt(t);yield Qu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function c1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function u1(t){return t.map(e=>{var{providerId:n}=e,r=nh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function l1(t,e){return p(this,null,function*(){let n=yield IC(t,{},()=>p(this,null,function*(){let r=Sp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=EC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Wu.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function d1(t,e){return p(this,null,function*(){return el(t,"POST","/v2/accounts:revokeToken",wC(t,e))})}var Yu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return oe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield l1(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ko("not implemented")}};function sr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ju=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=nh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ku(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield Yp(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return sg(this,e)}reload(){return og(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Qu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield Yp(this,i1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,F=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:H,emailVerified:j,isAnonymous:Ee,providerData:ee,stsTokenManager:Me}=n;oe(H&&Me,e,"internal-error");let Zt=Yu.fromJSON(this.name,Me);oe(typeof H=="string",e,"internal-error"),sr(d,e.name),sr(h,e.name),oe(typeof j=="boolean",e,"internal-error"),oe(typeof Ee=="boolean",e,"internal-error"),sr(f,e.name),sr(g,e.name),sr(_,e.name),sr(m,e.name),sr(w,e.name),sr(F,e.name);let yr=new t({uid:H,auth:e,email:h,emailVerified:j,displayName:d,isAnonymous:Ee,photoURL:g,phoneNumber:f,tenantId:_,stsTokenManager:Zt,createdAt:w,lastLoginAt:F});return ee&&Array.isArray(ee)&&(yr.providerData=ee.map(mi=>Object.assign({},mi))),m&&(yr._redirectEventId=m),yr}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Yu;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qu(s),s})}};var fC=new Map;function Gr(t){Gu(t instanceof Function,"Expected a class definition");let e=fC.get(t);return e?(Gu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fC.set(t,e),e)}var h1=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Zp=h1;function Kp(t,e,n){return`firebase:${t}:${e}:${n}`}var Zu=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Kp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Kp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ju._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Gr(Zp),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Gr(Zp),o=Kp(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=Ju._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function pC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v1(e))return"Blackberry";if(_1(e))return"Webos";if(p1(e))return"Safari";if((e.includes("chrome/")||g1(e))&&!e.includes("edge/"))return"Chrome";if(y1(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function f1(t=Ge()){return/firefox\//i.test(t)}function p1(t=Ge()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g1(t=Ge()){return/crios\//i.test(t)}function m1(t=Ge()){return/iemobile/i.test(t)}function y1(t=Ge()){return/android/i.test(t)}function v1(t=Ge()){return/blackberry/i.test(t)}function _1(t=Ge()){return/webos/i.test(t)}function CC(t,e=[]){let n;switch(t){case"Browser":n=pC(Ge());break;case"Worker":n=`${pC(Ge())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ln}/${r}`}var Xp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function w1(n){return p(this,arguments,function*(t,e={}){return el(t,"GET","/v2/passwordPolicy",wC(t,e))})}var I1=6,eg=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:I1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var tg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xu(this),this.idTokenSubscription=new Xu(this),this.beforeStateQueue=new Xp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Zu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Qu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=e1()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?nt(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Gr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield w1(this),n=new eg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield d1(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Gr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=yield Zu.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Yk(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function E1(t){return nt(t)}var Xu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ku(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var D1={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C1(t){D1=t}function T1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function b1(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Gr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var K3=T1("rcb"),Q3=new Wr(3e4,6e4);var Y3=new Wr(2e3,1e4);var J3=10*60*1e3;var Z3=new Wr(3e4,6e4);var X3=new Wr(5e3,15e3);var eW=encodeURIComponent("fac");var gC="@firebase/auth",mC="1.6.2";var ng=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function A1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S1(t){Kt(new ht("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CC(t)},u=new tg(r,i,s,c);return b1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kt(new ht("auth-internal",e=>{let n=E1(e.getProvider("auth").getImmediate());return(r=>new ng(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),me(gC,mC,A1(t)),me(gC,mC,"esm2017")}var R1=5*60,tW=VD("authIdTokenMaxAge")||R1;function M1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}C1({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=rg("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",M1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S1("Browser");var RF="auth";var tl=class{constructor(){return No(RF)}};var MF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yt={},E,Sg=Sg||{},k=MF||self;function gl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Yo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function xF(t){return Object.prototype.hasOwnProperty.call(t,ag)&&t[ag]||(t[ag]=++NF)}var ag="closure_uid_"+(1e9*Math.random()>>>0),NF=0;function PF(t,e,n){return t.call.apply(t.bind,arguments)}function OF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function We(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?We=PF:We=OF,We.apply(null,arguments)}function nl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Pe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function or(){this.s=this.s,this.o=this.o}var kF=0;or.prototype.s=!1;or.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),kF!=0)&&xF(this)};or.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var LC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Rg(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function TC(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(gl(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ke(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ke.prototype.h=function(){this.defaultPrevented=!0};var FF=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};k.addEventListener("test",n,e),k.removeEventListener("test",n,e)}catch{}return t}();function $o(t){return/^[\s\xa0]*$/.test(t)}function ml(){var t=k.navigator;return t&&(t=t.userAgent)?t:""}function dn(t){return ml().indexOf(t)!=-1}function Mg(t){return Mg[" "](t),t}Mg[" "]=function(){};function LF(t,e){var n=TL;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var VF=dn("Opera"),ss=dn("Trident")||dn("MSIE"),VC=dn("Edge"),hg=VC||ss,UC=dn("Gecko")&&!(ml().toLowerCase().indexOf("webkit")!=-1&&!dn("Edge"))&&!(dn("Trident")||dn("MSIE"))&&!dn("Edge"),UF=ml().toLowerCase().indexOf("webkit")!=-1&&!dn("Edge");function jC(){var t=k.document;return t?t.documentMode:void 0}var fg;e:{if(rl="",il=function(){var t=ml();if(UC)return/rv:([^\);]+)(\)|;)/.exec(t);if(VC)return/Edge\/([\d\.]+)/.exec(t);if(ss)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(UF)return/WebKit\/(\S+)/.exec(t);if(VF)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),il&&(rl=il?il[1]:""),ss&&(sl=jC(),sl!=null&&sl>parseFloat(rl))){fg=String(sl);break e}fg=rl}var rl,il,sl,pg;k.document&&ss?(cg=jC(),pg=cg||parseInt(fg,10)||void 0):pg=void 0;var cg,jF=pg;function Ho(t,e){if(Ke.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(UC){e:{try{Mg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:BF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ho.$.h.call(this)}}Pe(Ho,Ke);var BF={2:"touch",3:"pen",4:"mouse"};Ho.prototype.h=function(){Ho.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Jo="closure_listenable_"+(1e6*Math.random()|0),$F=0;function HF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++$F,this.fa=this.ia=!1}function yl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function xg(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function qF(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function BC(t){let e={};for(let n in t)e[n]=t[n];return e}var bC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $C(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<bC.length;s++)n=bC[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vl(t){this.src=t,this.g={},this.h=0}vl.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=mg(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new HF(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function gg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=LC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(yl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function mg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Ng="closure_lm_"+(1e6*Math.random()|0),ug={};function HC(t,e,n,r,i){if(r&&r.once)return zC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)HC(t,e[s],n,r,i);return null}return n=kg(n),t&&t[Jo]?t.O(e,n,Yo(r)?!!r.capture:!!r,i):qC(t,e,n,!1,r,i)}function qC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Yo(i)?!!i.capture:!!i,a=Og(t);if(a||(t[Ng]=a=new vl(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=zF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)FF||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(WC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function zF(){function t(n){return e.call(t.src,t.listener,n)}let e=GF;return t}function zC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)zC(t,e[s],n,r,i);return null}return n=kg(n),t&&t[Jo]?t.P(e,n,Yo(r)?!!r.capture:!!r,i):qC(t,e,n,!0,r,i)}function GC(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)GC(t,e[s],n,r,i);else r=Yo(r)?!!r.capture:!!r,n=kg(n),t&&t[Jo]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=mg(s,n,r,i),-1<n&&(yl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Og(t))&&(e=t.g[e.toString()],t=-1,e&&(t=mg(e,n,r,i)),(n=-1<t?e[t]:null)&&Pg(n))}function Pg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Jo])gg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(WC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Og(e))?(gg(n,t),n.h==0&&(n.src=null,e[Ng]=null)):yl(t)}}}function WC(t){return t in ug?ug[t]:ug[t]="on"+t}function GF(t,e){if(t.fa)t=!0;else{e=new Ho(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Pg(t),t=n.call(r,e)}return t}function Og(t){return t=t[Ng],t instanceof vl?t:null}var lg="__closure_events_fn_"+(1e9*Math.random()>>>0);function kg(t){return typeof t=="function"?t:(t[lg]||(t[lg]=function(e){return t.handleEvent(e)}),t[lg])}function Ne(){or.call(this),this.i=new vl(this),this.S=this,this.J=null}Pe(Ne,or);Ne.prototype[Jo]=!0;Ne.prototype.removeEventListener=function(t,e,n,r){GC(this,t,e,n,r)};function Ue(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ke(e,t);else if(e instanceof Ke)e.target=e.target||t;else{var i=e;e=new Ke(r,t),$C(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ol(o,r,!0,e)&&i}if(o=e.g=t,i=ol(o,r,!0,e)&&i,i=ol(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=ol(o,r,!1,e)&&i}Ne.prototype.N=function(){if(Ne.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yl(n[r]);delete t.g[e],t.h--}}this.J=null};Ne.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ne.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ol(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&gg(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Fg=k.JSON.stringify,yg=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function WF(){var t=Lg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var vg=class{constructor(){this.h=this.g=null}add(e,n){let r=KC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},KC=new yg(()=>new _g,t=>t.reset()),_g=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function KF(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function QF(t){k.setTimeout(()=>{throw t},0)}var qo,zo=!1,Lg=new vg,QC=()=>{let t=k.Promise.resolve(void 0);qo=()=>{t.then(YF)}},YF=()=>{for(var t;t=WF();){try{t.h.call(t.g)}catch(n){QF(n)}var e=KC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zo=!1};function _l(t,e){Ne.call(this),this.h=t||1,this.g=e||k,this.j=We(this.qb,this),this.l=Date.now()}Pe(_l,Ne);E=_l.prototype;E.ga=!1;E.T=null;E.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ue(this,"tick"),this.ga&&(Vg(this),this.start()))}};E.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Vg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}E.N=function(){_l.$.N.call(this),Vg(this),delete this.g};function Ug(t,e,n){if(typeof t=="function")n&&(t=We(t,n));else if(t&&typeof t.handleEvent=="function")t=We(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function YC(t){t.g=Ug(()=>{t.g=null,t.i&&(t.i=!1,YC(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var wg=class extends or{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:YC(this)}N(){super.N(),this.g&&(k.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Go(t){or.call(this),this.h=t,this.g={}}Pe(Go,or);var AC=[];function JC(t,e,n,r){Array.isArray(n)||(n&&(AC[0]=n.toString()),n=AC);for(var i=0;i<n.length;i++){var s=HC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ZC(t){xg(t.g,function(e,n){this.g.hasOwnProperty(n)&&Pg(e)},t),t.g={}}Go.prototype.N=function(){Go.$.N.call(this),ZC(this)};Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wl(){this.g=!0}wl.prototype.Ea=function(){this.g=!1};function JF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function ZF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function rs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+eL(t,n)+(r?" "+r:"")})}function XF(t,e){t.info(function(){return"TIMEOUT: "+e})}wl.prototype.info=function(){};function eL(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Fg(n)}catch{return e}}var Jr={},SC=null;function Il(){return SC=SC||new Ne}Jr.Ta="serverreachability";function XC(t){Ke.call(this,Jr.Ta,t)}Pe(XC,Ke);function Wo(t){let e=Il();Ue(e,new XC(e))}Jr.STAT_EVENT="statevent";function e0(t,e){Ke.call(this,Jr.STAT_EVENT,t),this.stat=e}Pe(e0,Ke);function rt(t){let e=Il();Ue(e,new e0(e,t))}Jr.Ua="timingevent";function t0(t,e){Ke.call(this,Jr.Ua,t),this.size=e}Pe(t0,Ke);function Zo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}var El={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},n0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jg(){}jg.prototype.h=null;function RC(t){return t.h||(t.h=t.i())}function r0(){}var Xo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bg(){Ke.call(this,"d")}Pe(Bg,Ke);function $g(){Ke.call(this,"c")}Pe($g,Ke);var Ig;function Dl(){}Pe(Dl,jg);Dl.prototype.g=function(){return new XMLHttpRequest};Dl.prototype.i=function(){return{}};Ig=new Dl;function ea(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Go(this),this.P=tL,t=hg?125:void 0,this.V=new _l(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new i0}function i0(){this.i=null,this.g="",this.h=!1}var tL=45e3,s0={},Eg={};E=ea.prototype;E.setTimeout=function(t){this.P=t};function Dg(t,e,n){t.L=1,t.A=Tl(jn(e)),t.u=n,t.S=!0,o0(t,null)}function o0(t,e){t.G=Date.now(),ta(t),t.B=jn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),p0(n.i,"t",r),t.o=0,n=t.l.J,t.h=new i0,t.g=k0(t.l,n?e:null,!t.u),0<t.O&&(t.M=new wg(We(t.Pa,t,t.g),t.O)),JC(t.U,t.g,"readystatechange",t.nb),e=t.I?BC(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Wo(),JF(t.j,t.v,t.B,t.m,t.W,t.u)}E.nb=function(t){t=t.target;let e=this.M;e&&hn(t)==3?e.l():this.Pa(t)};E.Pa=function(t){try{if(t==this.g)e:{let l=hn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||hg||this.g&&(this.h.h||this.g.ja()||PC(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Wo(3):Wo(2)),Cl(this);var n=this.g.da();this.ca=n;t:if(a0(this)){var r=PC(this.g);t="";var i=r.length,s=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),Bo(this);var o="";break t}this.h.i=new k.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,ZF(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$o(a)){var u=a;break t}}u=null}if(n=u)rs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cg(this,n);else{this.i=!1,this.s=3,rt(12),Kr(this),Bo(this);break e}}this.S?(c0(this,l,o),hg&&this.i&&l==3&&(JC(this.U,this.V,"tick",this.mb),this.V.start())):(rs(this.j,this.m,o,null),Cg(this,o)),l==4&&Kr(this),this.i&&!this.J&&(l==4?x0(this.l,this):(this.i=!1,ta(this)))}else EL(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),Kr(this),Bo(this)}}}catch{}finally{}};function a0(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function c0(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=nL(t,n),i==Eg){e==4&&(t.s=4,rt(14),r=!1),rs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==s0){t.s=4,rt(15),rs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else rs(t.j,t.m,i,null),Cg(t,i);a0(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,rt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Kg(e),e.M=!0,rt(11))):(rs(t.j,t.m,n,"[Invalid Chunked Response]"),Kr(t),Bo(t))}E.mb=function(){if(this.g){var t=hn(this.g),e=this.g.ja();this.o<e.length&&(Cl(this),c0(this,t,e),this.i&&t!=4&&ta(this))}};function nL(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Eg:(n=Number(e.substring(n,r)),isNaN(n)?s0:(r+=1,r+n>e.length?Eg:(e=e.slice(r,r+n),t.o=r+n,e)))}E.cancel=function(){this.J=!0,Kr(this)};function ta(t){t.Y=Date.now()+t.P,u0(t,t.P)}function u0(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Zo(We(t.lb,t),e)}function Cl(t){t.C&&(k.clearTimeout(t.C),t.C=null)}E.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(XF(this.j,this.B),this.L!=2&&(Wo(),rt(17)),Kr(this),this.s=2,Bo(this)):u0(this,this.Y-t)};function Bo(t){t.l.H==0||t.J||x0(t.l,t)}function Kr(t){Cl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Vg(t.V),ZC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Cg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Tg(n.i,t))){if(!t.K&&Tg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)dl(n),Sl(n);else break e;Wg(n),rt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Zo(We(n.ib,n),6e3));if(1>=y0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Qr(n,11)}else if((t.K||n.g==t)&&dl(n),!$o(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Hg(s,s.h),s.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,he(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=O0(r,r.J?r.pa:null,r.Y),o.K){v0(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Cl(a),ta(a)),r.g=o}else R0(r);0<n.j.length&&Rl(n)}else u[0]!="stop"&&u[0]!="close"||Qr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Qr(n,7):Gg(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Wo(4)}catch{}}function rL(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(gl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function iL(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(gl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function l0(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(gl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=iL(t),r=rL(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var d0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sL(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Yr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Yr){this.h=t.h,ul(this,t.j),this.s=t.s,this.g=t.g,ll(this,t.m),this.l=t.l;var e=t.i,n=new Ko;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),MC(this,n),this.o=t.o}else t&&(e=String(t).match(d0))?(this.h=!1,ul(this,e[1]||"",!0),this.s=Uo(e[2]||""),this.g=Uo(e[3]||"",!0),ll(this,e[4]),this.l=Uo(e[5]||"",!0),MC(this,e[6]||"",!0),this.o=Uo(e[7]||"")):(this.h=!1,this.i=new Ko(null,this.h))}Yr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(jo(e,xC,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(jo(e,xC,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(jo(n,n.charAt(0)=="/"?cL:aL,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",jo(n,lL)),t.join("")};function jn(t){return new Yr(t)}function ul(t,e,n){t.j=n?Uo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ll(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function MC(t,e,n){e instanceof Ko?(t.i=e,dL(t.i,t.h)):(n||(e=jo(e,uL)),t.i=new Ko(e,t.h))}function he(t,e,n){t.i.set(e,n)}function Tl(t){return he(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Uo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,oL),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function oL(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var xC=/[#\/\?@]/g,aL=/[#\?:]/g,cL=/[#\?]/g,uL=/[#\?@]/g,lL=/#/g;function Ko(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ar(t){t.g||(t.g=new Map,t.h=0,t.i&&sL(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}E=Ko.prototype;E.add=function(t,e){ar(this),this.i=null,t=os(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function h0(t,e){ar(t),e=os(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function f0(t,e){return ar(t),e=os(t,e),t.g.has(e)}E.forEach=function(t,e){ar(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};E.ta=function(){ar(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};E.Z=function(t){ar(this);let e=[];if(typeof t=="string")f0(this,t)&&(e=e.concat(this.g.get(os(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};E.set=function(t,e){return ar(this),this.i=null,t=os(this,t),f0(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};E.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function p0(t,e,n){h0(t,e),0<n.length&&(t.i=null,t.g.set(os(t,e),Rg(n)),t.h+=n.length)}E.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function os(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function dL(t,e){e&&!t.j&&(ar(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(h0(this,r),p0(this,i,n))},t)),t.j=e}var hL=class{constructor(t,e){this.g=t,this.map=e}};function g0(t){this.l=t||fL,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(k.g&&k.g.Ka&&k.g.Ka()&&k.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fL=10;function m0(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function y0(t){return t.h?1:t.g?t.g.size:0}function Tg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Hg(t,e){t.g?t.g.add(e):t.h=e}function v0(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}g0.prototype.cancel=function(){if(this.i=_0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function _0(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Rg(t.i)}var pL=class{stringify(t){return k.JSON.stringify(t,void 0)}parse(t){return k.JSON.parse(t,void 0)}};function gL(){this.g=new pL}function mL(t,e,n){let r=n||"";try{l0(t,function(i,s){let o=i;Yo(i)&&(o=Fg(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yL(t,e){let n=new wl;if(k.Image){let r=new Image;r.onload=nl(al,n,r,"TestLoadImage: loaded",!0,e),r.onerror=nl(al,n,r,"TestLoadImage: error",!1,e),r.onabort=nl(al,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=nl(al,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function al(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function na(t){this.l=t.ec||null,this.j=t.ob||!1}Pe(na,jg);na.prototype.g=function(){return new bl(this.l,this.j)};na.prototype.i=function(t){return function(){return t}}({});function bl(t,e){Ne.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=qg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pe(bl,Ne);var qg=0;E=bl.prototype;E.open=function(t,e){if(this.readyState!=qg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Qo(this)};E.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||k).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=qg};E.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Qo(this)),this.g&&(this.readyState=3,Qo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof k.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;w0(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function w0(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}E.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ra(this):Qo(this),this.readyState==3&&w0(this)}};E.Za=function(t){this.g&&(this.response=this.responseText=t,ra(this))};E.Ya=function(t){this.g&&(this.response=t,ra(this))};E.ka=function(){this.g&&ra(this)};function ra(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Qo(t)}E.setRequestHeader=function(t,e){this.v.append(t,e)};E.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};E.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Qo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var vL=k.JSON.parse;function ve(t){Ne.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=I0,this.L=this.M=!1}Pe(ve,Ne);var I0="",_L=/^https?$/i,wL=["POST","PUT"];E=ve.prototype;E.Oa=function(t){this.M=t};E.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ig.g(),this.C=this.u?RC(this.u):RC(Ig),this.g.onreadystatechange=We(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){NC(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=k.FormData&&t instanceof k.FormData,!(0<=LC(wL,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{C0(this),0<this.B&&((this.L=IL(this.g))?(this.g.timeout=this.B,this.g.ontimeout=We(this.ua,this)):this.A=Ug(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){NC(this,s)}};function IL(t){return ss&&typeof t.timeout=="number"&&t.ontimeout!==void 0}E.ua=function(){typeof Sg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))};function NC(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,E0(t),Al(t)}function E0(t){t.F||(t.F=!0,Ue(t,"complete"),Ue(t,"error"))}E.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),Al(this))};E.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Al(this,!0)),ve.$.N.call(this)};E.La=function(){this.s||(this.G||this.v||this.l?D0(this):this.kb())};E.kb=function(){D0(this)};function D0(t){if(t.h&&typeof Sg<"u"&&(!t.C[1]||hn(t)!=4||t.da()!=2)){if(t.v&&hn(t)==4)Ug(t.La,0,t);else if(Ue(t,"readystatechange"),hn(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(d0)[1]||null;!i&&k.self&&k.self.location&&(i=k.self.location.protocol.slice(0,-1)),r=!_L.test(i?i.toLowerCase():"")}n=r}if(n)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var s=2<hn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",E0(t)}}finally{Al(t)}}}}function Al(t,e){if(t.g){C0(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=r}catch{}}}function C0(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(k.clearTimeout(t.A),t.A=null)}E.isActive=function(){return!!this.g};function hn(t){return t.g?t.g.readyState:0}E.da=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}};E.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};E.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),vL(e)}};function PC(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case I0:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function EL(t){let e={};t=(t.g&&2<=hn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if($o(t[r]))continue;var n=KF(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}qF(e,function(r){return r.join(", ")})}E.Ia=function(){return this.m};E.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function T0(t){let e="";return xg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function zg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=T0(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):he(t,e,n))}function Lo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function b0(t){this.Ga=0,this.j=[],this.l=new wl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lo("baseRetryDelayMs",5e3,t),this.hb=Lo("retryDelaySeedMs",1e4,t),this.eb=Lo("forwardChannelMaxRetries",2,t),this.xa=Lo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new g0(t&&t.concurrentRequestLimit),this.Ja=new gL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}E=b0.prototype;E.ra=8;E.H=1;function Gg(t){if(A0(t),t.H==3){var e=t.W++,n=jn(t.I);if(he(n,"SID",t.K),he(n,"RID",e),he(n,"TYPE","terminate"),ia(t,n),e=new ea(t,t.l,e),e.L=2,e.A=Tl(jn(n)),n=!1,k.navigator&&k.navigator.sendBeacon)try{n=k.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&k.Image&&(new Image().src=e.A,n=!0),n||(e.g=k0(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ta(e)}P0(t)}function Sl(t){t.g&&(Kg(t),t.g.cancel(),t.g=null)}function A0(t){Sl(t),t.u&&(k.clearTimeout(t.u),t.u=null),dl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&k.clearTimeout(t.m),t.m=null)}function Rl(t){if(!m0(t.i)&&!t.m){t.m=!0;var e=t.Na;qo||QC(),zo||(qo(),zo=!0),Lg.add(e,t),t.C=0}}function DL(t,e){return y0(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Zo(We(t.Na,t,e),N0(t,t.C)),t.C++,!0)}E.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new ea(this,this.l,t),s=this.s;if(this.U&&(s?(s=BC(s),$C(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=S0(this,i,e),n=jn(this.I),he(n,"RID",t),he(n,"CVER",22),this.F&&he(n,"X-HTTP-Session-Id",this.F),ia(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(T0(s)))+"&"+e:this.o&&zg(n,this.o,s)),Hg(this.i,i),this.bb&&he(n,"TYPE","init"),this.P?(he(n,"$req",e),he(n,"SID","null"),i.aa=!0,Dg(i,n,null)):Dg(i,n,e),this.H=2}}else this.H==3&&(t?OC(this,t):this.j.length==0||m0(this.i)||OC(this))};function OC(t,e){var n;e?n=e.m:n=t.W++;let r=jn(t.I);he(r,"SID",t.K),he(r,"RID",n),he(r,"AID",t.V),ia(t,r),t.o&&t.s&&zg(r,t.o,t.s),n=new ea(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=S0(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Hg(t.i,n),Dg(n,r,e)}function ia(t,e){t.na&&xg(t.na,function(n,r){he(e,r,n)}),t.h&&l0({},function(n,r){he(e,r,n)})}function S0(t,e,n){n=Math.min(t.j.length,n);var r=t.h?We(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{mL(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function R0(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;qo||QC(),zo||(qo(),zo=!0),Lg.add(e,t),t.A=0}}function Wg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Zo(We(t.Ma,t),N0(t,t.A)),t.A++,!0)}E.Ma=function(){if(this.u=null,M0(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Zo(We(this.jb,this),t)}};E.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rt(10),Sl(this),M0(this))};function Kg(t){t.B!=null&&(k.clearTimeout(t.B),t.B=null)}function M0(t){t.g=new ea(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=jn(t.wa);he(e,"RID","rpc"),he(e,"SID",t.K),he(e,"AID",t.V),he(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&he(e,"TO",t.qa),he(e,"TYPE","xmlhttp"),ia(t,e),t.o&&t.s&&zg(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Tl(jn(e)),n.u=null,n.S=!0,o0(n,t)}E.ib=function(){this.v!=null&&(this.v=null,Sl(this),Wg(this),rt(19))};function dl(t){t.v!=null&&(k.clearTimeout(t.v),t.v=null)}function x0(t,e){var n=null;if(t.g==e){dl(t),Kg(t),t.g=null;var r=2}else if(Tg(t.i,e))n=e.F,v0(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Il(),Ue(r,new t0(r,n)),Rl(t)}else R0(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&DL(t,e)||r==2&&Wg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Qr(t,5);break;case 4:Qr(t,10);break;case 3:Qr(t,6);break;default:Qr(t,2)}}}function N0(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Qr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=We(t.pb,t);n||(n=new Yr("//www.google.com/images/cleardot.gif"),k.location&&k.location.protocol=="http"||ul(n,"https"),Tl(n)),yL(n.toString(),r)}else rt(2);t.H=0,t.h&&t.h.za(e),P0(t),A0(t)}E.pb=function(t){t?(this.l.info("Successfully pinged google.com"),rt(2)):(this.l.info("Failed to ping google.com"),rt(1))};function P0(t){if(t.H=0,t.ma=[],t.h){let e=_0(t.i);(e.length!=0||t.j.length!=0)&&(TC(t.ma,e),TC(t.ma,t.j),t.i.i.length=0,Rg(t.j),t.j.length=0),t.h.ya()}}function O0(t,e,n){var r=n instanceof Yr?jn(n):new Yr(n);if(r.g!="")e&&(r.g=e+"."+r.g),ll(r,r.m);else{var i=k.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Yr(null);r&&ul(s,r),e&&(s.g=e),i&&ll(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&he(r,n,e),he(r,"VER",t.ra),ia(t,r),r}function k0(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new ve(new na({ob:n})):new ve(t.va),e.Oa(t.J),e}E.isActive=function(){return!!this.h&&this.h.isActive(this)};function F0(){}E=F0.prototype;E.Ba=function(){};E.Aa=function(){};E.za=function(){};E.ya=function(){};E.isActive=function(){return!0};E.Va=function(){};function hl(){if(ss&&!(10<=Number(jF)))throw Error("Environmental error: no available transport.")}hl.prototype.g=function(t,e){return new It(t,e)};function It(t,e){Ne.call(this),this.g=new b0(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$o(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$o(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new as(this)}Pe(It,Ne);It.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;rt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=O0(t,null,t.Y),Rl(t)};It.prototype.close=function(){Gg(this.g)};It.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Fg(t),t=n);e.j.push(new hL(e.fb++,t)),e.H==3&&Rl(e)};It.prototype.N=function(){this.g.h=null,delete this.j,Gg(this.g),delete this.g,It.$.N.call(this)};function L0(t){Bg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Pe(L0,Bg);function V0(){$g.call(this),this.status=1}Pe(V0,$g);function as(t){this.g=t}Pe(as,F0);as.prototype.Ba=function(){Ue(this.g,"a")};as.prototype.Aa=function(t){Ue(this.g,new L0(t))};as.prototype.za=function(t){Ue(this.g,new V0)};as.prototype.ya=function(){Ue(this.g,"b")};function CL(){this.blockSize=-1}function Qt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Pe(Qt,CL);Qt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function dg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Qt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)dg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){dg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){dg(this,r),i=0;break}}this.h=i,this.i+=e};Qt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ae(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var TL={};function Qg(t){return-128<=t&&128>t?LF(t,function(e){return new ae([e|0],0>e?-1:0)}):new ae([t|0],0>t?-1:0)}function fn(t){if(isNaN(t)||!isFinite(t))return is;if(0>t)return Ve(fn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=bg;return new ae(e,0)}function U0(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ve(U0(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=fn(Math.pow(e,8)),r=is,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=fn(Math.pow(e,s)),r=r.R(s).add(fn(o))):(r=r.R(n),r=r.add(fn(o)))}return r}var bg=4294967296,is=Qg(0),Ag=Qg(1),kC=Qg(16777216);E=ae.prototype;E.ea=function(){if(Nt(this))return-Ve(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:bg+r)*e,e*=bg}return t};E.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Un(this))return"0";if(Nt(this))return"-"+Ve(this).toString(t);for(var e=fn(Math.pow(t,6)),n=this,r="";;){var i=pl(n,e).g;n=fl(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Un(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};E.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Un(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Nt(t){return t.h==-1}E.X=function(t){return t=fl(this,t),Nt(t)?-1:Un(t)?0:1};function Ve(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ae(n,~t.h).add(Ag)}E.abs=function(){return Nt(this)?Ve(this):this};E.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ae(n,n[n.length-1]&-2147483648?-1:0)};function fl(t,e){return t.add(Ve(e))}E.R=function(t){if(Un(this)||Un(t))return is;if(Nt(this))return Nt(t)?Ve(this).R(Ve(t)):Ve(Ve(this).R(t));if(Nt(t))return Ve(this.R(Ve(t)));if(0>this.X(kC)&&0>t.X(kC))return fn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,cl(n,2*r+2*i),n[2*r+2*i+1]+=s*c,cl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,cl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,cl(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ae(n,0)};function cl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Vo(t,e){this.g=t,this.h=e}function pl(t,e){if(Un(e))throw Error("division by zero");if(Un(t))return new Vo(is,is);if(Nt(t))return e=pl(Ve(t),e),new Vo(Ve(e.g),Ve(e.h));if(Nt(e))return e=pl(t,Ve(e)),new Vo(Ve(e.g),e.h);if(30<t.g.length){if(Nt(t)||Nt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Ag,r=e;0>=r.X(t);)n=FC(n),r=FC(r);var i=ns(n,1),s=ns(r,1);for(r=ns(r,2),n=ns(n,2);!Un(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=ns(r,1),n=ns(n,1)}return e=fl(t,i.R(e)),new Vo(i,e)}for(i=is;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=fn(n),o=s.R(e);Nt(o)||0<o.X(t);)n-=r,s=fn(n),o=s.R(e);Un(s)&&(s=Ag),i=i.add(s),t=fl(t,o)}return new Vo(i,t)}E.gb=function(t){return pl(this,t).h};E.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ae(n,this.h&t.h)};E.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ae(n,this.h|t.h)};E.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ae(n,this.h^t.h)};function FC(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ae(n,t.h)}function ns(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ae(i,t.h)}hl.prototype.createWebChannel=hl.prototype.g;It.prototype.send=It.prototype.u;It.prototype.open=It.prototype.m;It.prototype.close=It.prototype.close;El.NO_ERROR=0;El.TIMEOUT=8;El.HTTP_ERROR=6;n0.COMPLETE="complete";r0.EventType=Xo;Xo.OPEN="a";Xo.CLOSE="b";Xo.ERROR="c";Xo.MESSAGE="d";Ne.prototype.listen=Ne.prototype.O;ve.prototype.listenOnce=ve.prototype.P;ve.prototype.getLastError=ve.prototype.Sa;ve.prototype.getLastErrorCode=ve.prototype.Ia;ve.prototype.getStatus=ve.prototype.da;ve.prototype.getResponseJson=ve.prototype.Wa;ve.prototype.getResponseText=ve.prototype.ja;ve.prototype.send=ve.prototype.ha;ve.prototype.setWithCredentials=ve.prototype.Oa;Qt.prototype.digest=Qt.prototype.l;Qt.prototype.reset=Qt.prototype.reset;Qt.prototype.update=Qt.prototype.j;ae.prototype.add=ae.prototype.add;ae.prototype.multiply=ae.prototype.R;ae.prototype.modulo=ae.prototype.gb;ae.prototype.compare=ae.prototype.X;ae.prototype.toNumber=ae.prototype.ea;ae.prototype.toString=ae.prototype.toString;ae.prototype.getBits=ae.prototype.D;ae.fromNumber=fn;ae.fromString=U0;var j0=Yt.createWebChannelTransport=function(){return new hl},B0=Yt.getStatEventTarget=function(){return Il()},Ml=Yt.ErrorCode=El,$0=Yt.EventType=n0,H0=Yt.Event=Jr,Yg=Yt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zW=Yt.FetchXmlHttpFactory=na,sa=Yt.WebChannel=r0,q0=Yt.XhrIo=ve,z0=Yt.Md5=Qt,Zr=Yt.Integer=ae;var G0="@firebase/firestore";var Oe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");var Ns="10.9.0";var si=new an("@firebase/firestore");function oa(){return si.logLevel}function D(t,...e){if(si.logLevel<=W.DEBUG){let n=e.map(ky);si.debug(`Firestore (${Ns}): ${t}`,...n)}}function wn(t,...e){if(si.logLevel<=W.ERROR){let n=e.map(ky);si.error(`Firestore (${Ns}): ${t}`,...n)}}function gs(t,...e){if(si.logLevel<=W.WARN){let n=e.map(ky);si.warn(`Firestore (${Ns}): ${t}`,...n)}}function ky(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: `+t;throw wn(e),new Error(e)}function le(t,e){t||x()}function V(t,e){return t}var y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},T=class extends wt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var mn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var kl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Oe.UNAUTHENTICATED))}shutdown(){}},nm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},rm=class{constructor(e){this.t=e,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new kl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Oe(e)}},im=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},sm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new im(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},om=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},am=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new om(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function bL(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Fl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=bL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function ms(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var je=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var U=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new je(0,0))}static max(){return new t(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ll=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},we=class t extends Ll{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new T(y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},AL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class t extends Ll{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return AL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new T(y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new T(y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new T(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new T(y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var M=class t{constructor(e){this.path=e}static fromPath(e){return new t(we.fromString(e))}static fromName(e){return new t(we.fromString(e).popFirst(5))}static empty(){return new t(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new we(e.slice()))}};var cm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};cm.UNKNOWN_ID=-1;function SL(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=U.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new oi(i,M.empty(),e)}function RL(t){return new oi(t.readTime,t.key,-1)}var oi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(U.min(),M.empty(),-1)}static max(){return new t(U.max(),M.empty(),-1)}};function ML(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var xL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",um=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ia(t){return p(this,null,function*(){if(t.code!==y.FAILED_PRECONDITION||t.message!==xL)throw t;D("LocalStore","Unexpectedly lost primary lease")})}var v=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var lm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new mn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ri(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Fy(r.target.error);this.V.reject(new ri(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new ri(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new hm(n)}},Vl=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Ge())===12.2&&wn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),Xr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ou())return!1;if(t.C())return!0;let e=Ge(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(D("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new ri(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new T(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new T(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ri(e,o))},i.onupgradeneeded=s=>{D("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{D("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=lm.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),v.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(D("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},dm=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Xr(this.k.delete())}},ri=class extends T{constructor(e,n){super(y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Ea(t){return t.name==="IndexedDbTransactionError"}var hm=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(D("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xr(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),Xr(this.store.add(e))}get(e){return Xr(this.store.get(e)).next(n=>(n===void 0&&(n=null),D("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),Xr(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),Xr(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new v((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new v((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){D("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new v((r,i)=>{n.onerror=s=>{let o=Fy(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new v((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new dm(a),u=n(a.primaryKey,a.value,c);if(u instanceof v){let l=u.catch(d=>(c.done(),v.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>v.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Xr(t){return new v((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Fy(r.target.error);n(i)}})}var W0=!1;function Fy(t){let e=Vl.S(Ge());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return W0||(W0=!0,setTimeout(()=>{throw r},0)),r}}return t}var CT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function gd(t){return t==null}function ha(t){return t===0&&1/t==-1/0}function NL(t){return typeof t=="number"&&Number.isInteger(t)&&!ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var PL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],e9=[...PL,"documentOverlays"],OL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kL=OL,t9=[...kL,"indexConfiguration","indexState","indexEntries"];function K0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ui(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ie=class t{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ds(this.root,e,this.comparator,!0)}},ds=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,s){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class t{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ul(this.data.getIterator())}getIteratorFrom(e){return new Ul(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ul=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var gn=class t{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ye(Et.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var jl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var it=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};it.EMPTY_BYTE_STRING=new it("");var FL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(t){if(le(!!t),typeof t=="string"){let e=0,n=FL.exec(t);if(le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}function Ly(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vy(t){let e=t.mapValue.fields.__previous_value__;return Ly(e)?Vy(e):e}function fa(t){let e=ur(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var fm=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Bl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ly(t)?4:bT(t)?9007199254740991:10:x()}function In(t,e){if(t===e)return!0;let n=ai(t);if(n!==ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fa(t).isEqual(fa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ur(i.timestampValue),a=ur(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return lr(i.bytesValue).isEqual(lr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return _e(i.geoPointValue.latitude)===_e(s.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _e(i.integerValue)===_e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=_e(i.doubleValue),a=_e(s.doubleValue);return o===a?ha(o)===ha(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ms(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(K0(o)!==K0(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!In(o[c],a[c])))return!1;return!0}(t,e);default:return x()}}function pa(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function ys(t,e){if(t===e)return 0;let n=ai(t),r=ai(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=_e(s.integerValue||s.doubleValue),c=_e(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Q0(t.timestampValue,e.timestampValue);case 4:return Q0(fa(t),fa(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,o){let a=lr(s),c=lr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=re(a[u],c[u]);if(l!==0)return l}return re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=re(_e(s.latitude),_e(o.latitude));return a!==0?a:re(_e(s.longitude),_e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=ys(a[u],c[u]);if(l)return l}return re(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===xl.mapValue&&o===xl.mapValue)return 0;if(s===xl.mapValue)return 1;if(o===xl.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=re(c[d],l[d]);if(h!==0)return h;let f=ys(a[c[d]],u[l[d]]);if(f!==0)return f}return re(c.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function Q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=ur(t),r=ur(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function vs(t){return pm(t)}function pm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return M.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=pm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${pm(n.fields[o])}`;return i+"}"}(t.mapValue):x()}function gm(t){return!!t&&"integerValue"in t}function Uy(t){return!!t&&"arrayValue"in t}function Y0(t){return!!t&&"nullValue"in t}function J0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function ca(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ca(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ca(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ca(n)}setAll(e){let n=Et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ca(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ui(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ca(this.value))}};function AT(t){let e=[];return ui(t.fields,(n,r)=>{let i=new Et([n]);if(Pl(r)){let s=AT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new gn(e)}var Jt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,U.min(),U.min(),U.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,U.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,U.min(),U.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,U.min(),U.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(U.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _s=class{constructor(e,n){this.position=e,this.inclusive=n}};function Z0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=M.comparator(M.fromName(o.referenceValue),n.key):r=ys(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function X0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}var ws=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function LL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var $l=class{},Re=class t extends $l{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ym(e,n,r):n==="array-contains"?new wm(e,r):n==="in"?new Im(e,r):n==="not-in"?new Em(e,r):n==="array-contains-any"?new Dm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vm(e,r):new _m(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ys(n,this.value)):n!==null&&ai(this.value)===ai(n)&&this.matchesComparison(ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},En=class t extends $l{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return ST(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function ST(t){return t.op==="and"}function RT(t){return VL(t)&&ST(t)}function VL(t){for(let e of t.filters)if(e instanceof En)return!1;return!0}function mm(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+vs(t.value);if(RT(t))return t.filters.map(e=>mm(e)).join(",");{let e=t.filters.map(n=>mm(n)).join(",");return`${t.op}(${e})`}}function MT(t,e){return t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&In(r.value,i.value)}(t,e):t instanceof En?function(r,i){return i instanceof En&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&MT(o,i.filters[a]),!0):!1}(t,e):void x()}function xT(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${vs(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(xT).join(" ,")+"}"}(t):"Filter"}var ym=class extends Re{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){let n=M.comparator(e.key,this.key);return this.matchesComparison(n)}},vm=class extends Re{constructor(e,n){super(e,"in",n),this.keys=NT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},_m=class extends Re{constructor(e,n){super(e,"not-in",n),this.keys=NT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function NT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}var wm=class extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Uy(n)&&pa(n.arrayValue,this.value)}},Im=class extends Re{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&pa(this.value.arrayValue,n)}},Em=class extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!pa(this.value.arrayValue,n)}},Dm=class extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Uy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pa(this.value.arrayValue,r))}};var Cm=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function eT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Cm(t,e,n,r,i,s,o)}function jy(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),gd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vs(r)).join(",")),e.ce=n}return e.ce}function By(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!X0(t.startAt,e.startAt)&&X0(t.endAt,e.endAt)}function Tm(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Is=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function UL(t,e,n,r,i,s,o,a){return new Is(t,e,n,r,i,s,o,a)}function $y(t){return new Is(t)}function tT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jL(t){return t.collectionGroup!==null}function ua(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ye(Et.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new ws(s,r))}),n.has(Et.keyField().canonicalString())||e.le.push(new ws(Et.keyField(),r))}return e.le}function vn(t){let e=V(t);return e.he||(e.he=BL(e,ua(t))),e.he}function BL(t,e){if(t.limitType==="F")return eT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ws(i.field,s)});let n=t.endAt?new _s(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _s(t.startAt.position,t.startAt.inclusive):null;return eT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bm(t,e,n){return new Is(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function md(t,e){return By(vn(t),vn(e))&&t.limitType===e.limitType}function PT(t){return`${jy(vn(t))}|lt:${t.limitType}`}function cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>xT(i)).join(", ")}]`),gd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vs(i)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function yd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):M.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ua(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=Z0(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,ua(r),i)||r.endAt&&!function(o,a,c){let u=Z0(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,ua(r),i))}(t,e)}function $L(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OT(t){return(e,n)=>{let r=!1;for(let i of ua(t)){let s=HL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function HL(t,e,n){let r=t.field.isKeyField()?M.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?ys(c,u):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var dr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ui(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return TT(this.inner)}size(){return this.innerSize}};var qL=new Ie(M.comparator);function Bn(){return qL}var kT=new Ie(M.comparator);function aa(...t){let e=kT;for(let n of t)e=e.insert(n.key,n);return e}function FT(t){let e=kT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ei(){return la()}function LT(){return la()}function la(){return new dr(t=>t.toString(),(t,e)=>t.isEqual(e))}var zL=new Ie(M.comparator),GL=new Ye(M.comparator);function Y(...t){let e=GL;for(let n of t)e=e.add(n);return e}var WL=new Ye(re);function KL(){return WL}function VT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ha(e)?"-0":e}}function UT(t){return{integerValue:""+t}}function QL(t,e){return NL(e)?UT(e):VT(t,e)}var Es=class{constructor(){this._=void 0}};function YL(t,e,n){return t instanceof Ds?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ly(s)&&(s=Vy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof hr?BT(t,e):t instanceof ci?$T(t,e):function(i,s){let o=jT(i,s),a=nT(o)+nT(i.Ie);return gm(o)&&gm(i.Ie)?UT(a):VT(i.serializer,a)}(t,e)}function JL(t,e,n){return t instanceof hr?BT(t,e):t instanceof ci?$T(t,e):n}function jT(t,e){return t instanceof Cs?function(r){return gm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ds=class extends Es{},hr=class extends Es{constructor(e){super(),this.elements=e}};function BT(t,e){let n=HT(e);for(let r of t.elements)n.some(i=>In(i,r))||n.push(r);return{arrayValue:{values:n}}}var ci=class extends Es{constructor(e){super(),this.elements=e}};function $T(t,e){let n=HT(e);for(let r of t.elements)n=n.filter(i=>!In(i,r));return{arrayValue:{values:n}}}var Cs=class extends Es{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function nT(t){return _e(t.integerValue||t.doubleValue)}function HT(t){return Uy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Am=class{constructor(e,n){this.field=e,this.transform=n}};function ZL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hr&&i instanceof hr||r instanceof ci&&i instanceof ci?ms(r.elements,i.elements,In):r instanceof Cs&&i instanceof Cs?In(r.Ie,i.Ie):r instanceof Ds&&i instanceof Ds}(t.transform,e.transform)}var Sm=class{constructor(e,n){this.version=e,this.transformResults=n}},ii=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ol(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ts=class{};function qT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hl(t.key,ii.none()):new bs(t.key,t.data,ii.none());{let n=t.data,r=Pt.empty(),i=new Ye(Et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new $n(t.key,r,new gn(i.toArray()),ii.none())}}function XL(t,e,n){t instanceof bs?function(i,s,o){let a=i.value.clone(),c=iT(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $n?function(i,s,o){if(!Ol(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=iT(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(zT(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function da(t,e,n,r){return t instanceof bs?function(s,o,a,c){if(!Ol(s.precondition,o))return a;let u=s.value.clone(),l=sT(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof $n?function(s,o,a,c){if(!Ol(s.precondition,o))return a;let u=sT(s.fieldTransforms,c,o),l=o.data;return l.setAll(zT(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Ol(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function eV(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=jT(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function rT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ms(r,i,(s,o)=>ZL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var bs=class extends Ts{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},$n=class extends Ts{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function zT(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function iT(t,e,n){let r=new Map;le(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,JL(o,a,n[i]))}return r}function sT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,YL(s,o,e))}return r}var Hl=class extends Ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Rm=class extends Ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Mm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&XL(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=LT();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=qT(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(U.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Y())}isEqual(e){return this.batchId===e.batchId&&ms(this.mutations,e.mutations,(n,r)=>rT(n,r))&&ms(this.baseMutations,e.baseMutations,(n,r)=>rT(n,r))}},xm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){le(e.mutations.length===r.length);let i=function(){return zL}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Nm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Pm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var be,X;function tV(t){switch(t){default:return x();case y.CANCELLED:case y.UNKNOWN:case y.DEADLINE_EXCEEDED:case y.RESOURCE_EXHAUSTED:case y.INTERNAL:case y.UNAVAILABLE:case y.UNAUTHENTICATED:return!1;case y.INVALID_ARGUMENT:case y.NOT_FOUND:case y.ALREADY_EXISTS:case y.PERMISSION_DENIED:case y.FAILED_PRECONDITION:case y.ABORTED:case y.OUT_OF_RANGE:case y.UNIMPLEMENTED:case y.DATA_LOSS:return!0}}function GT(t){if(t===void 0)return wn("GRPC error has no .code"),y.UNKNOWN;switch(t){case be.OK:return y.OK;case be.CANCELLED:return y.CANCELLED;case be.UNKNOWN:return y.UNKNOWN;case be.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case be.INTERNAL:return y.INTERNAL;case be.UNAVAILABLE:return y.UNAVAILABLE;case be.UNAUTHENTICATED:return y.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case be.NOT_FOUND:return y.NOT_FOUND;case be.ALREADY_EXISTS:return y.ALREADY_EXISTS;case be.PERMISSION_DENIED:return y.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case be.ABORTED:return y.ABORTED;case be.OUT_OF_RANGE:return y.OUT_OF_RANGE;case be.UNIMPLEMENTED:return y.UNIMPLEMENTED;case be.DATA_LOSS:return y.DATA_LOSS;default:return x()}}(X=be||(be={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var oT=null;function nV(){return new TextEncoder}var rV=new Zr([4294967295,4294967295],0);function aT(t){let e=nV().encode(t),n=new z0;return n.update(e),new Uint8Array(n.digest())}function cT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([i,s],0)]}var Om=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ti(`Invalid padding: ${n}`);if(r<0)throw new ti(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ti(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ti(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Zr.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Zr.fromNumber(r)));return i.compare(rV)===1&&(i=new Zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=aT(e),[r,i]=cT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=aT(e),[r,i]=cT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ti=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ql=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(U.min(),i,new Ie(re),Bn(),Y())}},ga=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Y(),Y(),Y())}};var hs=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},zl=class{constructor(e,n){this.targetId=e,this.fe=n}},Gl=class{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Wl=class{constructor(){this.ge=0,this.pe=lT(),this.ye=it.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Y(),n=Y(),r=Y();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new ga(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=lT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,le(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},km=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=Bn(),this.Qe=uT(),this.Ke=new Ie(re)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Tm(s))if(r===0){let o=new M(s.path);this.We(n,o,Jt.newNoDocument(o,U.min()))}else le(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}oT?.tt(function(l,d,h,f,g){var _,m,w,F,H,j;let Ee={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},ee=d.unchangedNames;return ee&&(Ee.bloomFilter={applied:g===0,hashCount:(_=ee?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(F=(w=(m=ee?.bits)===null||m===void 0?void 0:m.bitmap)===null||w===void 0?void 0:w.length)!==null&&F!==void 0?F:0,padding:(j=(H=ee?.bits)===null||H===void 0?void 0:H.padding)!==null&&j!==void 0?j:0,mightContain:Me=>{var Zt;return(Zt=f?.mightContain(Me))!==null&&Zt!==void 0&&Zt}}),Ee}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=lr(r).toUint8Array()}catch(c){if(c instanceof jl)return gs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Om(o,i,s)}catch(c){return gs(c instanceof ti?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Tm(a.target)){let c=new M(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Jt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Y();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new ql(e,n,this.Ke,this.qe,r);return this.qe=Bn(),this.Qe=uT(),this.Ke=new Ie(re),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Wl,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ye(re),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Wl),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function uT(){return new Ie(M.comparator)}function lT(){return new Ie(M.comparator)}var iV={asc:"ASCENDING",desc:"DESCENDING"},sV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oV={and:"AND",or:"OR"},Fm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Lm(t,e){return t.useProto3Json||gd(e)?e:{value:e}}function Kl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aV(t,e){return Kl(t,e.toTimestamp())}function _n(t){return le(!!t),U.fromTimestamp(function(n){let r=ur(n);return new je(r.seconds,r.nanos)}(t))}function Hy(t,e){return Vm(t,e).canonicalString()}function Vm(t,e){let n=function(i){return new we(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KT(t){let e=we.fromString(t);return le(XT(e)),e}function Um(t,e){return Hy(t.databaseId,e.path)}function Jg(t,e){let n=KT(e);if(n.get(1)!==t.databaseId.projectId)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(YT(n))}function QT(t,e){return Hy(t.databaseId,e)}function cV(t){let e=KT(t);return e.length===4?we.emptyPath():YT(e)}function jm(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YT(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dT(t,e,n){return{name:Um(t,e),fields:n.value.mapValue.fields}}function uV(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(le(l===void 0||typeof l=="string"),it.fromBase64String(l||"")):(le(l===void 0||l instanceof Uint8Array),it.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?y.UNKNOWN:GT(u.code);return new T(l,u.message||"")}(o);n=new Gl(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Jg(t,r.document.name),s=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):U.min(),a=new Pt({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new hs(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Jg(t,r.document),s=r.readTime?_n(r.readTime):U.min(),o=Jt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new hs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Jg(t,r.document),s=r.removedTargetIds||[];n=new hs([],s,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Pm(i,s),a=r.targetId;n=new zl(a,o)}}return n}function lV(t,e){let n;if(e instanceof bs)n={update:dT(t,e.key,e.value)};else if(e instanceof Hl)n={delete:Um(t,e.key)};else if(e instanceof $n)n={update:dT(t,e.key,e.data),updateMask:_V(e.fieldMask)};else{if(!(e instanceof Rm))return x();n={verify:Um(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ds)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ci)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cs)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:aV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:x()}(t,e.precondition)),n}function dV(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?_n(i.updateTime):_n(s);return o.isEqual(U.min())&&(o=_n(s)),new Sm(o,i.transformResults||[])}(n,e))):[]}function hV(t,e){return{documents:[QT(t,e.path)]}}function fV(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QT(t,i);let s=function(u){if(u.length!==0)return ZT(En.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:us(h.field),direction:mV(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Lm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function pV(t){let e=cV(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){le(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=JT(d);return h instanceof En&&RT(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new ws(ls(g.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,gd(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new _s(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new _s(f,h)}(n.endAt)),UL(e,i,o,s,a,"F",c,u)}function gV(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ls(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ls(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ls(n.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ls(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return Re.create(ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(r=>JT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function mV(t){return iV[t]}function yV(t){return sV[t]}function vV(t){return oV[t]}function us(t){return{fieldPath:t.canonicalString()}}function ls(t){return Et.fromServerFormat(t.fieldPath)}function ZT(t){return t instanceof Re?function(n){if(n.op==="=="){if(J0(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NAN"}};if(Y0(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J0(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NAN"}};if(Y0(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(n.field),op:yV(n.op),value:n.value}}}(t):t instanceof En?function(n){let r=n.getFilters().map(i=>ZT(i));return r.length===1?r[0]:{compositeFilter:{op:vV(n.op),filters:r}}}(t):x()}function _V(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ma=class t{constructor(e,n,r,i,s=U.min(),o=U.min(),a=it.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Bm=class{constructor(e){this.ct=e}};function wV(t){let e=pV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bm(e,e.limit,"L"):e}var Ql=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ha(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(lr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?bT(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),M.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ql.bt=new Ql;var $m=class{constructor(){this._n=new Hm}addToCollectionParentIndex(e,n){return this._n.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}deleteAllFieldIndexes(e){return v.resolve()}createTargetIndexes(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(oi.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}},Hm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(we.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(we.comparator)).toArray()}};var r9=new Uint8Array(0);var pn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(41943040,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);var ya=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var qm=class{constructor(){this.changes=new dr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var zm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Gm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&da(r.mutation,i,gn.empty(),je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Y()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Y()){let i=ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=aa();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Y()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Bn(),o=la(),a=function(){return la()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof $n)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),da(l.mutation,u,l.mutation.getFieldMask(),je.now())):o.set(u.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new zm(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=la(),i=new Ie((o,a)=>o-a),s=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||gn.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||Y()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=LT();l.forEach(h=>{if(!s.has(h)){let f=qT(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return M.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(ei()),a=-1,c=s;return o.next(u=>v.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Y())).next(l=>({batchId:a,changes:FT(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=aa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=aa();return this.indexManager.getCollectionParents(e,s).next(a=>v.forEach(a,c=>{let u=function(d,h){return new Is(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Jt.newInvalidDocument(l)))});let a=aa();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&da(l.mutation,u,gn.empty(),je.now()),yd(n,u)&&(a=a.insert(c,u))}),a})}};var Wm=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return v.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_n(i.createTime)}}(n)),v.resolve()}getNamedQuery(e,n){return v.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:wV(i.bundledQuery),readTime:_n(i.readTime)}}(n)),v.resolve()}};var Km=class{constructor(){this.overlays=new Ie(M.comparator),this.hr=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ei();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){let i=ei(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=ei(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=ei(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return v.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Nm(n,r));let s=this.hr.get(n);s===void 0&&(s=Y(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var va=class{constructor(){this.Pr=new Ye(Ae.Ir),this.Tr=new Ye(Ae.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Ae(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ae(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new M(new we([])),r=new Ae(n,e),i=new Ae(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new M(new we([])),r=new Ae(n,e),i=new Ae(n,e+1),s=Y();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ae(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ae=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return M.comparator(e.key,n.key)||re(e.pr,n.pr)}static Er(e,n){return re(e.pr,n.pr)||M.comparator(e.key,n.key)}};var Qm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ye(Ae.Ir)}checkEmpty(e){return v.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Mm(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new Ae(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ae(n,0),i=new Ae(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(re);return n.forEach(i=>{let s=new Ae(i,0),o=new Ae(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),v.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;M.isDocumentKey(s)||(s=s.child(""));let o=new Ae(new M(s),0),a=new Ye(re);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),v.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){le(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return v.forEach(n.mutations,i=>{let s=new Ae(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Ae(n,0),i=this.wr.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,v.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ym=class{constructor(e){this.vr=e,this.docs=function(){return new Ie(M.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Jt.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Bn(),o=n.path,a=new M(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ML(RL(l),r)<=0||(i.has(l.key)||yd(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return v.resolve(s)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Jm(this)}getSize(e){return v.resolve(this.size)}},Jm=class extends qm{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Zm=class{constructor(e){this.persistence=e,this.Mr=new dr(n=>jy(n),By),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Or=0,this.Nr=new va,this.targetCount=0,this.Lr=ya.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),v.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new ya(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.qn(n),v.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),v.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.Nr.containsKey(n))}};var Xm=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new CT(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Zm(this),this.indexManager=new $m,this.remoteDocumentCache=function(i){return new Ym(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Bm(n),this.$r=new Wm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Km,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Qm(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);let i=new ey(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return v.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},ey=class extends um{constructor(e){super(),this.currentSequenceNumber=e}},ty=class t{constructor(e){this.persistence=e,this.zr=new va,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),v.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Jr,r=>{let i=M.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,U.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return v.or([()=>v.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var ny=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Y(),i=Y();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var ry=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var iy=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return qD()?8:Vl.v(Ge())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new ry;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(oa()<=W.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),v.resolve()):(oa()<=W.DEBUG&&D("QueryEngine","Query:",cs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(oa()<=W.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):v.resolve())}ji(e,n){if(tT(n))return v.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bm(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Y(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,bm(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return tT(n)||i.isEqual(U.min())?v.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?v.resolve(null):(oa()<=W.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cs(n)),this.es(e,o,n,SL(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ye(OT(e));return n.forEach((i,s)=>{yd(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return oa()<=W.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",cs(n)),this.zi.getDocumentsMatchingQuery(e,n,oi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var sy=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ie(re),this.rs=new dr(s=>jy(s),By),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function IV(t,e,n,r){return new sy(t,e,n,r)}function eb(t,e){return p(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Y();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function EV(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=v.resolve();return h.forEach(g=>{f=f.next(()=>l.getEntry(c,g)).next(_=>{let m=u.docVersions.get(g);le(m!==null),_.version.compareTo(m)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Y();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tb(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function DV(t,e){let n=V(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(it.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(_,m,w){return _.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(s,f))});let c=Bn(),u=Y();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(CV(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(U.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function CV(t,e,n){let r=Y(),i=Y();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Bn();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(U.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function TV(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bV(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,v.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ma(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function oy(t,e,n){return p(this,null,function*(){let r=V(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ea(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function hT(t,e,n){let r=V(t),i=U.min(),s=Y();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=V(c),h=d.rs.get(l);return h!==void 0?v.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,o,vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:U.min(),n?s:Y())).next(a=>(AV(r,$L(e),a),{documents:a,hs:s})))}function AV(t,e,n){let r=t.ss.get(e)||U.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Yl=class{constructor(){this.activeTargetIds=KL()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ay=class{constructor(){this.no=new Yl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Yl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cy=class{io(e){}shutdown(){}};var Jl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nl=null;function Zg(){return Nl===null?Nl=function(){return 268435456+Math.round(2147483648*Math.random())}():Nl++,"0x"+Nl.toString(16)}var SV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uy=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Qe="WebChannelConnection",ly=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=Zg(),c=this.bo(n,r.toUriEncodedString());D("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(D("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw gs("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ns}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=SV[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=Zg();return new Promise((o,a)=>{let c=new q0;c.setWithCredentials(!0),c.listenOnce($0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ml.NO_ERROR:let l=c.getResponseJson();D(Qe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Ml.TIMEOUT:D(Qe,`RPC '${e}' ${s} timed out`),a(new T(y.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:let d=c.getStatus();if(D(Qe,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let g=function(m){let w=m.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(w)>=0?w:y.UNKNOWN}(f.status);a(new T(g,f.message))}else a(new T(y.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new T(y.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{D(Qe,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);D(Qe,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=Zg(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=j0(),a=B0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");D(Qe,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,g=new uy({lo:m=>{f?D(Qe,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(D(Qe,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(Qe,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),_=(m,w,F)=>{m.listen(w,H=>{try{F(H)}catch(j){setTimeout(()=>{throw j},0)}})};return _(d,sa.EventType.OPEN,()=>{f||D(Qe,`RPC '${e}' stream ${i} transport opened.`)}),_(d,sa.EventType.CLOSE,()=>{f||(f=!0,D(Qe,`RPC '${e}' stream ${i} transport closed`),g.Vo())}),_(d,sa.EventType.ERROR,m=>{f||(f=!0,gs(Qe,`RPC '${e}' stream ${i} transport errored:`,m),g.Vo(new T(y.UNAVAILABLE,"The operation could not be completed")))}),_(d,sa.EventType.MESSAGE,m=>{var w;if(!f){let F=m.data[0];le(!!F);let H=F,j=H.error||((w=H[0])===null||w===void 0?void 0:w.error);if(j){D(Qe,`RPC '${e}' stream ${i} received error:`,j);let Ee=j.status,ee=function(yr){let mi=be[yr];if(mi!==void 0)return GT(mi)}(Ee),Me=j.message;ee===void 0&&(ee=y.INTERNAL,Me="Unknown error status: "+Ee+" with message "+j.message),f=!0,g.Vo(new T(ee,Me)),d.close()}else D(Qe,`RPC '${e}' stream ${i} received:`,F),g.mo(F)}}),_(a,H0.STAT_EVENT,m=>{m.stat===Yg.PROXY?D(Qe,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===Yg.NOPROXY&&D(Qe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}};function Xg(){return typeof document<"u"?document:null}function vd(t){return new Fm(t,!0)}var Zl=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var Xl=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Zl(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===y.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new T(y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dy=class extends Xl{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=uV(this.serializer,e),r=function(s){if(!("targetChange"in s))return U.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?U.min():o.readTime?_n(o.readTime):U.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=jm(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Tm(c)?{documents:hV(s,c)}:{query:fV(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WT(s,o.resumeToken);let u=Lm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(U.min())>0){a.readTime=Kl(s,o.snapshotVersion.toTimestamp());let u=Lm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=gV(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=jm(this.serializer),n.removeTarget=e,this.t_(n)}},hy=class extends Xl{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=dV(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.T_(r,n)}return le(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=jm(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>lV(this.serializer,r))};this.t_(n)}};var fy=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Vm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(y.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Vm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new T(y.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var py=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(wn(n),this.g_=!1):D("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var gy=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){li(this)&&(D("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=V(c);u.v_.add(4),yield Da(u),u.x_.set("Unknown"),u.v_.delete(4),yield _d(u)})}(this))}))}),this.x_=new py(r,i)}};function _d(t){return p(this,null,function*(){if(li(t))for(let e of t.F_)yield e(!0)})}function Da(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function nb(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Wy(n)?Gy(n):Ps(n).Jo()&&zy(n,e))}function qy(t,e){let n=V(t),r=Ps(n);n.C_.delete(e),r.Jo()&&rb(n,e),n.C_.size===0&&(r.Jo()?r.Xo():li(n)&&n.x_.set("Unknown"))}function zy(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(U.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ps(t).c_(e)}function rb(t,e){t.O_.Oe(e),Ps(t).l_(e)}function Gy(t){t.O_=new km({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ps(t).start(),t.x_.p_()}function Wy(t){return li(t)&&!Ps(t).Ho()&&t.C_.size>0}function li(t){return V(t).v_.size===0}function ib(t){t.O_=void 0}function RV(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{zy(t,e)})})}function MV(t,e){return p(this,null,function*(){ib(t),Wy(t)?(t.x_.S_(e),Gy(t)):t.x_.set("Unknown")})}function xV(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof Gl&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ed(t,r)}else if(e instanceof hs?t.O_.$e(e):e instanceof zl?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(U.min()))try{let r=yield tb(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(it.EMPTY_BYTE_STRING,l.snapshotVersion)),rb(s,c);let d=new ma(l.target,c,u,l.sequenceNumber);zy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield ed(t,r)}})}function ed(t,e,n){return p(this,null,function*(){if(!Ea(e))throw e;t.v_.add(1),yield Da(t),t.x_.set("Offline"),n||(n=()=>tb(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){D("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield _d(t)}))})}function sb(t,e){return e().catch(n=>ed(t,n,e))}function wd(t){return p(this,null,function*(){let e=V(t),n=fr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;NV(e);)try{let i=yield TV(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,PV(e,i)}catch(i){yield ed(e,i)}ob(e)&&ab(e)})}function NV(t){return li(t)&&t.D_.length<10}function PV(t,e){t.D_.push(e);let n=fr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function ob(t){return li(t)&&!fr(t).Ho()&&t.D_.length>0}function ab(t){fr(t).start()}function OV(t){return p(this,null,function*(){fr(t).d_()})}function kV(t){return p(this,null,function*(){let e=fr(t);for(let n of t.D_)e.I_(n.mutations)})}function FV(t,e,n){return p(this,null,function*(){let r=t.D_.shift(),i=xm.from(r,e,n);yield sb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield wd(t)})}function LV(t,e){return p(this,null,function*(){e&&fr(t).P_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return tV(o)&&o!==y.ABORTED}(i.code)){let s=r.D_.shift();fr(r).Zo(),yield sb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield wd(r)}})}(t,e)),ob(t)&&ab(t)})}function fT(t,e){return p(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");let r=li(n);n.v_.add(3),yield Da(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield _d(n)})}function VV(t,e){return p(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield _d(n)):e||(n.v_.add(2),yield Da(n),n.x_.set("Unknown"))})}function Ps(t){return t.N_||(t.N_=function(n,r,i){let s=V(n);return s.R_(),new dy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:RV.bind(null,t),To:MV.bind(null,t),u_:xV.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),Wy(t)?Gy(t):t.x_.set("Unknown")):(yield t.N_.stop(),ib(t))}))),t.N_}function fr(t){return t.L_||(t.L_=function(n,r,i){let s=V(n);return s.R_(),new hy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:OV.bind(null,t),To:LV.bind(null,t),E_:kV.bind(null,t),T_:FV.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.L_.Zo(),yield wd(t)):(yield t.L_.stop(),t.D_.length>0&&(D("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var my=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ky(t,e){if(wn("AsyncQueue",`${e}: ${t}`),Ea(t))return new T(y.UNAVAILABLE,`${e}: ${t}`);throw t}var td=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=aa(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var nd=class{constructor(){this.B_=new Ie(M.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):x():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},As=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,td.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var yy=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},vy=class{constructor(){this.queries=new dr(e=>PT(e),md),this.onlineState="Unknown",this.W_=new Set}};function UV(t,e){return p(this,null,function*(){let n=V(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new yy,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Ky(o,`Initialization of query '${cs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&Qy(n)})}function jV(t,e){return p(this,null,function*(){let n=V(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function BV(t,e){let n=V(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&Qy(n)}function $V(t,e,n){let r=V(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function Qy(t){t.W_.forEach(e=>{e.next()})}var _y,pT;(pT=_y||(_y={})).j_="default",pT.Cache="cache";var wy=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new As(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=As.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==_y.Cache}};var rd=class{constructor(e){this.key=e}},id=class{constructor(e){this.key=e}},Iy=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Y(),this.mutatedKeys=Y(),this.ha=OT(e),this.Pa=new td(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new nd,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=yd(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?g!==_&&(r.track({type:3,doc:f}),m=!0):this.da(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.ha(f,c)>0||u&&this.ha(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||u)&&(a=!0)),m&&(f?(o=o.add(f),s=_?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((l,d)=>function(f,g){let _=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return _(f)-_(g)}(l.type,d.type)||this.ha(l.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,u=c!==this.ca;return this.ca=c,o.length!==0||u?{snapshot:new As(this.query,e.Pa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new nd,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=Y(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new id(r))}),this.la.forEach(r=>{e.has(r)||n.push(new rd(r))}),n}fa(e){this.ua=e.hs,this.la=Y();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return As.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},Ey=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Dy=class{constructor(e){this.key=e,this.pa=!1}},Cy=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new dr(a=>PT(a),md),this.Sa=new Map,this.ba=new Set,this.Da=new Ie(M.comparator),this.Ca=new Map,this.va=new va,this.Fa={},this.Ma=new Map,this.xa=ya.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function HV(t,e,n=!0){return p(this,null,function*(){let r=fb(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield cb(r,e,n,!0),i})}function qV(t,e){return p(this,null,function*(){let n=fb(t);yield cb(n,e,!0,!1)})}function cb(t,e,n,r){return p(this,null,function*(){let i=yield bV(t.localStore,vn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield zV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&nb(t.remoteStore,i),a})}function zV(t,e,n,r,i){return p(this,null,function*(){t.Na=(d,h,f)=>function(_,m,w,F){return p(this,null,function*(){let H=m.view.Ta(w);H.Xi&&(H=yield hT(_.localStore,m.query,!1).then(({documents:Me})=>m.view.Ta(Me,H)));let j=F&&F.targetChanges.get(m.targetId),Ee=F&&F.targetMismatches.get(m.targetId)!=null,ee=m.view.applyChanges(H,_.isPrimaryClient,j,Ee);return mT(_,m.targetId,ee.Va),ee.snapshot})}(t,d,h,f);let s=yield hT(t.localStore,e,!0),o=new Iy(e,s.hs),a=o.Ta(s.documents),c=ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);mT(t,n,u.Va);let l=new Ey(e,n,o);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot})}function GV(t,e,n){return p(this,null,function*(){let r=V(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!md(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield oy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qy(r.remoteStore,i.targetId),Ty(r,i.targetId)}).catch(Ia))):(Ty(r,i.targetId),yield oy(r.localStore,i.targetId,!0))})}function WV(t,e){return p(this,null,function*(){let n=V(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qy(n.remoteStore,r.targetId))})}function KV(t,e,n){return p(this,null,function*(){let r=tU(t);try{let i=yield function(o,a){let c=V(o),u=je.now(),l=a.reduce((f,g)=>f.add(g.key),Y()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Bn(),_=Y();return c.os.getEntries(f,l).next(m=>{g=m,g.forEach((w,F)=>{F.isValidDocument()||(_=_.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(m=>{d=m;let w=[];for(let F of a){let H=eV(F,d.get(F.key).overlayedDocument);H!=null&&w.push(new $n(F.key,H,AT(H.value.mapValue),ii.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,w,a)}).next(m=>{h=m;let w=m.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(f,m.batchId,w)})}).then(()=>({batchId:h.batchId,changes:FT(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Fa[o.currentUser.toKey()];u||(u=new Ie(re)),u=u.insert(a,c),o.Fa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Ca(r,i.changes),yield wd(r.remoteStore)}catch(i){let s=Ky(i,"Failed to persist write");n.reject(s)}})}function ub(t,e){return p(this,null,function*(){let n=V(t);try{let r=yield DV(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?le(o.pa):i.removedDocuments.size>0&&(le(o.pa),o.pa=!1))}),yield Ca(n,r,e)}catch(r){yield Ia(r)}})}function gT(t,e,n){let r=V(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.G_(a)&&(u=!0)}),u&&Qy(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QV(t,e,n){return p(this,null,function*(){let r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Ie(M.comparator);o=o.insert(s,Jt.newNoDocument(s,U.min()));let a=Y().add(s),c=new ql(U.min(),new Map,new Ie(re),o,a);yield ub(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),Yy(r)}else yield oy(r.localStore,e,!1).then(()=>Ty(r,e,n)).catch(Ia)})}function YV(t,e){return p(this,null,function*(){let n=V(t),r=e.batch.batchId;try{let i=yield EV(n.localStore,e);db(n,r,null),lb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ca(n,i)}catch(i){yield Ia(i)}})}function JV(t,e,n){return p(this,null,function*(){let r=V(t);try{let i=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(le(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);db(r,e,n),lb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ca(r,i)}catch(i){yield Ia(i)}})}function lb(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function db(t,e,n){let r=V(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Ty(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||hb(t,r)})}function hb(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(qy(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),Yy(t))}function mT(t,e,n){for(let r of n)r instanceof rd?(t.va.addReference(r.key,e),ZV(t,r)):r instanceof id?(D("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||hb(t,r.key)):x()}function ZV(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(D("SyncEngine","New document in limbo: "+n),t.ba.add(r),Yy(t))}function Yy(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new M(we.fromString(e)),r=t.xa.next();t.Ca.set(r,new Dy(n)),t.Da=t.Da.insert(n,r),nb(t.remoteStore,new ma(vn($y(n.path)),r,"TargetPurposeLimboResolution",CT._e))}}function Ca(t,e,n){return p(this,null,function*(){let r=V(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=ny.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,u){return p(this,null,function*(){let l=V(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>v.forEach(u,h=>v.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>v.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ea(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),g=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(g);l.ns=l.ns.insert(h,_)}}})}(r.localStore,s))})}function XV(t,e){return p(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());let r=yield eb(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new T(y.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ca(n,r.us)}})}function eU(t,e){let n=V(t),r=n.Ca.get(e);if(r&&r.pa)return Y().add(r.key);{let i=Y(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function fb(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ub.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QV.bind(null,e),e.ya.u_=BV.bind(null,e.eventManager),e.ya.La=$V.bind(null,e.eventManager),e}function tU(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JV.bind(null,e),e}var sd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return IV(this.persistence,new iy,e.initialUser,this.serializer)}createPersistence(e){return new Xm(ty.Hr,this.serializer)}createSharedClientState(e){return new ay}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var by=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XV.bind(null,this.syncEngine),yield VV(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new vy}()}createDatastore(e){let n=vd(e.databaseInfo.databaseId),r=function(s){return new ly(s)}(e.databaseInfo);return function(s,o,a,c){return new fy(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new gy(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gT(this.syncEngine,n,0),function(){return Jl.D()?new Jl:new cy}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Cy(i,s,o,a,c,u);return l&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=V(r);D("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Da(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Ay=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Sy=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Oe.UNAUTHENTICATED,this.clientId=Fl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){D("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ky(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function em(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield eb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function yT(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield rU(t);D("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fT(e.remoteStore,i)),t._onlineComponents=e})}function nU(t){return t.name==="FirebaseError"?t.code===y.FAILED_PRECONDITION||t.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function rU(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield em(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!nU(n))throw n;gs("Error using user provided cache. Falling back to memory cache: "+n),yield em(t,new sd)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield em(t,new sd);return t._offlineComponents})}function pb(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield yT(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield yT(t,new by))),t._onlineComponents})}function iU(t){return pb(t).then(e=>e.syncEngine)}function vT(t){return p(this,null,function*(){let e=yield pb(t),n=e.eventManager;return n.onListen=HV.bind(null,e.syncEngine),n.onUnlisten=GV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WV.bind(null,e.syncEngine),n})}function gb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var _T=new Map;function mb(t,e,n){if(!n)throw new T(y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sU(t,e,n,r){if(e===!0&&r===!0)throw new T(y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wT(t){if(!M.isDocumentKey(t))throw new T(y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function IT(t){if(M.isDocumentKey(t))throw new T(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function fs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Jy(t);throw new T(y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var od=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new T(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ss=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new od({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new od(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tm;switch(r.type){case"firstParty":return new sm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new T(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=_T.get(n);r&&(D("ComponentProvider","Removing Datastore"),_T.delete(n),r.terminate())}(this),Promise.resolve()}};function yb(t,e,n,r={}){var i;let s=(t=fs(t,Ss))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Oe.MOCK_USER;else{a=UD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new T(y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Oe(u)}t._authCredentials=new nm(new kl(a,c))}}var ad=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Dt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},cr=class t extends ad{constructor(e,n,r){super(e,n,$y(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new M(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function vb(t,e,...n){if(t=nt(t),mb("collection","path",e),t instanceof Ss){let r=we.fromString(e,...n);return IT(r),new cr(t,null,r)}{if(!(t instanceof Dt||t instanceof cr))throw new T(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(we.fromString(e,...n));return IT(r),new cr(t.firestore,null,r)}}function _b(t,e,...n){if(t=nt(t),arguments.length===1&&(e=Fl.newId()),mb("doc","path",e),t instanceof Ss){let r=we.fromString(e,...n);return wT(r),new Dt(t,null,new M(r))}{if(!(t instanceof Dt||t instanceof cr))throw new T(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(we.fromString(e,...n));return wT(r),new Dt(t.firestore,t instanceof cr?t.converter:null,new M(r))}}var Ry=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Zl(this,"async_queue_retry"),this.cu=()=>{let n=Xg();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Xg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Xg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new mn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ea(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw wn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=my.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&x()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function ET(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Rs=class extends Ss{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Ry}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Eb(this),this._firestoreClient.terminate()}};function wb(t,e){let n=typeof t=="object"?t:es(),r=typeof t=="string"?t:e||"(default)",i=Ro(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=LD("firestore");s&&yb(i,...s)}return i}function Ib(t){return t._firestoreClient||Eb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Eb(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new fm(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,gb(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Sy(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var _a=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(it.fromBase64String(e))}catch(n){throw new T(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ms=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new T(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var xs=class{constructor(e){this._methodName=e}};var wa=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new T(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new T(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var oU=/^__.*__$/;var cd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $n(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Db(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var ud=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return dd(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(Db(this.Vu)&&oU.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},My=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vd(e)}Cu(e,n,r,i=!1){return new ud({Vu:e,methodName:n,Du:r,path:Et.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function aU(t){let e=t._freezeSettings(),n=vd(t._databaseId);return new My(t._databaseId,!!e.ignoreUndefinedProperties,n)}var ld=class t extends xs{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function cU(t,e,n){return new ud({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var xy=class t extends xs{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){let n=cU(this,e,!0),r=this.vu.map(s=>Ta(s,n)),i=new hr(r);return new Am(e.path,i)}isEqual(e){return e instanceof t&&jr(this.vu,e.vu)}};function uU(t,e,n,r){let i=t.Cu(1,e,n);Tb("Data must be an object, but it was:",i,r);let s=[],o=Pt.empty();ui(r,(c,u)=>{let l=Zy(e,c,n);u=nt(u);let d=i.yu(l);if(u instanceof ld)s.push(l);else{let h=Ta(u,d);h!=null&&(s.push(l),o.set(l,h))}});let a=new gn(s);return new cd(o,a,i.fieldTransforms)}function lU(t,e,n,r,i,s){let o=t.Cu(1,e,n),a=[DT(e,r,n)],c=[i];if(s.length%2!=0)throw new T(y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(DT(e,s[h])),c.push(s[h+1]);let u=[],l=Pt.empty();for(let h=a.length-1;h>=0;--h)if(!fU(u,a[h])){let f=a[h],g=c[h];g=nt(g);let _=o.yu(f);if(g instanceof ld)u.push(f);else{let m=Ta(g,_);m!=null&&(u.push(f),l.set(f,m))}}let d=new gn(u);return new cd(l,d,o.fieldTransforms)}function Ta(t,e){if(Cb(t=nt(t)))return Tb("Unsupported field value:",e,t),dU(t,e);if(t instanceof xs)return function(r,i){if(!Db(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Ta(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=je.fromDate(r);return{timestampValue:Kl(i.serializer,s)}}if(r instanceof je){let s=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kl(i.serializer,s)}}if(r instanceof wa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _a)return{bytesValue:WT(i.serializer,r._byteString)};if(r instanceof Dt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${Jy(r)}`)}(t,e)}function dU(t,e){let n={};return TT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(t,(r,i)=>{let s=Ta(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Cb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wa||t instanceof _a||t instanceof Dt||t instanceof xs)}function Tb(t,e,n){if(!Cb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Jy(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function DT(t,e,n){if((e=nt(e))instanceof Ms)return e._internalPath;if(typeof e=="string")return Zy(t,e);throw dd("Field path arguments must be of type string or ",t,!1,void 0,n)}var hU=new RegExp("[~\\*/\\[\\]]");function Zy(t,e,n){if(e.search(hU)>=0)throw dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ms(...e.split("."))._internalPath}catch{throw dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dd(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new T(y.INVALID_ARGUMENT,a+t+c)}function fU(t,e){return t.some(n=>n.isEqual(e))}var hd=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ny(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(bb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Ny=class extends hd{data(){return super.data()}};function bb(t,e){return typeof e=="string"?Zy(t,e):e instanceof Ms?e._internalPath:e._delegate._internalPath}function pU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new T(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Py=class{convertValue(e,n="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ui(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new wa(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Vy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fa(e));default:return null}}convertTimestamp(e){let n=ur(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=we.fromString(e);le(XT(r));let i=new Bl(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(n)||wn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};var ni=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},fd=class extends hd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ps(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(bb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ps=class extends fd{data(e={}){return super.data(e)}},Oy=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ni(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ps(this._firestore,this._userDataWriter,r.key,r,new ni(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new T(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ni(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ni(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:gU(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function gU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}var pd=class extends Py{constructor(e){super(),this.firestore=e}convertBytes(e){return new _a(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}};function Ab(t,e,n,...r){t=fs(t,Dt);let i=fs(t.firestore,Rs),s=aU(i),o;return o=typeof(e=nt(e))=="string"||e instanceof Ms?lU(s,"updateDoc",t._key,e,n,r):uU(s,"updateDoc",t._key,e),mU(i,[o.toMutation(t._key,ii.exists(!0))])}function Xy(t,...e){var n,r,i;t=nt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ET(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ET(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof Dt)u=fs(t.firestore,Rs),l=$y(t._key.path),c={next:d=>{e[o]&&e[o](yU(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=fs(t,ad);u=fs(d.firestore,Rs),l=d._query;let h=new pd(u);c={next:f=>{e[o]&&e[o](new Oy(u,h,d,f))},error:e[o+1],complete:e[o+2]},pU(t._query)}return function(h,f,g,_){let m=new Ay(_),w=new wy(f,m,g);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return UV(yield vT(h),w)})),()=>{m.Qa(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return jV(yield vT(h),w)}))}}(Ib(u),l,a,c)}function mU(t,e){return function(r,i){let s=new mn;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return KV(yield iU(r),i,s)})),s.promise}(Ib(t),e)}function yU(t,e,n){let r=n.docs.get(e._key),i=new pd(t);return new fd(t,i,e._key,r,new ni(n.hasPendingWrites,n.fromCache),e.converter)}function Sb(...t){return new xy("arrayUnion",t)}(function(e,n=!0){(function(i){Ns=i})(Ln),Kt(new ht("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Rs(new rm(r.getProvider("auth-internal")),new am(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new T(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bl(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),me(G0,"4.5.0",e),me(G0,"4.5.0","esm2017")})();var Id=function(){return Id=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Id.apply(this,arguments)};var wU={includeMetadataChanges:!1};function Rb(t,e){return e===void 0&&(e=wU),new K(function(n){var r=Xy(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Mb(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Id(Id({},r),(n={},n[e.idField]=t.id,n))}function xb(t){return Rb(t,{includeMetadataChanges:!0}).pipe(P(function(e){return e.docs}))}function Nb(t,e){return e===void 0&&(e={}),xb(t).pipe(P(function(n){return n.map(function(r){return Mb(r,e)})}))}var di=class{constructor(e){return e}},Pb="firestore",ev=class{constructor(){return No(Pb)}};var tv=new S("angularfire2.firestore-instances");function IU(t,e){let n=zp(Pb,t,e);return n&&new di(n)}function EU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new di(r)}}var DU={provide:ev,deps:[[new _t,tv]]},CU={provide:di,useFactory:IU,deps:[[new _t,tv],qr]},TU=(()=>{class t{constructor(){me("angularfire",Vn.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=tt({type:t});static \u0275inj=et({providers:[CU,DU]})}return t})();function Ob(t,...e){return{ngModule:TU,providers:[{provide:tv,useFactory:EU(t),multi:!0,deps:[ie,Wt,Po,Oo,[new _t,tl],[new _t,xo],...e]}]}}var nv=ln(Nb,!0);var kb=ln(Sb,!0);var rv=ln(vb,!0);var iv=ln(_b,!0);var Fb=ln(wb,!0);var sv=ln(Ab,!0);var Lb={providers:[ND(),_f([uC(()=>lC(zr.firebase)),Ob(()=>Fb())])]};var Je=(()=>{let e=class e{constructor(r){this.httpClient=r,this.FIREBASE_URL=zr.firebaseApiUrl,this.firestore=I(di),this.dilemasCollection=rv(this.firestore,"dilemas"),this.noticiasCollection=rv(this.firestore,"noticias"),this.apiUrl=zr.backendApiUrl}getLastDilemma(){return nv(this.dilemasCollection).pipe(P(r=>(console.log("Dilemas COLLECTION: ",r),r)))}updateVotos(r,i){let s=iv(this.firestore,"dilemas/"+r),o=sv(s,{votos:i});return de(o)}getNoticia(){return nv(this.noticiasCollection).pipe(P(r=>(console.log("Noticias COLLECTION: ",r),r)))}postComentario(r,i,s){let o={usuario:r,contenido:i,fecha:new Date().toISOString()},a=iv(this.firestore,"dilemas/"+s),c=sv(a,{comentarios:kb(o)});return de(c)}};e.\u0275fac=function(i){return new(i||e)(A(hp))},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var B="primary",Ba=Symbol("RouteTitle"),lv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Vs(t){return new lv(t)}function AU(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function SU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dn(t[n],e[n]))return!1;return!0}function Dn(t,e){let n=t?dv(t):void 0,r=e?dv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Hb(t[i],e[i]))return!1;return!0}function dv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Hb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function qb(t){return t.length>0?t[t.length-1]:null}function mr(t){return rh(t)?t:Gi(t)?de(Promise.resolve(t)):N(t)}var RU={exact:Gb,subset:Wb},zb={exact:MU,subset:xU,ignored:()=>!0};function Vb(t,e,n){return RU[n.paths](t.root,e.root,n.matrixParams)&&zb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function MU(t,e){return Dn(t,e)}function Gb(t,e,n){if(!fi(t.segments,e.segments)||!Td(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Gb(t.children[r],e.children[r],n))return!1;return!0}function xU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Hb(t[n],e[n]))}function Wb(t,e,n){return Kb(t,e,e.segments,n)}function Kb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!fi(i,n)||e.hasChildren()||!Td(i,n,r))}else if(t.segments.length===n.length){if(!fi(t.segments,n)||!Td(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Wb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!fi(t.segments,i)||!Td(t.segments,i,r)||!t.children[B]?!1:Kb(t.children[B],e,s,r)}}function Td(t,e,n){return e.every((r,i)=>zb[n](t[i].parameters,r.parameters))}var pr=class{constructor(e=new se([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){return OU.serialize(this)}},se=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bd(this)}},hi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Vs(this.parameters),this._parameterMap}toString(){return Yb(this)}};function NU(t,e){return fi(t,e)&&t.every((n,r)=>Dn(n.parameters,e[r].parameters))}function fi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function PU(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===B&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==B&&(n=n.concat(e(i,r)))}),n}var Lv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>new Sd,providedIn:"root"});let t=e;return t})(),Sd=class{parse(e){let n=new fv(e);return new pr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ba(e.root,!0)}`,r=LU(e.queryParams),i=typeof e.fragment=="string"?`#${kU(e.fragment)}`:"";return`${n}${r}${i}`}},OU=new Sd;function bd(t){return t.segments.map(e=>Yb(e)).join("/")}function ba(t,e){if(!t.hasChildren())return bd(t);if(e){let n=t.children[B]?ba(t.children[B],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==B&&r.push(`${i}:${ba(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=PU(t,(r,i)=>i===B?[ba(t.children[B],!1)]:[`${i}:${ba(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[B]!=null?`${bd(t)}/${n[0]}`:`${bd(t)}/(${n.join("//")})`}}function Qb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dd(t){return Qb(t).replace(/%3B/gi,";")}function kU(t){return encodeURI(t)}function hv(t){return Qb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ad(t){return decodeURIComponent(t)}function Ub(t){return Ad(t.replace(/\+/g,"%20"))}function Yb(t){return`${hv(t.path)}${FU(t.parameters)}`}function FU(t){return Object.entries(t).map(([e,n])=>`;${hv(e)}=${hv(n)}`).join("")}function LU(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Dd(n)}=${Dd(i)}`).join("&"):`${Dd(n)}=${Dd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var VU=/^[^\/()?;#]+/;function ov(t){let e=t.match(VU);return e?e[0]:""}var UU=/^[^\/()?;=#]+/;function jU(t){let e=t.match(UU);return e?e[0]:""}var BU=/^[^=?&#]+/;function $U(t){let e=t.match(BU);return e?e[0]:""}var HU=/^[^&#]+/;function qU(t){let e=t.match(HU);return e?e[0]:""}var fv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[B]=new se(e,n)),r}parseSegment(){let e=ov(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new hi(Ad(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=jU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ov(this.remaining);i&&(r=i,this.capture(r))}e[Ad(n)]=Ad(r)}parseQueryParam(e){let n=$U(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=qU(this.remaining);o&&(r=o,this.capture(r))}let i=Ub(n),s=Ub(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ov(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new R(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=B);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[B]:new se([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}};function Jb(t){return t.segments.length>0?new se([],{[B]:t}):t}function Zb(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Zb(i);if(r===B&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new se(t.segments,e);return zU(n)}function zU(t){if(t.numberOfChildren===1&&t.children[B]){let e=t.children[B];return new se(t.segments.concat(e.segments),e.children)}return t}function Us(t){return t instanceof pr}function GU(t,e,n=null,r=null){let i=Xb(t);return eA(i,e,n,r)}function Xb(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new se(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Jb(r);return e??i}function eA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return av(i,i,i,n,r);let s=WU(e);if(s.toRoot())return av(i,i,new se([],{}),n,r);let o=KU(s,i,t),a=o.processChildren?Ra(o.segmentGroup,o.index,s.commands):nA(o.segmentGroup,o.index,s.commands);return av(i,o.segmentGroup,a,n,r)}function Rd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Na(t){return typeof t=="object"&&t!=null&&t.outlets}function av(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=tA(t,e,n);let a=Jb(Zb(o));return new pr(a,s,i)}function tA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=tA(s,e,n)}),new se(t.segments,r)}var Md=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Rd(r[0]))throw new R(4003,!1);let i=r.find(Na);if(i&&i!==qb(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Md(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Md(n,e,r)}var Fs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function KU(t,e,n){if(t.isAbsolute)return new Fs(e,!0,0);if(!n)return new Fs(e,!1,NaN);if(n.parent===null)return new Fs(n,!0,0);let r=Rd(t.commands[0])?0:1,i=n.segments.length-1+r;return QU(n,i,t.numberOfDoubleDots)}function QU(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new Fs(r,!1,i-s)}function YU(t){return Na(t[0])?t[0].outlets:{[B]:t}}function nA(t,e,n){if(t??=new se([],{}),t.segments.length===0&&t.hasChildren())return Ra(t,e,n);let r=JU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new se(t.segments.slice(0,r.pathIndex),{});return s.children[B]=new se(t.segments.slice(r.pathIndex),t.children),Ra(s,0,i)}else return r.match&&i.length===0?new se(t.segments,{}):r.match&&!t.hasChildren()?pv(t,e,n):r.match?Ra(t,0,i):pv(t,e,n)}function Ra(t,e,n){if(n.length===0)return new se(t.segments,{});{let r=YU(n),i={};if(Object.keys(r).some(s=>s!==B)&&t.children[B]&&t.numberOfChildren===1&&t.children[B].segments.length===0){let s=Ra(t.children[B],e,n);return new se(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=nA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new se(t.segments,i)}}function JU(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Na(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Bb(c,u,o))return s;r+=2}else{if(!Bb(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function pv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Na(s)){let c=ZU(s.outlets);return new se(r,c)}if(i===0&&Rd(n[0])){let c=t.segments[e];r.push(new hi(c.path,jb(n[0]))),i++;continue}let o=Na(s)?s.outlets[B]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Rd(a)?(r.push(new hi(o,jb(a))),i+=2):(r.push(new hi(o,{})),i++)}return new se(r,{})}function ZU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=pv(new se([],{}),0,r))}),e}function jb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Bb(t,e,n){return t==n.path&&Dn(e,n.parameters)}var Ma="imperative",Be=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Be||{}),Ot=class{constructor(e,n){this.id=e,this.url=n}},Pa=class extends Ot{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Be.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pi=class extends Ot{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Tt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Tt||{}),gv=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(gv||{}),gr=class extends Ot{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gi=class extends Ot{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationSkipped}},Oa=class extends Ot{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xd=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mv=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yv=class extends Ot{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vv=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_v=class extends Ot{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wv=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Iv=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ev=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dv=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cv=class{constructor(e){this.snapshot=e,this.type=Be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tv=class{constructor(e){this.snapshot=e,this.type=Be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ka=class{},Fa=class{constructor(e){this.url=e}};var bv=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ld,this.attachRef=null}},Ld=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new bv,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Av(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Av(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Sv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Sv(e,this._root).map(n=>n.value)}};function Av(t,e){if(t===e.value)return e;for(let n of e.children){let r=Av(t,n);if(r)return r}return null}function Sv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Sv(t,n);if(r.length)return r.unshift(e),r}return[]}var Ct=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ks(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Pd=class extends Nd{constructor(e,n){super(e),this.snapshot=n,Uv(this,e)}toString(){return this.snapshot.toString()}};function rA(t){let e=XU(t),n=new ke([new hi("",{})]),r=new ke({}),i=new ke({}),s=new ke({}),o=new ke(""),a=new La(n,r,s,o,i,B,t,e.root);return a.snapshot=e.root,new Pd(new Ct(a,[]),e)}function XU(t){let e={},n={},r={},i="",s=new Va([],e,r,i,n,B,t,null,{});return new Od("",new Ct(s,[]))}var La=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(P(u=>u[Ba]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(P(e=>Vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(P(e=>Vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vv(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:C(C({},e.params),t.params),data:C(C({},e.data),t.data),resolve:C(C(C(C({},t.data),e.data),i?.data),t._resolvedData)}:r={params:C({},t.params),data:C({},t.data),resolve:C(C({},t.data),t._resolvedData??{})},i&&sA(i)&&(r.resolve[Ba]=i.title),r}var Va=class{get title(){return this.data?.[Ba]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Od=class extends Nd{constructor(e,n){super(n),this.url=e,Uv(this,n)}toString(){return iA(this._root)}};function Uv(t,e){e.value._routerState=t,e.children.forEach(n=>Uv(t,n))}function iA(t){let e=t.children.length>0?` { ${t.children.map(iA).join(", ")} } `:"";return`${t.value}${e}`}function cv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dn(e.params,n.params)||t.paramsSubject.next(n.params),SU(e.url,n.url)||t.urlSubject.next(n.url),Dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Rv(t,e){let n=Dn(t.params,e.params)&&NU(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Rv(t.parent,e.parent))}function sA(t){return typeof t.title=="string"||t.title===null}var ej=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=B,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.parentContexts=I(Ld),this.location=I(qi),this.changeDetector=I(Wi),this.environmentInjector=I(ct),this.inputBinder=I(jv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Mv(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Bi({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[qt]});let t=e;return t})(),Mv=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===La?this.route:e===Ld?this.childContexts:this.parent.get(e,n)}},jv=new S("");function tj(t,e,n){let r=Ua(t,e._root,n?n._root:void 0);return new Pd(r,e)}function Ua(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=nj(t,e,n);return new Ct(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ua(t,a)),o}}let r=rj(e.value),i=e.children.map(s=>Ua(t,s));return new Ct(r,i)}}function nj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ua(t,r,i);return Ua(t,r)})}function rj(t){return new La(new ke(t.url),new ke(t.params),new ke(t.queryParams),new ke(t.fragment),new ke(t.data),t.outlet,t.component,t)}var oA="ngNavigationCancelingError";function aA(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Us(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=cA(!1,Tt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function cA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[oA]=!0,n.cancellationCode=e,n}function ij(t){return uA(t)&&Us(t.url)}function uA(t){return!!t&&t[oA]}var sj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["ng-component"]],standalone:!0,features:[dt],decls:1,vars:0,template:function(i,s){i&1&&ne(0,"router-outlet")},dependencies:[ej],encapsulation:2});let t=e;return t})();function oj(t,e){return t.providers&&!t._injector&&(t._injector=Jf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Bv(t){let e=t.children&&t.children.map(Bv),n=e?fe(C({},t),{children:e}):C({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==B&&(n.component=sj),n}function Cn(t){return t.outlet||B}function aj(t,e){let n=t.filter(r=>Cn(r)===e);return n.push(...t.filter(r=>Cn(r)!==e)),n}function $a(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var cj=(t,e,n,r)=>P(i=>(new xv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),xv=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),cv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ks(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ks(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ks(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Tv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Dv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(cv(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),cv(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=$a(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},kd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ls=class{constructor(e,n){this.component=e,this.route=n}};function uj(t,e,n){let r=t._root,i=e?e._root:null;return Aa(r,i,n,[r.value])}function lj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Bs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ww(t)?t:e.get(t):r}function Aa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ks(e);return t.children.forEach(o=>{dj(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>xa(a,n.getContext(o),i)),i}function dj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=hj(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new kd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Aa(t,e,a?a.children:null,r,i):Aa(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ls(a.outlet.component,o))}else o&&xa(e,a,i),i.canActivateChecks.push(new kd(r)),s.component?Aa(t,null,a?a.children:null,r,i):Aa(t,null,n,r,i);return i}function hj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!fi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fi(t.url,e.url)||!Dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rv(t,e)||!Dn(t.queryParams,e.queryParams);case"paramsChange":default:return!Rv(t,e)}}function xa(t,e,n){let r=ks(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?xa(o,e.children.getContext(s),n):xa(o,null,n):xa(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ls(e.outlet.component,i)):n.canDeactivateChecks.push(new Ls(null,i)):n.canDeactivateChecks.push(new Ls(null,i))}function Ha(t){return typeof t=="function"}function fj(t){return typeof t=="boolean"}function pj(t){return t&&Ha(t.canLoad)}function gj(t){return t&&Ha(t.canActivate)}function mj(t){return t&&Ha(t.canActivateChild)}function yj(t){return t&&Ha(t.canDeactivate)}function vj(t){return t&&Ha(t.canMatch)}function lA(t){return t instanceof Tn||t?.name==="EmptyError"}var Cd=Symbol("INITIAL_VALUE");function js(){return gt(t=>dc(t.map(e=>e.pipe(bn(1),gc(Cd)))).pipe(P(e=>{for(let n of e)if(n!==!0){if(n===Cd)return Cd;if(n===!1||n instanceof pr)return n}return!0}),at(e=>e!==Cd),bn(1)))}function _j(t,e){return Se(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?N(fe(C({},n),{guardsResult:!0})):wj(o,r,i,t).pipe(Se(a=>a&&fj(a)?Ij(r,s,t,e):N(a)),P(a=>fe(C({},n),{guardsResult:a})))})}function wj(t,e,n,r){return de(t).pipe(Se(i=>bj(i.component,i.route,n,e,r)),Ft(i=>i!==!0,!0))}function Ij(t,e,n,r){return de(e).pipe(Kn(i=>Si(Dj(i.route.parent,r),Ej(i.route,r),Tj(t,i.path,n),Cj(t,i.route,n))),Ft(i=>i!==!0,!0))}function Ej(t,e){return t!==null&&e&&e(new Cv(t)),N(!0)}function Dj(t,e){return t!==null&&e&&e(new Ev(t)),N(!0)}function Cj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(s=>hc(()=>{let o=$a(e)??n,a=Bs(s,o),c=gj(a)?a.canActivate(e,t):Nn(o,()=>a(e,t));return mr(c).pipe(Ft())}));return N(i).pipe(js())}function Tj(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>lj(o)).filter(o=>o!==null).map(o=>hc(()=>{let a=o.guards.map(c=>{let u=$a(o.node)??n,l=Bs(c,u),d=mj(l)?l.canActivateChild(r,t):Nn(u,()=>l(r,t));return mr(d).pipe(Ft())});return N(a).pipe(js())}));return N(s).pipe(js())}function bj(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let c=$a(e)??i,u=Bs(a,c),l=yj(u)?u.canDeactivate(t,e,n,r):Nn(c,()=>u(t,e,n,r));return mr(l).pipe(Ft())});return N(o).pipe(js())}function Aj(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let s=i.map(o=>{let a=Bs(o,t),c=pj(a)?a.canLoad(e,n):Nn(t,()=>a(e,n));return mr(c)});return N(s).pipe(js(),dA(r))}function dA(t){return Ya(Ce(e=>{if(Us(e))throw aA(t,e)}),P(e=>e===!0))}function Sj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let s=i.map(o=>{let a=Bs(o,t),c=vj(a)?a.canMatch(e,n):Nn(t,()=>a(e,n));return mr(c)});return N(s).pipe(js(),dA(r))}var ja=class{constructor(e){this.segmentGroup=e||null}},Fd=class extends Error{constructor(e){super(),this.urlTree=e}};function Os(t){return Ai(new ja(t))}function Rj(t){return Ai(new R(4e3,!1))}function Mj(t){return Ai(cA(!1,Tt.GuardRejected))}var Nv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[B])return Rj(e.redirectTo);i=i.children[B]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Fd(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new pr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new se(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Pv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xj(t,e,n,r,i){let s=$v(t,e,n);return s.matched?(r=oj(e,r),Sj(r,e,n,i).pipe(P(o=>o===!0?s:C({},Pv)))):N(s)}function $v(t,e,n){if(e.path==="**")return Nj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?C({},Pv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||AU)(n,t,e);if(!i)return C({},Pv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?C(C({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Nj(t){return{matched:!0,parameters:t.length>0?qb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function $b(t,e,n,r){return n.length>0&&kj(t,n,r)?{segmentGroup:new se(e,Oj(r,new se(n,t.children))),slicedSegments:[]}:n.length===0&&Fj(t,n,r)?{segmentGroup:new se(t.segments,Pj(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new se(t.segments,t.children),slicedSegments:n}}function Pj(t,e,n,r){let i={};for(let s of n)if(Vd(t,e,s)&&!r[Cn(s)]){let o=new se([],{});i[Cn(s)]=o}return C(C({},r),i)}function Oj(t,e){let n={};n[B]=e;for(let r of t)if(r.path===""&&Cn(r)!==B){let i=new se([],{});n[Cn(r)]=i}return n}function kj(t,e,n){return n.some(r=>Vd(t,e,r)&&Cn(r)!==B)}function Fj(t,e,n){return n.some(r=>Vd(t,e,r))}function Vd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Lj(t,e,n,r){return Cn(t)!==r&&(r===B||!Vd(e,n,t))?!1:$v(e,t,n).matched}function Vj(t,e,n){return e.length===0&&!t.children[n]}var Ov=class{};function Uj(t,e,n,r,i,s,o="emptyOnly"){return new kv(t,e,n,r,i,o,s).recognize()}var jj=31,kv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Nv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new R(4002,`'${e.segmentGroup}'`)}recognize(){let e=$b(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(P(n=>{let r=new Va([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,{},B,this.rootComponentType,null,{}),i=new Ct(r,n),s=new Od("",i),o=GU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,B).pipe(Wn(r=>{if(r instanceof Fd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ja?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Vv(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(P(s=>s instanceof Ct?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return de(i).pipe(Kn(s=>{let o=r.children[s],a=aj(n,s);return this.processSegmentGroup(e,a,o,s)}),pc((s,o)=>(s.push(...o),s)),Qn(null),oh(),Se(s=>{if(s===null)return Os(r);let o=hA(s);return Bj(o),N(o)}))}processSegment(e,n,r,i,s,o){return de(n).pipe(Kn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Wn(c=>{if(c instanceof ja)return N(null);throw c}))),Ft(a=>!!a),Wn(a=>{if(lA(a))return Vj(r,i,s)?N(new Ov):Os(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return Lj(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Os(i):Os(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=$v(n,i,s);if(!a)return Os(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jj&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Se(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=xj(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(gt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(gt(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Va(l,h,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,Hj(r),Cn(r),r.component??r._loadedComponent??null,r,qj(r)),{segmentGroup:g,slicedSegments:_}=$b(n,l,d,c);if(_.length===0&&g.hasChildren())return this.processChildren(u,c,g).pipe(P(w=>w===null?null:new Ct(f,w)));if(c.length===0&&_.length===0)return N(new Ct(f,[]));let m=Cn(r)===s;return this.processSegment(u,c,g,_,m?B:s,!0).pipe(P(w=>new Ct(f,w instanceof Ct?[w]:[])))}))):Os(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):Aj(e,n,r,this.urlSerializer).pipe(Se(i=>i?this.configLoader.loadChildren(e,n).pipe(Ce(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Mj(n))):N({routes:[],injector:e})}};function Bj(t){t.sort((e,n)=>e.value.outlet===B?-1:n.value.outlet===B?1:e.value.outlet.localeCompare(n.value.outlet))}function $j(t){let e=t.value.routeConfig;return e&&e.path===""}function hA(t){let e=[],n=new Set;for(let r of t){if(!$j(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=hA(r.children);e.push(new Ct(r.value,i))}return e.filter(r=>!n.has(r))}function Hj(t){return t.data||{}}function qj(t){return t.resolve||{}}function zj(t,e,n,r,i,s){return Se(o=>Uj(t,e,n,r,o.extractedUrl,i,s).pipe(P(({state:a,tree:c})=>fe(C({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Gj(t,e){return Se(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of fA(c))o.add(u);let a=0;return de(o).pipe(Kn(c=>s.has(c)?Wj(c,r,t,e):(c.data=Vv(c,c.parent,t).resolve,N(void 0))),Ce(()=>a++),Ri(1),Se(c=>a===o.size?N(n):pt))})}function fA(t){let e=t.children.map(n=>fA(n)).flat();return[t,...e]}function Wj(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!sA(i)&&(s[Ba]=i.title),Kj(s,t,e,r).pipe(P(o=>(t._resolvedData=o,t.data=Vv(t,t.parent,n).resolve,null)))}function Kj(t,e,n,r){let i=dv(t);if(i.length===0)return N({});let s={};return de(i).pipe(Se(o=>Qj(t[o],e,n,r).pipe(Ft(),Ce(a=>{s[o]=a}))),Ri(1),sh(s),Wn(o=>lA(o)?pt:Ai(o)))}function Qj(t,e,n,r){let i=$a(e)??r,s=Bs(t,i),o=s.resolve?s.resolve(e,n):Nn(i,()=>s(e,n));return mr(o)}function uv(t){return gt(e=>{let n=t(e);return n?de(n).pipe(P(()=>e)):N(e)})}var pA=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===B);return i}getResolvedTitleForRoute(r){return r.data[Ba]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>I(Yj),providedIn:"root"});let t=e;return t})(),Yj=(()=>{let e=class e extends pA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(A(xD))},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hv=new S("",{providedIn:"root",factory:()=>({})}),gA=new S(""),Jj=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(ep)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=mr(r.loadComponent()).pipe(P(mA),Ce(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Yn(()=>{this.componentLoaders.delete(r)})),s=new Di(i,()=>new st).pipe(Ei());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Zj(i,this.compiler,r,this.onLoadEndListener).pipe(Yn(()=>{this.childrenLoaders.delete(i)})),a=new Di(o,()=>new st).pipe(Ei());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zj(t,e,n,r){return mr(t.loadChildren()).pipe(P(mA),Se(i=>i instanceof ro||Array.isArray(i)?N(i):de(e.compileModuleAsync(i))),P(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(gA,[],{optional:!0,self:!0}).flat()),{routes:o.map(Bv),injector:s}}))}function Xj(t){return t&&typeof t=="object"&&"default"in t}function mA(t){return Xj(t)?t.default:t}var qv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>I(e2),providedIn:"root"});let t=e;return t})(),e2=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),t2=new S("");var n2=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new st,this.transitionAbortSubject=new st,this.configLoader=I(Jj),this.environmentInjector=I(ct),this.urlSerializer=I(Lv),this.rootContexts=I(Ld),this.location=I(yo),this.inputBindingEnabled=I(jv,{optional:!0})!==null,this.titleStrategy=I(pA),this.options=I(Hv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(qv),this.createViewTransition=I(t2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let r=s=>this.events.next(new wv(s)),i=s=>this.events.next(new Iv(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(fe(C(C({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ke({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ma,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(at(o=>o.id!==0),P(o=>fe(C({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),gt(o=>{let a=!1,c=!1;return N(o).pipe(gt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Tt.SupersededByNewNavigation),pt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?fe(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new gi(u.id,this.urlSerializer.serialize(u.rawUrl),h,gv.IgnoredSameUrlNavigation)),u.resolve(null),pt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return N(u).pipe(gt(h=>{let f=this.transitions?.getValue();return this.events.next(new Pa(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?pt:Promise.resolve(h)}),zj(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ce(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=fe(C({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new xd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:_,extras:m}=u,w=new Pa(h,this.urlSerializer.serialize(f),g,_);this.events.next(w);let F=rA(this.rootComponentType).snapshot;return this.currentTransition=o=fe(C({},u),{targetSnapshot:F,urlAfterRedirects:f,extras:fe(C({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(o)}else{let h="";return this.events.next(new gi(u.id,this.urlSerializer.serialize(u.extractedUrl),h,gv.IgnoredByUrlHandlingStrategy)),u.resolve(null),pt}}),Ce(u=>{let l=new mv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),P(u=>(this.currentTransition=o=fe(C({},u),{guards:uj(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),_j(this.environmentInjector,u=>this.events.next(u)),Ce(u=>{if(o.guardsResult=u.guardsResult,Us(u.guardsResult))throw aA(this.urlSerializer,u.guardsResult);let l=new yv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),at(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Tt.GuardRejected),!1)),uv(u=>{if(u.guards.canActivateChecks.length)return N(u).pipe(Ce(l=>{let d=new vv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),gt(l=>{let d=!1;return N(l).pipe(Gj(this.paramsInheritanceStrategy,this.environmentInjector),Ce({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Tt.NoDataFromResolver)}}))}),Ce(l=>{let d=new _v(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),uv(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ce(f=>{d.component=f}),P(()=>{})));for(let f of d.children)h.push(...l(f));return h};return dc(l(u.targetSnapshot.root)).pipe(Qn(null),bn(1))}),uv(()=>this.afterPreactivation()),gt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?de(d).pipe(P(()=>o)):N(o)}),P(u=>{let l=tj(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=fe(C({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ce(()=>{this.events.next(new ka)}),cj(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),bn(1),Ce({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),ah(this.transitionAbortSubject.pipe(Ce(u=>{throw u}))),Yn(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Tt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wn(u=>{if(c=!0,uA(u))this.events.next(new gr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),ij(u)?this.events.next(new Fa(u.url)):o.resolve(!1);else{this.events.next(new Oa(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return pt}))}))}cancelNavigationTransition(r,i,s){let o=new gr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function r2(t){return t!==Ma}var i2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>I(s2),providedIn:"root"});let t=e;return t})(),Fv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},s2=(()=>{let e=class e extends Fv{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=eu(e)))(s||e)}})(),e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:()=>I(o2),providedIn:"root"});let t=e;return t})(),o2=(()=>{let e=class e extends yA{constructor(){super(...arguments),this.location=I(yo),this.urlSerializer=I(Lv),this.options=I(Hv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(qv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Pa)this.stateMemento=this.createStateMemento();else if(r instanceof gi)this.rawUrlTree=i.initialUrl;else if(r instanceof xd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ka?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof gr&&(r.code===Tt.GuardRejected||r.code===Tt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Oa?this.restoreHistory(i,!0):r instanceof pi&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=C(C({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=C(C({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=eu(e)))(s||e)}})(),e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Sa||{});function a2(t,e){t.events.pipe(at(n=>n instanceof pi||n instanceof gr||n instanceof Oa||n instanceof gi),P(n=>n instanceof pi||n instanceof gi?Sa.COMPLETE:(n instanceof gr?n.code===Tt.Redirect||n.code===Tt.SupersededByNewNavigation:!1)?Sa.REDIRECTING:Sa.FAILED),at(n=>n!==Sa.REDIRECTING),bn(1)).subscribe(()=>{e()})}function c2(t){throw t}var u2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},l2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vA=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(vu),this.stateManager=I(yA),this.options=I(Hv,{optional:!0})||{},this.pendingTasks=I(Lr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(n2),this.urlSerializer=I(Lv),this.location=I(yo),this.urlHandlingStrategy=I(qv),this._events=new st,this.errorHandler=this.options.errorHandler||c2,this.navigated=!1,this.routeReuseStrategy=I(i2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(gA,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(jv,{optional:!0}),this.eventsSubscription=new De,this.isNgZoneEnabled=I(ie)instanceof ie&&ie.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof gr&&i.code!==Tt.Redirect&&i.code!==Tt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof pi)this.navigated=!0;else if(i instanceof Fa){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||r2(s.source)};this.scheduleNavigation(a,Ma,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}h2(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ma,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=C({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Bv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=C(C({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Xb(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return eA(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Us(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ma,null,i)}navigate(r,i={skipLocationChange:!1}){return d2(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=C({},u2):i===!1?s=C({},l2):s=i,Us(r))return Vb(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Vb(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return a2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function d2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new R(4008,!1)}function h2(t){return!(t instanceof ka)&&!(t instanceof Fa)}var p2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},k6=fe(C({},p2),{"[class.ng-submitted]":"isSubmitted"});var g2=new S("CallSetDisabledState",{providedIn:"root",factory:()=>_A}),_A="always";var m2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({});let t=e;return t})();var wA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:g2,useValue:r.callSetDisabledState??_A}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=tt({type:e}),e.\u0275inj=et({imports:[m2]});let t=e;return t})();var IA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["app-header"]],standalone:!0,features:[dt],decls:9,vars:0,consts:[[1,"fixed-header"],[1,"header-content"],[1,"header-line"],[1,"daily-title"],["src","https://i.imgur.com/61ukuts.png","alt","Logo",1,"header-logo"],[1,"dilemma-title"]],template:function(i,s){i&1&&($(0,"header",0)(1,"div",1),ne(2,"span",2),$(3,"h1",3),pe(4,"daily"),z(),ne(5,"img",4),$(6,"h1",5),pe(7,"dilemma"),z(),ne(8,"span",2),z()())},styles:[".fixed-header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-color:#4ec8df;z-index:1000}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.5rem 0}.header-line[_ngcontent-%COMP%]{flex-grow:1;background-color:#0f2e52;height:.3vw}.header-logo[_ngcontent-%COMP%]{position:absolute;height:8vw;object-fit:contain;margin-top:5vw}h1[_ngcontent-%COMP%]{margin:0;color:#0f2e52;font-size:3vw;font-family:Righteous}.daily-title[_ngcontent-%COMP%]{margin-right:-4vw}.dilemma-title[_ngcontent-%COMP%]{margin-left:25vw}@media screen and (max-width: 1000px){.daily-title[_ngcontent-%COMP%]{font-size:7vw}.dilemma-title[_ngcontent-%COMP%]{font-size:7vw;margin-left:41vw}.header-logo[_ngcontent-%COMP%]{position:absolute;height:22vw;object-fit:contain;margin-top:9vw}}"]});let t=e;return t})();var EA=(()=>{let e=class e{constructor(){this.url="carrascco.github.io/ddilemma-frontend/",this.text=`\xA1Qu\xE9 interesante! \u{1F60A} Echa un vistazo al dilema de la noticia de hoy \u{1F4F0}\u{1F50D}: 

`}shareOnWhatsApp(){let r=`https://wa.me/?text=${encodeURIComponent(this.text+this.url)}`;window.open(r,"_blank")}shareOnTwitter(){let r=`https://twitter.com/intent/tweet?text=${encodeURIComponent(this.text)}&url=${encodeURIComponent(this.url)}`;window.open(r,"_blank")}shareOnFacebook(){let r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.url)}`;window.open(r,"_blank")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ut({type:e,selectors:[["app-sharing"]],standalone:!0,features:[dt],decls:9,vars:0,consts:[[1,"box"],[1,"sharing-buttons"],[1,"btn",3,"click"],["id","whatsappBtn","src","https://cdn.iconscout.com/icon/free/png-256/free-whatsapp-logo-9289809-7573062.png","alt","WhatsApp"],["src","https://cdn.iconscout.com/icon/free/png-512/free-twitter-x-10463384-8589161.png?f=webp&w=256","alt","X"],["src","https://cdn.iconscout.com/icon/free/png-512/free-facebook-74-189794.png?f=webp&w=256","alt","Facebook"]],template:function(i,s){i&1&&($(0,"h2",0),pe(1,"\xA1Comp\xE1rtelo con tus amigos!"),z(),$(2,"div",1)(3,"button",2),qe("click",function(){return s.shareOnWhatsApp()}),ne(4,"img",3),z(),$(5,"button",2),qe("click",function(){return s.shareOnTwitter()}),ne(6,"img",4),z(),$(7,"button",2),qe("click",function(){return s.shareOnFacebook()}),ne(8,"img",5),z()())},styles:[".sharing-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.sharing-buttons[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{border-radius:50%;width:100px;height:100px;display:flex;justify-content:center;align-items:center;border:none;padding:0;margin:0 2vw 3vw}.sharing-buttons[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:55%;height:auto}#whatsappBtn[_ngcontent-%COMP%]{width:80%}.box[_ngcontent-%COMP%]{padding-top:.75vw;padding-bottom:.75vw;border-radius:7vw;max-width:30vw}h2[_ngcontent-%COMP%]{color:#0f2e52}.btn[_ngcontent-%COMP%]:hover{background-color:#fff}@media screen and (max-width: 1000px){.box[_ngcontent-%COMP%]{max-width:75vw}.box[_ngcontent-%COMP%]{margin-bottom:10vw}.sharing-buttons[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{width:17vw;height:17vw}}"]});let t=e;return t})();function y2(t,e){if(t&1){let n=go();$(0,"div",2),ne(1,"i",5),$(2,"input",6),qe("click",function(){Pr(n);let i=lt();return Or(i.toggleInputs())}),z()()}}function v2(t,e){if(t&1){let n=go();$(0,"div",2),ne(1,"i",7),$(2,"input",8),qe("blur",function(){Pr(n);let i=lt();return Or(i.onNameBlur())}),z(),$(3,"textarea",9),qe("blur",function(){Pr(n);let i=lt();return Or(i.onCommBlur())}),z(),$(4,"div",10)(5,"button",11),qe("click",function(){Pr(n);let i=lt();return Or(i.postComentario())}),pe(6,"Enviar"),z()()()}}function _2(t,e){if(t&1&&($(0,"div",12)(1,"div",13),ne(2,"i",14),$(3,"h3",15),pe(4),$(5,"span"),ne(6,"i",16),$(7,"span",17),pe(8),z()()()(),$(9,"article"),pe(10),z()()),t&2){let n=e.$implicit,r=lt();ue(4),on("",n.usuario," "),ue(4),tr(r.fechaToString(n.fecha)),ue(2),tr(n.contenido)}}var DA=(()=>{let e=class e{constructor(r){this.dataService=r,this.dilemma={contenido:"",fecha_generacion:"",id_noticia:0,respuestas:[],votos:[],comentarios:[]},this.fechaToText="",this.comentarios=[],this.showFirstInput=!0,this.showAdditionalInputs=!1}ngOnChanges(){}toggleInputs(){this.showFirstInput=!1,this.showAdditionalInputs=!0,setTimeout(()=>{let r=document.getElementById("name-input");r&&r.focus()},0)}onNameBlur(){setTimeout(()=>{let r=document.getElementById("name-input"),i=document.getElementById("comment-textarea");r&&r.value.trim()===""&&i&&i.value.trim()===""&&(i&&document.activeElement===i||(this.showFirstInput=!0,this.showAdditionalInputs=!1))},100)}onCommBlur(){setTimeout(()=>{let r=document.getElementById("name-input"),i=document.getElementById("comment-textarea");i&&i.value.trim()===""&&r&&r.value.trim()===""&&(r&&document.activeElement===r||(this.showFirstInput=!0,this.showAdditionalInputs=!1))},100)}postComentario(){let r=document.getElementById("name-input"),i=document.getElementById("comment-textarea");if(r&&i){let s=r.value.trim(),o=i.value.trim();s&&o&&(this.dataService.postComentario(s,o,this.dilemma.fecha_generacion),this.showFirstInput=!0,this.showAdditionalInputs=!1,r.value="",i.value="")}}fechaToString(r){let i=new Date(r),s=i.getDate();console.log(this.dilemma.fecha_generacion);let o=i.getMonth()+1,a=i.getFullYear(),c=i.getHours(),u=i.getMinutes();return`${s<10?"0"+s:s}-${o<10?"0"+o:o}-${a} a las ${c<10?"0"+c:c}:${u<10?"0"+u:u}`}};e.\u0275fac=function(i){return new(i||e)(Te(Je))},e.\u0275cmp=ut({type:e,selectors:[["app-comments"]],inputs:{dilemma:"dilemma"},standalone:!0,features:[On([Je]),qt,dt],decls:9,vars:5,consts:[[1,"box","comments-container"],["id","heading"],[1,"item"],["class","item",4,"ngIf"],["class","comments item","style","text-align: left;   padding-bottom: 1vw;",4,"ngFor","ngForOf"],[1,"fas","fa-user-circle","fa-3x","user-icon",2,"flex","auto"],["type","text","id","comment-input","name","comment","placeholder","Escribe un comentario",2,"flex","auto",3,"click"],[1,"fas","fa-user-circle","fa-3x","user-icon",2,"flex","none"],["type","text","id","name-input","name","name","placeholder","Escribe tu nombre","required","",2,"flex","none",3,"blur"],["id","comment-textarea","name","comment","rows","4","cols","50","placeholder","Escribe tu comentario aqu\xED","required","",2,"display","block",3,"blur"],[1,"btn-container",2,"max-width","90%"],["type","submit",1,"btn","clicked",3,"click"],[1,"comments","item",2,"text-align","left","padding-bottom","1vw"],[2,"display","flex"],[1,"fas","fa-user-circle","fa-3x","user-icon"],[1,"user-icon",2,"margin-left","1vw","margin-top","0.75vw"],["id","iSpan",1,"fas","fa-calendar-alt"],["id","spanSpan"]],template:function(i,s){i&1&&($(0,"div",0)(1,"div",1)(2,"h1"),pe(3,"\xA1Comparte tu opini\xF3n!"),z()(),$(4,"form",2),sn(5,y2,3,0,"div",3)(6,v2,7,0,"div",3),z(),sn(7,_2,11,3,"div",4),z(),ne(8,"app-sharing")),i&2&&(ue(4),zi("larger",s.showAdditionalInputs),ue(),He("ngIf",s.showFirstInput),ue(),He("ngIf",s.showAdditionalInputs),ue(),He("ngForOf",s.dilemma.comentarios))},dependencies:[kn,Eu,Yi,EA],styles:[".box[_ngcontent-%COMP%]{max-width:65vw;margin:50px auto;background:#fff;border-radius:15px;box-shadow:5px 5px 15px -5px #0000004d}.user-icon[_ngcontent-%COMP%]{color:#0f2e52}#heading[_ngcontent-%COMP%]{background:#fff;border-radius:10px;text-align:center}h1[_ngcontent-%COMP%]{color:#0f2e52}.btn[_ngcontent-%COMP%]{width:14.927vw;font-size:1.5vw}.item[_ngcontent-%COMP%]{min-height:5vw;display:block;align-items:center}input[_ngcontent-%COMP%]{margin:0;margin-left:1vw}hr[_ngcontent-%COMP%]{margin-bottom:1vw}textarea[_ngcontent-%COMP%]{font-size:.85vw;font-weight:350;box-shadow:0 0 5px 2px #80808080;font-family:Montserrat,sans-serif;margin-top:1vw;margin-left:3.9vw;width:80%;max-width:80%;margin-bottom:1vw}form[_ngcontent-%COMP%]{text-align:left;margin-left:20px}input[type=text][_ngcontent-%COMP%]{text-align:left;height:60px;top:10px;border:none;background:transparent;font-size:1vw;font-weight:200;width:80%;max-width:80%;box-shadow:0 0 5px 2px #80808080}p[_ngcontent-%COMP%]{text-align:left;height:60px;top:10px;border:none;background:transparent;font-size:1vw;font-weight:200;width:80%;max-width:80%}article[_ngcontent-%COMP%]{font-size:.85vw;margin-left:4vw;margin-bottom:1.5vw;margin-top:1vw}input[type=text][_ngcontent-%COMP%]:focus{outline:none;box-shadow:inset 0 -3px #4ec8df}[_ngcontent-%COMP%]::placeholder{color:gray;opacity:1}.comments[_ngcontent-%COMP%]{text-align:left;margin-left:1vw;margin-top:.75vw}#iSpan[_ngcontent-%COMP%]{font-size:.95vw;opacity:.6;margin-left:1vw;margin-right:.4vw}#spanSpan[_ngcontent-%COMP%]{font-size:.95vw;opacity:.6}.comments-container[_ngcontent-%COMP%]{max-height:35vw;overflow-y:auto}@media screen and (max-width: 1000px){i[_ngcontent-%COMP%]{font-size:7vw}.btn[_ngcontent-%COMP%]{font-size:4vw;width:100%}.box[_ngcontent-%COMP%]{max-width:87vw;padding:25px;padding-bottom:5vw}.comments[_ngcontent-%COMP%]{padding-top:5vw}p[_ngcontent-%COMP%]{font-size:4vw}h1[_ngcontent-%COMP%]{font-size:6vw}span[_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-size:4vw}textarea[_ngcontent-%COMP%]{font-size:4vw;margin-top:6vw;margin-left:7.5vw}#iSpan[_ngcontent-%COMP%]{font-size:4vw}#spanSpan[_ngcontent-%COMP%]{font-size:3vw}article[_ngcontent-%COMP%]{font-size:4vw}hr[_ngcontent-%COMP%]{margin-top:5vw}.comments-container[_ngcontent-%COMP%]{max-height:65vw}}"]});let t=e;return t})();function w2(t,e){if(t&1&&($(0,"div",4)(1,"h1"),pe(2),z(),$(3,"div",5)(4,"div",6)(5,"article"),pe(6),z(),ne(7,"br"),$(8,"div",7),ne(9,"img",8),z(),ne(10,"br"),$(11,"article"),pe(12),z(),ne(13,"br",9),z()(),$(14,"p"),pe(15,"Mira la noticia completa en:"),z(),$(16,"a",10),pe(17),z()()),t&2){let n=lt();ue(2),tr(n.noticia.titulo),ue(4),tr(n.parrafo1),ue(3),mu("src",n.noticia.url_imagen,Lf),ue(3),tr(n.parrafo2),ue(4),mu("href",n.noticia.url,Lf),ue(),Zf("",n.noticia.fuente," - ",n.noticia.titulo,"")}}function I2(t,e){if(t&1&&ne(0,"app-comments",11),t&2){let n=lt();He("dilemma",n.dilemma)}}var zv=(()=>{let e=class e{constructor(r,i){this.dataService=r,this.router=i,this.dilemma={contenido:"",fecha_generacion:"",id_noticia:0,respuestas:[],votos:[],comentarios:[]},this.parrafo1="",this.parrafo2="",this.viewNoticia=!1,this.noticia={id:0,url:"",titulo:"",cuerpo:"",fuente:"",url_imagen:""}}ngOnChanges(){this.retrieveNoticia()}retrieveNoticia(){console.log("Entrando en getNoticia"),this.dataService.getNoticia().subscribe(r=>{console.log(r),this.noticia=r[r.length-1];let i=this.noticia.cuerpo.split(".");this.parrafo1=i.slice(0,2).join("."),this.parrafo2=i.slice(2).join(".")})}noticiaRetrieved(){this.viewNoticia=!0,console.log(this.noticia),setTimeout(()=>{this.scrollIntoNoticia()},250)}scrollIntoNoticia(){document.getElementById("noticiaElement")?.scrollIntoView({behavior:"smooth",block:"start"})}};e.\u0275fac=function(i){return new(i||e)(Te(Je),Te(vA))},e.\u0275cmp=ut({type:e,selectors:[["app-noticia"]],inputs:{dilemma:"dilemma"},standalone:!0,features:[On([Je]),qt,dt],decls:8,vars:2,consts:[["id","verNoticia",1,"btn-container"],[1,"btn",3,"click"],["class","box","id","noticiaElement",4,"ngIf"],[3,"dilemma",4,"ngIf"],["id","noticiaElement",1,"box"],["id","contenedorNoticia"],[2,"flex","1"],["id","imgContainer",2,"text-align","center","flex","0.5","justify-content","center","allign-items","center","padding-left","2vw"],["alt","imagen noticia",3,"src"],["id","saltoPostFuente"],["target","_blank",3,"href"],[3,"dilemma"]],template:function(i,s){i&1&&(ne(0,"br")(1,"br"),$(2,"div",0)(3,"button",1),qe("click",function(){return s.noticiaRetrieved()}),pe(4," Ver Noticia "),z()(),ne(5,"br"),sn(6,w2,18,7,"div",2)(7,I2,1,1,"app-comments",3)),i&2&&(ue(6),He("ngIf",s.viewNoticia),ue(),He("ngIf",s.viewNoticia))},dependencies:[kn,Yi,DA],styles:[".box[_ngcontent-%COMP%]{max-width:50vw;padding:25px}h1[_ngcontent-%COMP%]{color:#000}p[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{width:auto;max-height:20vw;height:auto}#contenedorNoticia[_ngcontent-%COMP%]{display:flex;text-align:left;font-size:.85vw;font-weight:400}#saltoPostFuente[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 1000px){html[_ngcontent-%COMP%]{font-size:3vw}#verNoticia[_ngcontent-%COMP%]{text-align:inherit}#contenedorNoticia[_ngcontent-%COMP%]{display:block;text-align:left;font-size:30px}#imgContainer[_ngcontent-%COMP%]{text-align:center}#saltoPostFuente[_ngcontent-%COMP%]{display:inline}img[_ngcontent-%COMP%]{width:auto;max-height:37vw;height:auto}.box[_ngcontent-%COMP%]{max-width:87vw;padding:25px}p[_ngcontent-%COMP%]{text-align:center;font-size:4vw}a[_ngcontent-%COMP%]{max-width:90vw;display:block}.btn[_ngcontent-%COMP%]{font-size:5vw;width:100%}}"]});let t=e;return t})();var Ud=(()=>{let e=class e{constructor(r,i){this.document=r,this.platformId=i,this.documentIsAccessible=rD(this.platformId)}static getCookieRegExp(r){let i=r.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(r){try{return decodeURIComponent(r)}catch{return r}}check(r){return this.documentIsAccessible?(r=encodeURIComponent(r),e.getCookieRegExp(r).test(this.document.cookie)):!1}get(r){if(this.documentIsAccessible&&this.check(r)){r=encodeURIComponent(r);let s=e.getCookieRegExp(r).exec(this.document.cookie);return s[1]?e.safeDecodeURIComponent(s[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let r={},i=this.document;return i.cookie&&i.cookie!==""&&i.cookie.split(";").forEach(s=>{let[o,a]=s.split("=");r[e.safeDecodeURIComponent(o.replace(/^ /,""))]=e.safeDecodeURIComponent(a)}),r}set(r,i,s,o,a,c,u,l){if(!this.documentIsAccessible)return;if(typeof s=="number"||s instanceof Date||o||a||c||u){let f={expires:s,path:o,domain:a,secure:c,sameSite:u||"Lax",partitioned:l};this.set(r,i,f);return}let d=encodeURIComponent(r)+"="+encodeURIComponent(i)+";",h=s||{};if(h.expires)if(typeof h.expires=="number"){let f=new Date(new Date().getTime()+h.expires*1e3*60*60*24);d+="expires="+f.toUTCString()+";"}else d+="expires="+h.expires.toUTCString()+";";h.path&&(d+="path="+h.path+";"),h.domain&&(d+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${r} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(d+="secure;"),h.sameSite||(h.sameSite="Lax"),d+="sameSite="+h.sameSite+";",h.partitioned&&(d+="Partitioned;"),this.document.cookie=d}delete(r,i,s,o,a="Lax"){if(!this.documentIsAccessible)return;let c=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(r,"",{expires:c,path:i,domain:s,secure:o,sameSite:a})}deleteAll(r,i,s,o="Lax"){if(!this.documentIsAccessible)return;let a=this.getAll();for(let c in a)a.hasOwnProperty(c)&&this.delete(c,r,i,s,o)}};e.\u0275fac=function(i){return new(i||e)(A(ze),A($e))},e.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function D2(t,e){if(t&1&&($(0,"h1",7),pe(1),z()),t&2){let n=lt().$implicit;ue(),on("",n.percentage,"%")}}function C2(t,e){if(t&1){let n=go();$(0,"button",5),qe("click",function(){let i=Pr(n).$implicit,s=lt();return Or(s.clickRespuesta(i))}),pe(1),ne(2,"br"),sn(3,D2,2,1,"h1",6),z()}if(t&2){let n=e.$implicit,r=lt();zi("clicked",r.clickedButton===n.text)("no-hover",r.buttonClicked),ue(),on(" ",n.text," "),ue(2),He("ngIf",r.buttonClicked)}}function T2(t,e){if(t&1&&ne(0,"app-noticia",8),t&2){let n=lt();He("dilemma",n.dilemma)}}var CA=(()=>{let e=class e{constructor(r,i){this.cookieSvc=r,this.dataService=i,this.idDilemma="",this.respuestas=[],this.dilema="Dilema de la semana",this.clickedButton=null,this.buttonClicked=!1,this.buttons=[],this.votos=[0,0,0,0],this.percentage=0,this.dilemma={contenido:"",id_noticia:0,fecha_generacion:"",respuestas:[],votos:[0,0,0,0],comentarios:[]}}ngOnChanges(){this.dilemma.fecha_generacion&&this.cookieSvc.get("date")!==this.dilemma.fecha_generacion&&(console.log("ENTRO A BORRAR, COMPARACI\xD3N: ",this.cookieSvc.get("date"),this.dilemma.fecha_generacion),this.cookieSvc.deleteAll()),this.respuestas=this.dilemma.respuestas,this.dilema=this.dilemma.contenido,this.buttons.length==0&&this.insertRespuestas(),this.idDilemma=this.dilemma.fecha_generacion,this.votos=this.dilemma.votos,this.cookieSvc.get("voted")==="true"&&this.clickRespuesta(this.cookieSvc.get("respuesta"))}calculatePercentages(){if(this.buttons.length===0)return;let r=this.votos.reduce((i,s)=>i+s,0);this.votos.forEach((i,s)=>{s>=this.buttons.length||(this.buttons[s].percentage=parseFloat((i/r*100).toFixed(2)))})}insertRespuestas(){this.respuestas.forEach(r=>{this.buttons.push({text:r,percentage:25})})}clickRespuesta(r){let i=!1;if(this.cookieSvc.get("voted")!=="true"){this.cookieSvc.set("voted","true");let s=new Date,o=s.getDate(),a=s.getMonth()+1;this.cookieSvc.set("respuesta",r.text),this.cookieSvc.set("date",this.dilemma.fecha_generacion),this.clickedButton=r.text,i=!0}else this.clickedButton=r;this.buttonClicked=!0,this.percentage=r.percentage,this.votos[this.buttons.indexOf(r)]++,this.calculatePercentages(),i&&this.sendVotos(),setTimeout(()=>{this.scrollIntoPercentages()},250)}scrollIntoPercentages(){document.getElementById("app-noticia")?.scrollIntoView({behavior:"smooth",block:"start"})}sendVotos(){this.dataService.updateVotos(this.dilemma.fecha_generacion,this.votos).subscribe({next:r=>{},error:r=>console.error("Error al actualizar votos: ",r)})}};e.\u0275fac=function(i){return new(i||e)(Te(Ud),Te(Je))},e.\u0275cmp=ut({type:e,selectors:[["app-dilemma"]],inputs:{dilemma:"dilemma"},standalone:!0,features:[On([Je,zv]),qt,dt],decls:6,vars:3,consts:[[2,"text-align","center"],["id","dilemmaElement",1,"box",2,"color","white","background","#4EC8DF"],["id","btnContainer",1,"btn-container"],["class","btn",3,"clicked","no-hover","click",4,"ngFor","ngForOf"],["id","app-noticia",3,"dilemma",4,"ngIf"],[1,"btn",3,"click"],["class","percentage","style","text-align: center;",4,"ngIf"],[1,"percentage",2,"text-align","center"],["id","app-noticia",3,"dilemma"]],template:function(i,s){i&1&&($(0,"div",0)(1,"div",1),pe(2),z(),$(3,"div",2),sn(4,C2,4,6,"button",3),z(),sn(5,T2,1,1,"app-noticia",4),z()),i&2&&(ue(2),on(" ",s.dilema," "),ue(2),He("ngForOf",s.buttons),ue(),He("ngIf",s.buttonClicked))},dependencies:[kn,Eu,Yi,zv],styles:["#dilemmaElement[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;text-align:justify;-webkit-hyphens:auto;hyphens:auto}button.clicked[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{color:#fff}h1[_ngcontent-%COMP%]{margin:0;color:#0f2e52;font-size:2.5rem;font-family:Montserrat,sans-serif}.daily-title[_ngcontent-%COMP%]{margin-right:-50px}.dilemma-title[_ngcontent-%COMP%]{margin-left:500px}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}.clicked[_ngcontent-%COMP%]{background-color:#0f2e52}.line-box[_ngcontent-%COMP%]{padding:2px;width:40%;height:20px;border:1px solid #267591;border-radius:20px}.line[_ngcontent-%COMP%]{height:20px;border-radius:20px;background:#57d295;animation:_ngcontent-%COMP%_loading 2s forwards cubic-bezier(0,0,0,0)}@keyframes _ngcontent-%COMP%_loading{0%{width:0%}to{width:100%}}@media screen and (max-width: 1000px){.btn[_ngcontent-%COMP%]{font-size:4vw;width:100%}}"]});let t=e;return t})();var TA=(()=>{let e=class e{constructor(r){this.dataService=r,this.titulo="DailyDilemma",this.lastDilemma={contenido:"",id_noticia:0,fecha_generacion:"",respuestas:[],votos:[0,0,0,0],comentarios:[]}}ngOnInit(){this.getLastDilemma().then(()=>{let r=this.lastDilemma?.fecha_generacion,i;if(r){i=new Date(r);let s=i.getUTCDate(),o=i.getUTCMonth()+1;i=`${s<10?"0":""}${s}/${o<10?"0":""}${o}`}this.titulo="Dilema Diario "+i})}getLastDilemma(){return new Promise((r,i)=>{this.dataService.getLastDilemma().subscribe(s=>{this.lastDilemma=s[s.length-1],r(s)},s=>{console.error(s),i(s)})})}};e.\u0275fac=function(i){return new(i||e)(Te(Je))},e.\u0275cmp=ut({type:e,selectors:[["app-root"]],standalone:!0,features:[On([Je,Ud]),dt],decls:5,vars:2,consts:[["id","heading",1,"box"],[3,"dilemma"]],template:function(i,s){i&1&&(ne(0,"app-header"),$(1,"div",0)(2,"h1"),pe(3),z()(),ne(4,"app-dilemma",1)),i&2&&(ue(3),on(" ",s.titulo,""),ue(),He("dilemma",s.lastDilemma))},dependencies:[kn,wA,ID,IA,CA]});let t=e;return t})();var Gv=class{constructor(e,n){this._delegate=e,this.firebase=n,So(e,new ht("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Vu(this._delegate)))}_getService(e,n=un){var r;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=un){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){So(this._delegate,e)}_addOrOverwriteComponent(e){$p(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var b2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},bA=new xt("app-compat","Firebase",b2);function A2(t){let e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:me,setLogLevel:ju,onLog:Uu,apps:null,SDK_VERSION:Ln,INTERNAL:{registerComponent:a,removeApp:r,useAsService:c,modularAPIs:Hp}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||un,!Ap(e,u))throw bA.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,l={}){let d=Xi(u,l);if(Ap(e,d.name))return e[d.name];let h=new t(d,n);return e[d.name]=h,h}function o(){return Object.keys(e).map(u=>e[u])}function a(u){let l=u.name,d=l.replace("-compat","");if(Kt(u)&&u.type==="PUBLIC"){let h=(f=i())=>{if(typeof f[d]!="function")throw bA.create("invalid-app-argument",{appName:l});return f[d]()};u.serviceProps!==void 0&&To(h,u.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,l).apply(this,u.multipleInstances?f:[])}}return u.type==="PUBLIC"?n[d]:null}function c(u,l){return l==="serverAuth"?null:l}return n}function SA(){let t=A2(Gv);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:SA,extendNamespace:e,createSubscribe:ku,ErrorFactory:xt,deepExtend:To});function e(n){To(t,n)}return t}var S2=SA();var AA=new an("@firebase/app-compat"),R2="@firebase/app-compat",M2="0.2.29";function x2(t){me(R2,M2,t)}if(BD()&&self.firebase!==void 0){AA.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&AA.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var Hn=S2;x2();var N2="firebase",P2="10.9.0";Hn.registerVersion(N2,P2,"app-compat");var jd=class{constructor(e){return e}},RA=new S("angularfire2.app.options"),MA=new S("angularfire2.app.name");function O2(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let o=Hn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Hn.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;k2("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new jd(o)}var k2=(t,...e)=>{qE()&&typeof console<"u"&&console[t](...e)},F2={provide:jd,useFactory:O2,deps:[RA,ie,[new _t,MA]]},xA=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:RA,useValue:n},{provide:MA,useValue:r}]}}constructor(n){Hn.registerVersion("angularfire",Vn.full,"core"),Hn.registerVersion("angularfire",Vn.full,"app-compat"),Hn.registerVersion("angular",yu.full,n.toString())}static \u0275fac=function(r){return new(r||t)(A($e))};static \u0275mod=tt({type:t});static \u0275inj=et({providers:[F2]})}return t})();var T8=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];xA.initializeApp(zr.firebase);MD(TA,Lb).catch(t=>console.error(t));
